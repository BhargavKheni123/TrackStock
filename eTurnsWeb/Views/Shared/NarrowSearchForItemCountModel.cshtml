@model eTurns.DTO.CommonDTO
<div class="leftopenContent" style="display: none;">
    <a class="openBtn" id="ExpandNarrowSearchIM">
        <img src="~/Content/images/open.png" />
    </a>
</div>
@{
    string modelText = string.Empty;
    if (!String.IsNullOrEmpty(Model.Text))
    {
        modelText = Model.Text;
    }
    RouteValueDictionary obj = new RouteValueDictionary();
    obj = ViewContext.Controller.ControllerContext.RouteData.Values;
    string ControllerName = Convert.ToString(obj["controller"]);
    string ActionName = Convert.ToString(obj["action"]);
}
<div class="leftopenContent" style="display: none;">
    <a class="openBtn" id="ExpandNarrowSearchIM">
        <img src="~/Content/images/open.png" />
    </a>
</div>
<div class="IteamBlock">
    <a class="closedBtn" id="CollapseNarrowSearchIM">
        <img src="~/Content/images/closed.png" />
    </a>
    <h2>@eTurns.DTO.Resources.ResNarrowSearch.NarrowSearchHeader2</h2>
    @*<h3>@eTurns.DTO.Resources.ResNarrowSearch.NarrowSearchHeader2</h3>*@
    <ul id="nssortableCount" class="NarrowUL">
        <li attrsortorder="1">
            <p class="handle"><img /></p>
            <select id="ItemLocationsIC" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24" />
                </a>
                <div class='dropcontent' id="ItemLocationsICCollapseIM">
                </div>
            </div>
        </li>
        <li attrsortorder="2">
            <p class="handle"><img /></p>
            <select id="ManufacturerIM" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="ManufacturerCollapseIM">
                </div>
            </div>
        </li>
        <li attrsortorder="3">
            <p class="handle"><img /></p>
            <select id="ItemTrackingType" multiple="multiple" name="example-basic" size="5">
                <option value="1">No Tracking</option>
                <option value="2">@eTurns.DTO.ResItemMaster.SerialNumberTracking</option>
                <option value="3">@eTurns.DTO.ResItemMaster.LotNumberTracking</option>
                <option value="4">@eTurns.DTO.ResItemMaster.DateCodeTracking</option>

            </select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24" />
                </a>
                <div class='dropcontent' id="ItemTrackingTypeCollapse">
                </div>
            </div>
        </li>
        <li attrsortorder="4">
            <p class="handle"><img /></p>
            <select id="ItemTypeIM" multiple="multiple" name="example-basic" size="5">
                @* <option value="1">Item</option>
                    <option value="3">Kit</option>
                    <option value="4">Labor</option>*@
            </select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="ItemTypeCollapseIM">
                </div>
            </div>
        </li>
        <li attrsortorder="5">
            <p class="handle"><img /></p>
            <select id="PullSupplierIM" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="PullSupplierCollapseIM">
                </div>
            </div>
        </li>
        <li attrsortorder="6">
            <p class="handle"><img /></p>
            <select id="PullCategoryIM" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="PullCategoryCollapseIM">
                </div>
            </div>
        </li>
        <li attrsortorder="7">
            <p class="handle"><img /></p>
            <div class="stockroom">
                <div class="editor-field">
                    <select id="StockStatus" class="selectBox" onchange="SSNarroSearch(this);">
                        <option value="0"></option>
                        <option value="1">Out of Stock</option>
                        <option value="2">Below Critical</option>
                        <option value="3">Below Min</option>
                        <option value="4">Above Max</option>
                    </select>
                    <div class="accordion" id="accordion">
                        <a href='#' class='downarrow'>
                            <img src="~/Content/images/down-arrow.gif" alt="" height="24" />
                        </a>
                        <div class='dropcontent' id="StockStatusCollapse">
                        </div>
                    </div>
                </div>
            </div>
        </li>
        <li attrsortorder="8">
            <p class="handle"><img /></p>
            <div class="stockroom">
                <div class="editor-field">
                    @eTurns.DTO.ResItemMaster.IsActive:
                    <select id="IsActive" class="selectBox" onchange="SActive(this);">
                        <option value=""></option>
                        <option value="1"> Yes</option>
                        <option value="0">No</option>
                    </select>
                </div>
            </div>
        </li>
        <li attrsortorder="9">
            <p class="handle"><img /></p>
            <div class="stockroom">
                <div class="editor-field">
                    @eTurns.DTO.Resources.ResNarrowSearch.Cost:
                    <select id="PullCost" class="selectBox" onchange="CostNarroSearchIM(this);">
                        <option value="0_-1"></option>
                        <option value="100_1000">>$100 </option>
                        <option value="50_99.99">>$50 to 99.99 </option>
                        <option value="25_49.99">>$25 to 49.99 </option>
                        <option value="10_24.99">>$10 to 24.99 </option>
                        <option value="10_1000"><$10</option>
                    </select>
                </div>
            </div>
        </li>
        <li attrsortorder="10">
            <p class="handle"><img /></p>
            <div class="editor-field">
                @eTurns.DTO.Resources.ResNarrowSearch.AverageUsage:
                <select id="AverageUsage" class="selectBox" onchange="AverageCostNarroSearchIM(this);">
                    <option value="0_-1"></option>
                    <option value="100_-1">> 100</option>
                    <option value="75_99.9">75 - 99.9</option>
                    <option value="50_74.9">50 - 74.9</option>
                    <option value="30_49.9">30 - 49.9</option>
                    <option value="20_29.9">20 - 29.9</option>
                    <option value="10_19.9">10 - 19.9</option>
                    <option value="7.5_9.9">7.5 - 9.9</option>
                    <option value="5_7.4">5 - 7.4</option>
                    <option value="2_4.9">2 - 4.9</option>
                    <option value="1_1.9">1 - 1.9</option>
                    <option value="0.5_0.9">0.5 - 0.9</option>
                    <option value="0.4_-1">< 0.4</option>
                </select>
            </div>
        </li>
        <li attrsortorder="11">
            <p class="handle"><img /></p>
            <div class="editor-field">
                @eTurns.DTO.Resources.ResNarrowSearch.Turns:
                <select id="Turns" class="selectBox" onchange="TurnsNarroSearchIM(this);">
                    <option value="0_-1"></option>
                    <option value="20_-1">> 20</option>
                    <option value="15_19.9">15 - 19.9</option>
                    <option value="12_14.9">12 - 14.9</option>
                    <option value="9_11.9">9 - 11.9</option>
                    <option value="6_8.9">6 - 8.9</option>
                    <option value="4_5.9">4 - 5.9</option>
                    <option value="2_3.9">2 - 3.9</option>
                    <option value="1_1.9">1 - 1.9</option>
                    <option value="1_-1">< 1</option>
                </select>
            </div>
        </li>
        <li attrsortorder="12">
            <p class="handle"><img /></p>
            <select id="InventoryClassificationDDL" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="InventoryClassification">
                </div>
            </div>
        </li>
        <li attrsortorder="101">
            <p class="handle"><img /></p>
            <select id="UserCreatedIM" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="UserCreatedCollapseIM">
                </div>
            </div>
        </li>
        <li attrsortorder="102">
            <p class="handle"><img /></p>
            <select id="UserUpdatedIM" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="UserUpdatedCollapseIM">
                </div>
            </div>
        </li>
        <li style="float: left;" attrsortorder="103">
            <p class="handle"><img /></p>
            <div class="dateForm">
                <span class="dateText">@eTurns.DTO.Resources.ResNarrowSearch.DateCreated</span>
                <div style="float: right; margin-top: -24px; cursor: pointer;">
                    <img id="DateCreatedClearIM" src="~/Content/images/XClear.png" alt="@ResNarrowSearch.Clear" />
                </div>
                <div class="divLabel" style="padding-bottom: 4px;">
                    <label for="From" class="labelText">
                        @eTurns.DTO.Resources.ResNarrowSearch.From
                    </label>
                    <input id="DateCFromIM" type="text" value="" name="From" data-val-length-max="20" data-val="true"
                           class="text-box" />
                    <a href="javascript:;" title="" class="datePicker" id="ancDateCFromIM">
                        <img src="~/Content/images/date-picker-icon.png" alt="" title="" />
                    </a>
                </div>
                <div class="divLabel">
                    <label for="To" class="labelText">
                        @eTurns.DTO.Resources.ResNarrowSearch.To
                    </label>
                    <input id="DateCToIM" type="text" value="" name="To" data-val-length-max="20" data-val="true"
                           class="text-box" />
                    <a href="javascript:;" title="" class="datePicker" id="ancDateCToIM">
                        <img src="~/Content/images/date-picker-icon.png" alt="" title="" />
                    </a>
                </div>
            </div>
        </li>
        <li style="float: left;" attrsortorder="104">
            <p class="handle"><img /></p>
            <div class="dateForm">
                <span class="dateText">@eTurns.DTO.Resources.ResNarrowSearch.DateUpdated</span>
                <div style="float: right; margin-top: -24px; cursor: pointer;">
                    <img id="DateUpdatedClearIM" src="~/Content/images/XClear.png" alt="@ResNarrowSearch.Clear" />
                </div>
                <div class="divLabel" style="padding-bottom: 4px;">
                    <label for="From" class="labelText">
                        @eTurns.DTO.Resources.ResNarrowSearch.From
                    </label>
                    <input id="DateUFromIM" type="text" value="" name="From" data-val-length-max="20" data-val="true"
                           class="text-box" />
                    <a href="javascript:;" title="" class="datePicker" id="ancDateUFromIM">
                        <img src="~/Content/images/date-picker-icon.png" alt="" title="" />
                    </a>
                </div>
                <div class="divLabel">
                    <label for="To" class="labelText">
                        @eTurns.DTO.Resources.ResNarrowSearch.To
                    </label>
                    <input id="DateUToIM" type="text" value="" name="To" data-val-length-max="20" data-val="true"
                           class="text-box" />
                    <a href="javascript:;" title="" class="datePicker" id="ancDateUToIM">
                        <img src="~/Content/images/date-picker-icon.png" alt="" title="" />
                    </a>
                </div>
            </div>
        </li>
        @Html.RenderUDFForNarrowSearchForItemModel("ItemCountList", "_Item","")
    </ul>
    <input id="NarroSearchClearIC" type="button" value="@ResNarrowSearch.Clear" class="CreateBtn" />
    @*<input id="NarroSearchGo" type="button" value="Search" class="CreateBtn" />*@
</div>
<style>
    .IteamBlock li {
        width: 93% !important;
    }

    .handle {
        height: 20px;
        width: 5%;
        vertical-align: middle;
        /*background-image: url("../../Content/images/Drage.png");*/
        cursor: move;
        float: right;
    }

        .handle img {
            height: 20px;
            width: 6%;
            display: block;
            position: absolute;
            background-repeat: no-repeat;
            margin: 0;
            padding: 0;
        }
</style>
<script type="text/javascript">

    var UserUDF1NarrowValues;
    var UserUDF2NarrowValues;
    var UserUDF3NarrowValues;
    var UserUDF4NarrowValues;
    var UserUDF5NarrowValues;

    var UserUDF6NarrowValues;
    var UserUDF7NarrowValues;
    var UserUDF8NarrowValues;
    var UserUDF9NarrowValues;
    var UserUDF10NarrowValues;

    var PullSupplierNarroValues;
    var ManufacturerNarroValues;
    var ItemLocationNarroValues;
    var ItemTrackingTypeNarroValues;
    var StockStatusTypeNarroValues;
    var PullCategoryNarroValues;

    var CostNarroSearchValue = '';
    var AverageCostNarroSearchValue = '';
    var TurnsNarroSearchValue = '';
    var UserTypeNarroValues = "";

    var SSNarroSearchValue = '';
    var ItemActive = ''
    var ItemTypeNarroSearchValue = '';
    var InventoryClassificationNarroSearchValue = '';


    //NARROW BY SEARCH
    var UserCreatedBy = '@eTurns.DTO.Resources.ResNarrowSearch.UserCreatedby';
    var UserUpdatedby = '@eTurns.DTO.Resources.ResNarrowSearch.UserUpdatedby';
    var UpdatedBy = '@eTurns.DTO.Resources.ResNarrowSearch.Updatedby';
    var CreatedBy = '@eTurns.DTO.Resources.ResNarrowSearch.Createdby';
    var selected = '@eTurns.DTO.Resources.ResNarrowSearch.selected';


    var Manufacturer = '@eTurns.DTO.Resources.ResNarrowSearch.Manufacturer';
    var Supplier = '@eTurns.DTO.Resources.ResNarrowSearch.Supplier';
    var Category = '@eTurns.DTO.Resources.ResNarrowSearch.Category';
    var ItemType = '@eTurns.DTO.Resources.ResNarrowSearch.ItemType';
    var ItemTrackingType = '@eTurns.DTO.Resources.ResNarrowSearch.ItemTrackingType';
    var StockStatus = '@eTurns.DTO.Resources.ResNarrowSearch.StockStatus'
    var InventoryClassificationNarrowSearch = '@eTurns.DTO.Resources.ResNarrowSearch.InventoryClassification';

    var StageHeaderLocation = '@eTurns.DTO.ResMaterialStagingDetail.MaterialStagingDetailHeader';
    var StageLocation = '@eTurns.DTO.ResMaterialStagingDetail.StagingBinName';
    var LabelLocation = '@eTurns.DTO.Resources.ResCommon.Location';
    //GetNarroHTML('UserMaster', 'UserName', 1, 1);
    var ICLNarroValues = "";
    var vIsSLCount = false;


    //$(document).ready(function () {
    //    CallNarrowfunctionsIM();
    //});

    function CallNarrowfunctionsIM() {
        var _IsArchived = false;
        var _IsDeleted = false;

        if (typeof ($('#IsArchivedRecords')) != undefined)
            _IsArchived = $('#IsArchivedRecords').is(':checked');

        if (typeof ($('#IsDeletedRecords')) != undefined)
            _IsDeleted = $('#IsDeletedRecords').is(':checked');

        GetNarrowDDDataIM('@Model.PageName', '@eTurnsWeb.Helper.SessionHelper.CompanyID', '@eTurnsWeb.Helper.SessionHelper.RoomID', _IsArchived, _IsDeleted, '@Model.ControlID');
        GetNarroHTMLForUDFIM('@Model.PageName', '@eTurnsWeb.Helper.SessionHelper.CompanyID', '@eTurnsWeb.Helper.SessionHelper.RoomID', _IsArchived, _IsDeleted);

        if (_IsDeleted || _IsArchived) {
            $('#deleteRows').attr("style", "display:none");
            AllowDeletePopup = false;
        }
        else {
            $('#deleteRows').attr("style", "display:''");
            AllowDeletePopup = true;
        }

        if ('@Model.PageName' == 'inventory count') {
            RefreshItemType();
            RefreshInventoryClassification();
        }
        if (_IsDeleted || _IsArchived) {
            $('#deleteRows').attr("style", "display:none");
            $('#undeleteRows').attr("style", "display:''");
            AllowDeletePopup = false;
        }
        else {
            $('#deleteRows').attr("style", "display:''");
            $('#undeleteRows').attr("style", "display:none");
            AllowDeletePopup = true;
        }
        //$(".tab5").hide();

    }

    $('#NarroSearchGo').click(function () {
        DoNarrowSearchForItemCount();
    });

    $('#DateCFromIM,#DateCToIM').change(function () {

        var DateCFromValidIM = true;//Date.isValid($('#DateCFromIM').val(),format);
        var DateCToValidIM = true;//Date.isValid($('#DateCToIM').val(),format);
        try {
            $.datepicker.parseDate(RoomDateJSFormat, $('#DateCFromIM').val());
            DateCFromValidIM = true;
        } catch (e) {
            DateCFromValidIM = false;
        }

        try {
            $.datepicker.parseDate(RoomDateJSFormat, $('#DateCToIM').val());
            DateCToValidIM = true;
        } catch (e) {
            DateCToValidIM = false;
        }
        if (DateCFromValidIM && DateCToValidIM) {
            // $("#ItemModel_filter").val('');
            DoNarrowSearchForItemCount();
        }
        else {
            if (!DateCFromValidIM)
                $('#DateCFromIM').val('');
            if (!DateCToValidIM)
                $('#DateCToIM').val('');
        }
    });

    $('#DateUFromIM,#DateUToIM').change(function () {

        var DateUFromValidIM = true;//Date.isValid($('#DateUFromIM').val(),format);
        var DateUToValidIM = true;//Date.isValid($('#DateUToIM').val(),format);
        try {
            $.datepicker.parseDate(RoomDateJSFormat, $('#DateUFromIM').val());
            DateUFromValidIM = true;
        } catch (e) {
            DateUFromValidIM = false;
        }

        try {
            $.datepicker.parseDate(RoomDateJSFormat, $('#DateUToIM').val());
            DateUToValidIM = true;
        } catch (e) {
            DateUToValidIM = false;
        }
        if (DateUFromValidIM && DateUToValidIM) {
            //  $("#ItemModel_filter").val('');
            DoNarrowSearchForItemCount();
        }
        else {
            if (!DateUFromValidIM)
                $('#DateUFromIM').val('');
            if (!DateUToValidIM)
                $('#DateUToIM').val('');
        }
    });

    //CLEAR NARROW SEARCH
    $('#NarroSearchClearIC').click(function () {
        $("#btnAddAll").show();
        if ($('#DateCFromIM').val() != '') $('#DateCFromIM').val('');
        if ($('#DateCToIM').val() != '') $('#DateCToIM').val('');
        if ($('#DateUFromIM').val() != '') $('#DateUFromIM').val('');
        if ($('#DateUToIM').val() != '') $('#DateUToIM').val('');

        if (typeof ($("#UserCreatedIM").multiselect("getChecked").length) != undefined && $("#UserCreatedIM").multiselect("getChecked").length > 0) {
            $('#UserCreatedIM').multiselect('refresh')
            $("#UserCreatedIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#UserCreatedCollapseIM").html('');
            $("#UserCreatedCollapseIM").hide();
            $("#UserCreatedIM").multiselect({ selectedText: "" });
        }

        if (typeof ($("#UserUpdatedIM").multiselect("getChecked").length) != undefined && $("#UserUpdatedIM").multiselect("getChecked").length > 0) {
            $('#UserUpdatedIM').multiselect('refresh')
            $("#UserUpdatedIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#UserUpdatedCollapseIM").html('');
            $("#UserUpdatedCollapseIM").hide();
            $("#UserUpdatedIM").multiselect({ selectedText: "" });
        }

        $("select[name='udflist_Item']").each(function (index) {
            if (typeof ($(this).multiselect("getChecked").length) != undefined && $(this).multiselect("getChecked").length > 0) {
                var UDFUniqueID = this.getAttribute('UID');
                $(this).multiselect('refresh')
                $(this).multiselect("widget").find(":checkbox").removeAttr("checked");
                $('#' + UDFUniqueID + 'Collapse_Item').html('');
                $('#' + UDFUniqueID + 'Collapse_Item').hide();
                $(this).multiselect({ selectedText: "" });
            }
        });

        if (typeof ($("#PullSupplierIM").multiselect("getChecked").length) != undefined && $("#PullSupplierIM").multiselect("getChecked").length > 0) {
            $('#PullSupplierIM').multiselect('refresh')
            $("#PullSupplierIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#PullSupplierCollapseIM").html('');
            $("#PullSupplierCollapseIM").hide();
            $("#PullSupplierIM").multiselect({ selectedText: "" });
        }

        if (typeof ($("#StageLocationHeaderIM").multiselect("getChecked").length) != undefined && $("#StageLocationHeaderIM").multiselect("getChecked").length > 0) {
            $('#StageLocationHeaderIM').multiselect('refresh')
            $("#StageLocationHeaderIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#StageLocationHeaderCollapseIM").html('');
            $("#StageLocationHeaderCollapseIM").hide();
            $("#StageLocationHeaderIM").multiselect({ selectedText: "" });
            IsStagingLocationOnly = false;
        }

        if (typeof ($("#StageLocationIM").multiselect("getChecked").length) != undefined && $("#StageLocationIM").multiselect("getChecked").length > 0) {
            $('#StageLocationIM').multiselect('refresh')
            $("#StageLocationIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#StageLocationCollapseIM").html('');
            $("#StageLocationCollapseIM").hide();
            $("#StageLocationIM").multiselect({ selectedText: "" });
            IsStagingLocationOnly = false;
        }

        if (typeof ($("#ManufacturerIM").multiselect("getChecked").length) != undefined && $("#ManufacturerIM").multiselect("getChecked").length > 0) {
            $('#ManufacturerIM').multiselect('refresh')
            $("#ManufacturerIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#ManufacturerCollapseIM").html('');
            $("#ManufacturerCollapseIM").hide();
            $("#ManufacturerIM").multiselect({ selectedText: "" });
        }

        if (typeof ($("#PullCategoryIM").multiselect("getChecked").length) != undefined && $("#PullCategoryIM").multiselect("getChecked").length > 0) {
            $('#PullCategoryIM').multiselect('refresh')
            $("#PullCategoryIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#PullCategoryCollapseIM").html('');
            $("#PullCategoryCollapseIM").hide();
            $("#PullCategoryIM").multiselect({ selectedText: "" });
        }
        if (typeof ($("#ItemLocationsIC").multiselect("getChecked").length) != undefined && $("#ItemLocationsIC").multiselect("getChecked").length > 0) {
            $('#ItemLocationsIC').multiselect('refresh')
            $("#ItemLocationsIC").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#ItemLocationsICCollapseIM").html('');
            $("#ItemLocationsICCollapseIM").hide();
            $("#ItemLocationsIC").multiselect({ selectedText: "" });
        }

        if (typeof ($("#ItemTrackingType").multiselect("getChecked").length) != undefined && $("#ItemTrackingType").multiselect("getChecked").length > 0) {
            $('#ItemTrackingType').multiselect('refresh')
            $("#ItemTrackingType").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#ItemTrackingTypeCollapse").html('');
            $("#ItemTrackingTypeCollapse").hide();
            $("#ItemTrackingType").multiselect({ selectedText: "" });
        }

        if ($('#PullCost') != undefined) {
            $('#PullCost').val('0_-1');
        }
        if ($('#IsActive') != undefined) {
            $('#IsActive').val('-1');
        }

        if ($('#AverageUsage') != undefined) {
            $('#AverageUsage').val('0');
        }

        if ($('#Turns') != undefined) {
            $('#Turns').val('0');
        }

        if (typeof ($("#StockStatus").multiselect("getChecked").length) != undefined && $("#StockStatus").multiselect("getChecked").length > 0) {
            $('#StockStatus').multiselect('refresh')
            $("#StockStatus").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#StockStatusCollapse").html('');
            $("#StockStatusCollapse").hide();
            $("#StockStatus").multiselect({ selectedText: "" });
        }

        if (typeof ($("#ItemTypeIM").multiselect("getChecked").length) != undefined && $("#ItemTypeIM").multiselect("getChecked").length > 0) {
            $('#ItemTypeIM').multiselect('refresh')
            $("#ItemTypeIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#ItemTypeCollapseIM").html('');
            $("#ItemTypeCollapseIM").hide();
            $("#ItemTypeIM").multiselect({ selectedText: "" });
        }

        //InventoryClassification
        if (typeof ($("#InventoryClassificationDDL").multiselect("getChecked").length) != undefined && $("#InventoryClassificationDDL").multiselect("getChecked").length > 0) {
            $('#InventoryClassificationDDL').multiselect('refresh')
            $("#InventoryClassificationDDL").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#InventoryClassification").html('');
            $("#InventoryClassification").hide();
            $("#InventoryClassificationDDL").multiselect({ selectedText: "" });
        }

        ItemLocationNarroValues = '';
        ManufacturerNarroValues = '';
        ItemTrackingTypeNarroValues = '';
        ItemTypeNarroSearchValue = '';
        PullSupplierNarroValues = '';
        PullCategoryNarroValues = '';
        StockStatusTypeNarroValues = '';
        ItemActive = '';
        CostNarroSearchValue = '';
        AverageCostNarroSearchValue = '';
        TurnsNarroSearchValue = '';
        InventoryClassificationNarroSearchValue = '';
        UserCreatedNarroValues = '';
        UserUpdatedNarroValues = '';

        UserUDF1NarrowValues = '';
        UserUDF2NarrowValues = '';
        UserUDF3NarrowValues = '';
        UserUDF4NarrowValues = '';
        UserUDF5NarrowValues = '';
        UserUDF6NarrowValues = '';
        UserUDF7NarrowValues = '';
        UserUDF8NarrowValues = '';
        UserUDF9NarrowValues = '';
        UserUDF10NarrowValues = '';


        ////////////////////////////////////////////

        $('input[type="search"]').val('').trigger('keyup');

        if ($('#ItemModel_filter').val() != '') $('#ItemModel_filter').val('');
        //
        if ($('#Cart_ItemModel_filter').val() != '') $('#Cart_ItemModel_filter').val('');

        var searchText = '';
        if ($('input#ItemModel_filter').length > 0) {
            searchText = $('input#ItemModel_filter').val();
        }
        //NarrowSearchInGridIM(searchText);
        $('#ItemModeDataTable').dataTable().fnFilter(searchText, null, null, null)
    });

    //CREATE DATE PICKER

    $('#DateCFromIM').blur(function () {
    }).datepicker({
        changeMonth: true,
        changeYear: true, dateFormat: RoomDateJSFormat
    });
    $('#DateCToIM').blur(function () {
    }).datepicker({
        changeMonth: true,
        changeYear: true, dateFormat: RoomDateJSFormat
    });
    $('#DateUFromIM').blur(function () {
    }).datepicker({
        changeMonth: true,
        changeYear: true, dateFormat: RoomDateJSFormat
    });
    $('#DateUToIM').blur(function () {
    }).datepicker({
        changeMonth: true,
        changeYear: true, dateFormat: RoomDateJSFormat
    });


    $('#ancDateCFromIM').click(function () {
        $('#DateCFromIM').focus();
    });
    $('#ancDateCToIM').click(function () {
        $('#DateCToIM').focus();
    });
    $('#ancDateUFromIM').click(function () {
        $('#DateUFromIM').focus();
    });
    $('#ancDateUToIM').click(function () {
        $('#DateUToIM').focus();
    });


    $('#DateCreatedClearIM').click(function () {
        if ($('#DateCFromIM').val() != '' || $('#DateCToIM').val() != '') {
            $('#DateCFromIM').val('');
            $('#DateCToIM').val('');
            //NarrowSearchInGrid('');
            DoNarrowSearchForItemCount();
        }
    });
    $('#DateUpdatedClearIM').click(function () {
        if ($('#DateUFromIM').val() != '' || $('#DateUToIM').val() != '') {
            $('#DateUFromIM').val('');
            $('#DateUToIM').val('');
            //NarrowSearchInGrid('');
            DoNarrowSearchForItemCount();
        }
    });



    function SSNarroSearch(SSDDLObject) {

        //oTable.fnFilter($(CostDDLObject).val(),null,null,null);
        if ($(SSDDLObject).val() != "0") {
            SSNarroSearchValue = $(SSDDLObject).val();
            DoNarrowSearchForItemCount();
        }
        else {
            SSNarroSearchValue = '';
            DoNarrowSearchForItemCount();
        }
    }
    function SSNarroSearchAvgUsage(SSDDLObject) {

        //oTable.fnFilter($(CostDDLObject).val(),null,null,null);
        if ($(SSDDLObject).val() != "0_-1") {
            AvgUsageNarroSearchValue = $(SSDDLObject).val();
            DoNarrowSearchForItemCount();
        }
        else {
            AvgUsageNarroSearchValue = '';
            DoNarrowSearchForItemCount();
        }
    }
    function SSNarroSearchTurns(SSDDLObject) {

        //oTable.fnFilter($(CostDDLObject).val(),null,null,null);
        if ($(SSDDLObject).val() != "0_-1") {
            TurnsNarroSearchValue = $(SSDDLObject).val();
            DoNarrowSearchForItemCount();
        }
        else {
            TurnsNarroSearchValue = '';
            DoNarrowSearchForItemCount();
        }
    }

    function CostNarroSearchIM(CostDDLObject) {
        //oTable.fnFilter($(CostDDLObject).val(),null,null,null);
        if ($(CostDDLObject).val() != "0_-1") {
            CostNarroSearchValue = $(CostDDLObject).val();
            DoNarrowSearchForItemCount();
        }
        else {
            CostNarroSearchValue = '';
            DoNarrowSearchForItemCount();
        }
    }

    function AverageCostNarroSearchIM(AverageCostDDLObject) {
        //oTable.fnFilter($(CostDDLObject).val(),null,null,null);
        if ($(AverageCostDDLObject).val() != "0_-1") {
            AverageCostNarroSearchValue = $(AverageCostDDLObject).val();
            DoNarrowSearchForItemCount();
        }
        else {
            AverageCostNarroSearchValue = '';
            DoNarrowSearchForItemCount();
        }
    }

    function TurnsNarroSearchIM(TurnsDDLObject) {
        //oTable.fnFilter($(CostDDLObject).val(),null,null,null);
        if ($(TurnsDDLObject).val() != "0_-1") {
            TurnsNarroSearchValue = $(TurnsDDLObject).val();
            DoNarrowSearchForItemCount();
        }
        else {
            TurnsNarroSearchValue = '';
            DoNarrowSearchForItemCount();
        }
    }

    function SActive(SSDDLObject) {

        //oTable.fnFilter($(CostDDLObject).val(),null,null,null);
        if ($(SSDDLObject).val() != "") {
            ItemActive = $(SSDDLObject).val();
            DoNarrowSearchForItemCount();
        }
        else {
            ItemActive = '';
            DoNarrowSearchForItemCount();
        }
    }





    function GetNarrowHTMLForUserType() {
        var ItemCallFrom = '';
        ItemCallFrom = '@Model.ControlID';

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            //data: { TableName: '@Model.PageName', TextFieldName: 'UserType', IsArchived: false, IsDeleted: false },
            data: { TableName: _TableName, TextFieldName: 'UserType', IsArchived: _IsArchived, IsDeleted: _IsDeleted, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID' },

            success: function (response) {
                var s = '';
                $.each(response.DDData, function (ValData, ValCount) {
                    var ArrData = ValData.toString().split('[###]');
                    s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                });

                //Destroy widgets before reapplying the filter
                $("#UserType").empty();
                $("#UserType").multiselect('destroy');
                $("#UserType").multiselectfilter('destroy');

                $("#UserType").append(s);
                $("#UserType").multiselect
                (
                    {
                        noneSelectedText: 'User type', selectedList: 5,
                        selectedText: function (numChecked, numTotal, checkedItems) {
                            return 'User type ' + numChecked + ' ' + selected;
                        }
                    },
                    {
                        checkAll: function (ui) {
                            $("#UserTypeCollapse").html('');
                            for (var i = 0; i <= ui.target.length - 1; i++) {
                                if ($("#UserTypeCollapse").text().indexOf(ui.target[i].text) == -1) {
                                    $("#UserTypeCollapse").append("<span>" + ui.target[i].text + "</span>");
                                }
                            }
                            $("#UserTypeCollapse").show();
                        }
                    }
                ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                    if (ui.checked) {
                        if ($("#UserTypeCollapse").text().indexOf(ui.text) == -1) {
                            $("#UserTypeCollapse").append("<span>" + ui.text + "</span>");
                        }
                        UserTypeNarroValues = ui.value;
                    }
                    else {
                        if (ui.checked == undefined) {
                            $("#UserTypeCollapse").html('');
                        }
                        else if (!ui.checked) {
                            var text = $("#UserTypeCollapse").html();
                            text = text.replace("<span>" + ui.text + "</span>", '');
                            $("#UserTypeCollapse").html(text);
                        }
                        else
                            $("#UserTypeCollapse").html('');

                        UserTypeNarroValues = '';
                    }
                    UserTypeNarroValues = $.map($(this).multiselect("getChecked"), function (input) {

                        return input.value;
                    })

                    if ($("#UserTypeCollapse").text().trim() != '')
                        $("#UserTypeCollapse").show();
                    else
                        $("#UserTypeCollapse").hide();


                    if ($("#UserTypeCollapse").find('span').length <= 2) {
                        $("#UserTypeCollapse").scrollTop(0).height(50);
                    }
                    else {
                        $("#UserTypeCollapse").scrollTop(0).height(100);
                    }

                    DoNarrowSearchForItemCount();
                }).multiselectfilter();
            },
            error: function (response) {
                // through errror message
            }
        });
    }


    /* Narrow Search For Item Type Filter START */
    function GetNarroHTMLForItemTypeIM() {

        var ModelTextTemp = '@Model.Text';
        if (ModelTextTemp == null)
            ModelTextTemp = "eTurns";

        var qlType = '1';
        if (gblActionName.toLowerCase() == "inventorycountlist") {
            qlType = '3';
        }

        var ItemCallFrom = '';
        ItemCallFrom = '@Model.ControlID';

        $.ajax({
            'url': '/Master/GetNarrowDDDataIMItemType',
            data: { TableName: '@Model.PageName', TextFieldName: 'ItemType', IsArchived: false, IsDeleted: false, QLType: qlType, ParentID: '@Model.ID', ItemModelCallFrom: ItemCallFrom, IsSLCount: vIsSLCount },
            success: function (response) {
                var s = '';
                if (gblActionName.toLowerCase() == "inventorycountlist") {
                    $.each(response.DDData, function (ValData, ValCount) {
                        var ArrData = ValData.toString().split('[###]');
                        s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                    });
                }
                else {
                    if (response.DDData != null) {
                        $.each(response.DDData, function (i, val) {
                            if (i == "1")
                                s += '<option value="' + i + '"> Item (' + val + ')' + '</option>';

                            //if (i == "2" && gblActionName.toLowerCase() != "cartitemlist")
                            //if (i == "2" && '@Model.ControlID' !== 'MOVEMTR' && '@Model.ControlID' == 'transferlist')
                            //if (i == "2" && '@Model.ControlID' !== 'MOVEMTR' && '@Model.ControlID' != 'TRF' && val > 0)
                            if (i == "2" && '@Model.ControlID' !== 'MOVEMTR' && val > 0)
                                s += '<option value="' + i + '"> Quick List (' + val + ')' + '</option>';

                            if (i == "3") {
                                if (ModelTextTemp != "Kit")
                                    s += '<option value="' + i + '"> Kit (' + val + ')' + '</option>';
                            }
                            if (i == "4" && '@Model.ControlID' !== 'MOVEMTR' && gblActionName.toLowerCase() != "orderlist" && gblActionName.toLowerCase() != "cartitemlist")
                                s += '<option value="' + i + '"> Labor (' + val + ')' + '</option>';
                        });
                    }
                }

                $("#ItemTypeIM").empty();
                $("#ItemTypeIM").multiselect('destroy');
                $("#ItemTypeIM").multiselectfilter('destroy');

                $("#ItemTypeIM").append(s);
                $("#ItemTypeIM").multiselect
                (
                {
                    checkAllText: Check,
                    uncheckAllText: UnCheck,
                    noneSelectedText: ItemType, selectedList: 5,
                    selectedText: function (numChecked, numTotal, checkedItems) {
                        return ItemType + ' ' + numChecked + ' ' + selected;
                    }
                },
                {
                    checkAll: function (ui) {
                        $("#ItemTypeCollapseIM").html('');
                        for (var i = 0; i <= ui.target.length - 1; i++) {
                            if ($("#ItemTypeCollapseIM").text().indexOf(ui.target[i].text) == -1) {
                                $("#ItemTypeCollapseIM").append("<span>" + ui.target[i].text + "</span>");
                            }
                        }
                        $("#ItemTypeCollapseIM").show();
                    }
                }
                ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
            .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                if (ui.checked) {
                    if ($("#ItemTypeCollapseIM").text().indexOf(ui.text) == -1) {
                        $("#ItemTypeCollapseIM").append("<span>" + ui.text + "</span>");
                    }
                    ItemTypeNarroSearchValue = ui.value;
                }
                else {
                    if (ui.checked == undefined) {
                        $("#ItemTypeCollapseIM").html('');
                    }
                    else if (!ui.checked) {
                        var text = $("#ItemTypeCollapseIM").html();
                        text = text.replace("<span>" + ui.text + "</span>", '');
                        $("#ItemTypeCollapseIM").html(text);
                    }
                    else
                        $("#ItemTypeCollapseIM").html('');

                    ItemTypeNarroSearchValue = '';
                }
                ItemTypeNarroSearchValue = $.map($(this).multiselect("getChecked"), function (input) {
                    return input.value;
                })

                if ($("#ItemTypeCollapseIM").text().trim() != '')
                    $("#ItemTypeCollapseIM").show();
                else
                    $("#ItemTypeCollapseIM").hide();


                if ($("#ItemTypeCollapseIM").find('span').length <= 2) {
                    $("#ItemTypeCollapseIM").scrollTop(0).height(50);
                }
                else {
                    $("#ItemTypeCollapseIM").scrollTop(0).height(100);
                }
                // clearGlobalIfNotInFocus();
                DoNarrowSearchForItemCount();
            }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
            },
            error: function (response) {
                // through errror message
            }
        });




        $("#ItemTypeIM").multiselect


    }


    function GetItemLocationsForCount(ShowStagLocs, ShowLabourItems) {

        if (ShowLabourItems == null || ShowLabourItems == undefined)
            ShowLabourItems = true;

        var ItemCallFrom = '';
        ItemCallFrom = '@Model.ControlID';

        $.ajax({
            'url': '/Master/GetLocationsinItemMaster',
            data: { ShowStagLocs: ShowStagLocs, ShowLabourItems: ShowLabourItems, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID'},
            success: function (response) {

                var s = '';
                if (ItemCallFrom.toLowerCase() == "icnt") {
                    $.each(response.DDData, function (ValData, ValCount) {
                        var ArrData = ValData.toString().split('[###]');
                        s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                    });
                }
                else {
                    $.each(response, function (ValData, ValCount) {
                        var ArrData = ValData.toString().split('[###]');
                        s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                    });
                }


                //Destroy widgets before reapplying the filter
                $("#ItemLocationsIC").empty();
                $("#ItemLocationsIC").multiselect('destroy');
                $("#ItemLocationsIC").multiselectfilter('destroy');
                var narrowsearchtext = "Location";
                if (typeof LabelLocation != 'undefined') {
                    narrowsearchtext = LabelLocation;
                }
                $("#ItemLocationsIC").append(s);
                $("#ItemLocationsIC").multiselect
            (
                {
                    checkAllText: Check,
                    uncheckAllText: UnCheck,
                    noneSelectedText: narrowsearchtext, selectedList: 5,
                    selectedText: function (numChecked, numTotal, checkedItems) {
                        return narrowsearchtext+' ' + numChecked + ' ' + selected;
                    }
                },
                {
                    checkAll: function (ui) {
                        $("#ItemLocationsICCollapseIM").html('');
                        for (var i = 0; i <= ui.target.length - 1; i++) {
                            if ($("#ItemLocationsICCollapseIM").text().indexOf(ui.target[i].text) == -1) {
                                $("#ItemLocationsICCollapseIM").append("<span>" + ui.target[i].text + "</span>");
                            }
                        }
                        $("#ItemLocationsICCollapseIM").show();
                    }
                }
                ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
            .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {

                if (ui.checked) {
                    ItemLocationNarroValues = ui.value;

                    if ($("#ItemLocationsICCollapseIM").text().indexOf(ui.text) == -1) {
                        $("#ItemLocationsICCollapseIM").append("<span>" + ui.text + "</span>");
                    }
                }
                else {
                    if (ui.checked == undefined) {
                        $("#ItemLocationsICCollapseIM").html('');
                    }
                    else if (!ui.checked) {
                        var text = $("#ItemLocationsICCollapseIM").html();
                        text = text.replace("<span>" + ui.text + "</span>", '');
                        $("#ItemLocationsICCollapseIM").html(text);
                    }
                    else
                        $("#ItemLocationsICCollapseIM").html('');
                    ItemLocationNarroValues = '';
                }
                ItemLocationNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                    return input.value;
                })

                if ($("#ItemLocationsICCollapseIM").text().trim() != '')
                    $("#ItemLocationsICCollapseIM").show();
                else
                    $("#ItemLocationsICCollapseIM").hide();


                if ($("#ItemLocationsICCollapseIM").find('span').length <= 2) {
                    $("#ItemLocationsICCollapseIM").scrollTop(0).height(50);
                }
                else {
                    $("#PullSupplierCollapseIM").scrollTop(0).height(100);
                }
                //clearGlobalIMIfNotInFocus();
                DoNarrowSearchForItemCount();
            }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
            },
            error: function (response) {

                // through errror message
            }
        });
    }
    /* Narrow Search For Item Type Filter END */


    function GetNarrowDDDataIM_Common(_TableName, _IsArchived, _IsDeleted) {
        var ItemCallFrom = '';
        ItemCallFrom = '@Model.ControlID';

        //alert(vIsSLCount);


        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: _TableName, TextFieldName: 'SupplierName', IsArchived: _IsArchived, IsDeleted: _IsDeleted, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID', IsSLCount: vIsSLCount },
            success: function (response) {
                var s = '';
                $.each(response.DDData, function (ValData, ValCount) {
                    var ArrData = ValData.toString().split('[###]');
                    s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                });


                //Destroy widgets before reapplying the filter
                $("#PullSupplierIM").empty();
                $("#PullSupplierIM").multiselect('destroy');
                $("#PullSupplierIM").multiselectfilter('destroy');

                $("#PullSupplierIM").append(s);
                $("#PullSupplierIM").multiselect
            (
                {
                    checkAllText: Check,
                    uncheckAllText: UnCheck,
                    noneSelectedText: Supplier, selectedList: 5,
                    selectedText: function (numChecked, numTotal, checkedItems) {
                        return Supplier + ' ' + numChecked + ' ' + selected ;
                    }
                },
                {
                    checkAll: function (ui) {
                        $("#PullSupplierCollapseIM").html('');
                        for (var i = 0; i <= ui.target.length - 1; i++) {
                            if ($("#PullSupplierCollapseIM").text().indexOf(ui.target[i].text) == -1) {
                                $("#PullSupplierCollapseIM").append("<span>" + ui.target[i].text + "</span>");
                            }
                        }
                        $("#PullSupplierCollapseIM").show();
                    }
                }
            ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
            .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                if (ui.checked) {
                    PullSupplierNarroValues = ui.value;

                    if ($("#PullSupplierCollapseIM").text().indexOf(ui.text) == -1) {
                        $("#PullSupplierCollapseIM").append("<span>" + ui.text + "</span>");
                    }
                }
                else {
                    if (ui.checked == undefined) {
                        $("#PullSupplierCollapseIM").html('');
                    }
                    else if (!ui.checked) {
                        var text = $("#PullSupplierCollapseIM").html();
                        text = text.replace("<span>" + ui.text + "</span>", '');
                        $("#PullSupplierCollapseIM").html(text);
                    }
                    else
                        $("#PullSupplierCollapseIM").html('');
                    PullSupplierNarroValues = '';
                }
                PullSupplierNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                    return input.value;
                })

                if ($("#PullSupplierCollapseIM").text().trim() != '')
                    $("#PullSupplierCollapseIM").show();
                else
                    $("#PullSupplierCollapseIM").hide();


                if ($("#PullSupplierCollapseIM").find('span').length <= 2) {
                    $("#PullSupplierCollapseIM").scrollTop(0).height(50);
                }
                else {
                    $("#PullSupplierCollapseIM").scrollTop(0).height(100);
                }
                //  clearGlobalIMIfNotInFocus();
                DoNarrowSearchForItemCount();
            }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
            },
            error: function (response) {
                // through errror message
            }
        });

        //alert('6');

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: _TableName, TextFieldName: 'Manufacturer', IsArchived: _IsArchived, IsDeleted: _IsDeleted, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID', IsSLCount: vIsSLCount },
            success: function (response) {

                var s = '';
                $.each(response.DDData, function (ValData, ValCount) {
                    var ArrData = ValData.toString().split('[###]');
                    s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                });


                //Destroy widgets before reapplying the filter
                $("#ManufacturerIM").empty();
                $("#ManufacturerIM").multiselect('destroy');
                $("#ManufacturerIM").multiselectfilter('destroy');

                $("#ManufacturerIM").append(s);
                $("#ManufacturerIM").multiselect
            (
                {
                    checkAllText: Check,
                    uncheckAllText: UnCheck,
                    noneSelectedText: Manufacturer, selectedList: 5,
                    selectedText: function (numChecked, numTotal, checkedItems) {
                        return Manufacturer + ' ' + numChecked + ' ' + selected ;
                    }
                },
                {
                    checkAll: function (ui) {
                        $("#ManufacturerCollapseIM").html('');
                        for (var i = 0; i <= ui.target.length - 1; i++) {
                            if ($("#ManufacturerCollapseIM").text().indexOf(ui.target[i].text) == -1) {
                                $("#ManufacturerCollapseIM").append("<span>" + ui.target[i].text + "</span>");
                            }
                        }
                        $("#ManufacturerCollapseIM").show();
                    }
                }
                ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
            .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                if (ui.checked) {
                    ManufacturerNarroValues = ui.value;

                    if ($("#ManufacturerCollapseIM").text().indexOf(ui.text) == -1) {
                        $("#ManufacturerCollapseIM").append("<span>" + ui.text + "</span>");
                    }
                }
                else {
                    if (ui.checked == undefined) {
                        $("#ManufacturerCollapseIM").html('');
                    }
                    else if (!ui.checked) {
                        var text = $("#ManufacturerCollapseIM").html();
                        text = text.replace("<span>" + ui.text + "</span>", '');
                        $("#ManufacturerCollapseIM").html(text);
                    }
                    else
                        $("#ManufacturerCollapseIM").html('');

                    ManufacturerNarroValues = '';
                }
                ManufacturerNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                    return input.value;
                })

                if ($("#ManufacturerCollapseIM").text().trim() != '')
                    $("#ManufacturerCollapseIM").show();
                else
                    $("#ManufacturerCollapseIM").hide();


                if ($("#ManufacturerCollapseIM").find('span').length <= 2) {
                    $("#ManufacturerCollapseIM").scrollTop(0).height(50);
                }
                else {
                    $("#ManufacturerCollapseIM").scrollTop(0).height(100);
                }
                // clearGlobalIMIfNotInFocus();
                DoNarrowSearchForItemCount();
            }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
            },
            error: function (response) {
                // through errror message
            }
        });

        //alert('7');

        ///////// Item Tracking Type Bind Start ////////////////////

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            //data: { TableName: 'ItemMaster', TextFieldName: 'ItemTrackingType', IsArchived: false, IsDeleted: false },
            data: { TableName: _TableName, TextFieldName: 'ItemTrackingType', IsArchived: _IsArchived, IsDeleted: _IsDeleted, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID', IsSLCount: vIsSLCount },
            success: function (response) {
                var s = '';
                $("#ItemTrackingTypeCollapse").html('');
                if (ItemCallFrom.toLowerCase() == 'icnt') {
                    $.each(response.DDData, function (ValData, ValCount) {
                        var ArrData = ValData.toString().split('[###]');
                        s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                    });
                }
                else
                    {
                    if (response.DDData != null) {

                        $.each(response.DDData, function (ValData, val) {
                            var str = ValData.split('###');

                            if (str[1] == "1")
                                s += '<option value="' + str[1] + '"> No Tracking (' + val + ')' + '</option>';
                            if (str[1] == "2")
                                s += '<option value="' + str[1] + '"> ' + str[0] + ' (' + val + ')' + '</option>';
                            if (str[1] == "3")
                                s += '<option value="' + str[1] + '"> ' + str[0] + ' (' + val + ')' + '</option>';
                            if (str[1] == "4")
                                s += '<option value="' + str[1] + '"> ' + str[0] + ' (' + val + ')' + '</option>';
                        });
                    }
                }
                //Destroy widgets before reapplying the filter
                //Destroy widgets before reapplying the filter
                $("#ItemTrackingType").empty();
                $("#ItemTrackingType").multiselect('destroy');
                $("#ItemTrackingType").multiselectfilter('destroy');



                $("#ItemTrackingType").append(s);
                $("#ItemTrackingType").multiselect(
                    {
                    checkAllText: Check,
                    uncheckAllText: UnCheck,
                    noneSelectedText: ItemTrackingType, selectedList: 5,
                    selectedText: function (numChecked, numTotal, checkedItems) {
                        return ItemTrackingType + ' ' + numChecked +  ' ' + selected ;
                    }
                },
                {
                    checkAll: function (ui) {
                        $("#ItemTrackingTypeCollapse").html('');
                        for (var i = 0; i <= ui.target.length - 1; i++) {
                            if ($("#ItemTrackingTypeCollapse").text().indexOf(ui.target[i].text) == -1) {
                                $("#ItemTrackingTypeCollapse").append("<span>" + ui.target[i].text + "</span>");
                            }
                        }
                        $("#ItemTrackingTypeCollapse").show();
                    }
                }
                ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
              .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                  if (ui.checked) {
                      ItemTrackingTypeNarroValues = ui.value;

                      if ($("#ItemTrackingTypeCollapse").text().indexOf(ui.text) == -1) {
                          $("#ItemTrackingTypeCollapse").append("<span>" + ui.text + "</span>");
                      }
                  }
                  else {
                      if (ui.checked == undefined) {
                          $("#ItemTrackingTypeCollapse").html('');
                      }
                      else if (!ui.checked) {
                          var text = $("#ItemTrackingTypeCollapse").html();
                          text = text.replace("<span>" + ui.text + "</span>", '');
                          $("#ItemTrackingTypeCollapse").html(text);
                      }
                      else
                          $("#ItemTrackingTypeCollapse").html('');

                      ItemTrackingTypeNarroValues = '';
                  }
                  ItemTrackingTypeNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                      return input.value;
                  })

                  if ($("#ItemTrackingTypeCollapse").text().trim() != '')
                      $("#ItemTrackingTypeCollapse").show();
                  else
                      $("#ItemTrackingTypeCollapse").hide();


                  if ($("#ItemTrackingTypeCollapse").find('span').length <= 2) {
                      $("#ItemTrackingTypeCollapse").scrollTop(0).height(50);
                  }
                  else {
                      $("#ItemTrackingTypeCollapse").scrollTop(0).height(100);
                  }
                  //clearGlobalIMIfNotInFocus();
                  DoNarrowSearchForItemCount();
              }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
            },
            error: function (response) {
                // through errror message
            }
        });

        ///////// Item Tracking Type Bind end ////////////////////

        ///////// Stock Status Bind Start ////////////////////

        if ($("#StockStatus").length > 0) {
            $.ajax({
                'url': '/Master/GetNarrowDDData',
                // data: { TableName: 'ItemMaster', TextFieldName: 'StockStatus', IsArchived: _IsArchived, IsDeleted: _IsDeleted },
                data: { TableName: _TableName, TextFieldName: 'StockStatus', IsArchived: _IsArchived, IsDeleted: _IsDeleted, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID', IsSLCount: vIsSLCount },
                success: function (response) {
                    var s = '';
                    if (ItemCallFrom.toLowerCase() == 'icnt') {
                        $.each(response.DDData, function (ValData, ValCount) {
                            var ArrData = ValData.toString().split('[###]');
                            s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                        });
                    }
                    else {
                        $.each(response.DDData, function (ValData, val) {
                            var str = ValData.split('###');
                            //if (str[1] == "0")
                            //    s += '<option value="' + str[1] + '"> </option>';
                            if (str[1] == "1")
                                s += '<option value="' + str[1] + '"> ' + str[0] + '  (' + val + ')' + '</option>';
                            if (str[1] == "2")
                                s += '<option value="' + str[1] + '"> ' + str[0] + ' (' + val + ')' + '</option>';
                            if (str[1] == "3")
                                s += '<option value="' + str[1] + '"> ' + str[0] + ' (' + val + ')' + '</option>';
                            if (str[1] == "4")
                                s += '<option value="' + str[1] + '"> ' + str[0] + ' (' + val + ')' + '</option>';
                        });
                    }

                    //Destroy widgets before reapplying the filter
                    $("#StockStatus").empty();
                    $("#StockStatus").multiselect('destroy');
                    $("#StockStatus").multiselectfilter('destroy');

                    $("#StockStatus").append(s);
                    $("#StockStatus")[0].selectedIndex = -1;
                    $("#StockStatus").multiselect("refresh");
                    $("#StockStatus").multiselectfilter("refresh");
                    $("#StockStatus").multiselect
                    (
                        {
                            noneSelectedText: StockStatus, selectedList: 5,
                            selectedText: function (numChecked, numTotal, checkedItems) {

                                return StockStatus + ' ' + numChecked + ' ' +selected;
                            },
                            header: false
                        },
                        {
                            checkAll: function (ui) {
                                $("#StockStatusCollapse").html('');
                                for (var i = 0; i <= ui.target.length - 1; i++) {
                                    if ($("#StockStatusCollapse").text().indexOf(ui.target[i].text) == -1) {
                                        $("#StockStatusCollapse").append("<span>" + ui.target[i].text + "</span>");
                                    }
                                }
                                $("#StockStatusCollapse").show();
                            }
                        }
                    ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                    .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                        if (ui.checked) {
                            var uiLastest = ui;
                            $("#StockStatus").multiselect("uncheckAll");
                            $("#StockStatusCollapse").html('');

                            ui = uiLastest;
                            $("div.ui-multiselect-menu").each(function () {

                                if ($(this).css("display") == "block") {

                                    $(this).find("ul.ui-multiselect-checkboxes li").each(function () {
                                        if ($(this).find("input[type=checkbox]").val() == $.trim(ui.value)) {
                                            $(this).find("input[type=checkbox]").attr("checked", "checked");
                                        }
                                    });
                                }
                            });
                            StockStatusTypeNarroValues = ui.value;

                            if ($("#StockStatusCollapse").text().indexOf(ui.text) == -1) {
                                $("#StockStatusCollapse").append("<span>" + ui.text + "</span>");
                            }
                        }
                        else {
                            StockStatusTypeNarroValues = '';
                            if (ui.checked == undefined) {
                                $("#StockStatusCollapse").html('');
                            }
                            else if (!ui.checked) {
                                var text = $("#StockStatusCollapse").html();
                                text = text.replace("<span>" + ui.text + "</span>", '');
                                $("#StockStatusCollapse").html(text);
                            }
                            else
                                $("#StockStatusCollapse").html('');
                        }


                        if ($("#StockStatusCollapse").text().trim() != '')
                            $("#StockStatusCollapse").show();
                        else
                            $("#StockStatusCollapse").hide();


                        if ($("#StockStatusCollapse").find('span').length <= 2) {
                            $("#StockStatusCollapse").scrollTop(0).height(50);
                        }
                        else {
                            $("#StockStatusCollapse").scrollTop(0).height(100);
                        }

                        DoNarrowSearchForItemCount();
                    }).multiselectfilter();
                },
                error: function (response) {
                    // through errror message
                }
            });
        }

        ///////// Stock Status Type Bind end ////////////////////


        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: _TableName, TextFieldName: 'InventoryClassification', IsArchived: _IsArchived, IsDeleted: _IsDeleted, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID', IsSLCount: vIsSLCount },
            success: function (response) {

                var s = '';
                $("#InventoryClassificationDDL").html('');
                if (response.DDData != null) {
                    $.each(response.DDData, function (ValData, ValCount) {
                        var ArrData = ValData.toString().split('[###]');
                        s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                    });
                }


                //Destroy widgets before reapplying the filter
                $("#InventoryClassificationDDL").empty();
                $("#InventoryClassificationDDL").multiselect('destroy');
                $("#InventoryClassificationDDL").multiselectfilter('destroy');

                $("#InventoryClassificationDDL").append(s);
                $("#InventoryClassificationDDL").multiselect
            (
                {
                    checkAllText: Check,
                    uncheckAllText: UnCheck,
                    noneSelectedText: InventoryClassificationNarrowSearch, selectedList: 5,
                    selectedText: function (numChecked, numTotal, checkedItems) {
                        return InventoryClassificationNarrowSearch + numChecked + ' ' + selected;
                    }
                },
                {
                    checkAll: function (ui) {
                        $("#InventoryClassification").html('');
                        for (var i = 0; i <= ui.target.length - 1; i++) {
                            if ($("#InventoryClassification").text().indexOf(ui.target[i].text) == -1) {
                                $("#InventoryClassification").append("<span>" + ui.target[i].text + "</span>");
                            }
                        }
                        $("#InventoryClassification").show();
                    }
                }
                ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
            .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                if (ui.checked) {
                    InventoryClassificationNarroSearchValue = ui.value;

                    if ($("#InventoryClassification").text().indexOf(ui.text) == -1) {
                        $("#InventoryClassification").append("<span>" + ui.text + "</span>");
                    }
                }
                else {
                    if (ui.checked == undefined) {
                        $("#InventoryClassification").html('');
                    }
                    else if (!ui.checked) {
                        var text = $("#InventoryClassification").html();
                        text = text.replace("<span>" + ui.text + "</span>", '');
                        $("#InventoryClassification").html(text);
                    }
                    else
                        $("#InventoryClassification").html('');
                    InventoryClassificationNarroSearchValue = '';
                }
                InventoryClassificationNarroSearchValue = $.map($(this).multiselect("getChecked"), function (input) {
                    return input.value;
                })

                if ($("#InventoryClassification").text().trim() != '')
                    $("#InventoryClassification").show();
                else
                    $("#InventoryClassification").hide();


                if ($("#InventoryClassification").find('span').length <= 2) {
                    $("#InventoryClassification").scrollTop(0).height(50);
                }
                else {
                    $("#InventoryClassification").scrollTop(0).height(100);
                }
                //clearGlobalIMIfNotInFocus();
                DoNarrowSearchForItemCount();
            }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
            },
            error: function (response) {

                // through errror message
            }
        });

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: _TableName, TextFieldName: 'Category', IsArchived: _IsArchived, IsDeleted: _IsDeleted, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID', IsSLCount: vIsSLCount },
            success: function (response) {
                var s = '';
                $.each(response.DDData, function (ValData, ValCount) {
                    var ArrData = ValData.toString().split('[###]');
                    s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                });


                //Destroy widgets before reapplying the filter
                $("#PullCategoryIM").empty();
                $("#PullCategoryIM").multiselect('destroy');
                $("#PullCategoryIM").multiselectfilter('destroy');

                $("#PullCategoryIM").append(s);
                $("#PullCategoryIM").multiselect
            (
                {
                    checkAllText: Check,
                    uncheckAllText: UnCheck,
                    noneSelectedText: Category, selectedList: 5,
                    selectedText: function (numChecked, numTotal, checkedItems) {
                        return Category + ' ' + numChecked +  ' ' + selected ;
                    }
                },
                {
                    checkAll: function (ui) {
                        $("#PullCategoryCollapseIM").html('');
                        for (var i = 0; i <= ui.target.length - 1; i++) {
                            if ($("#PullCategoryCollapseIM").text().indexOf(ui.target[i].text) == -1) {
                                $("#PullCategoryCollapseIM").append("<span>" + ui.target[i].text + "</span>");
                            }
                        }
                        $("#PullCategoryCollapseIM").show();
                    }
                }
                ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
            .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                if (ui.checked) {
                    PullCategoryNarroValues = ui.value;

                    if ($("#PullCategoryCollapseIM").text().indexOf(ui.text) == -1) {
                        $("#PullCategoryCollapseIM").append("<span>" + ui.text + "</span>");
                    }
                }
                else {

                    PullCategoryNarroValues = '';

                    if (ui.checked == undefined) {
                        $("#PullCategoryCollapseIM").html('');
                    }
                    else if (!ui.checked) {
                        var text = $("#PullCategoryCollapseIM").html();
                        text = text.replace("<span>" + ui.text + "</span>", '');
                        $("#PullCategoryCollapseIM").html(text);
                    }
                    else
                        $("#PullCategoryCollapseIM").html('');
                }
                PullCategoryNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                    return input.value;
                })

                if ($("#PullCategoryCollapseIM").text().trim() != '')
                    $("#PullCategoryCollapseIM").show();
                else
                    $("#PullCategoryCollapseIM").hide();


                if ($("#PullCategoryCollapseIM").find('span').length <= 2) {
                    $("#PullCategoryCollapseIM").scrollTop(0).height(50);
                }
                else {
                    $("#PullCategoryCollapseIM").scrollTop(0).height(100);
                }
                //clearGlobalIMIfNotInFocus();
                DoNarrowSearchForItemCount();
            }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
            },
            error: function (response) {
                // through errror message
            }
        });
    }

    function GetNarrowDDDataIM(tableName, companyID, roomID) {
        var ItemCallFrom = '';
        ItemCallFrom = '@Model.ControlID';

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: tableName, TextFieldName: 'CreatedBy', IsArchived: false, IsDeleted: false, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID', IsSLCount: vIsSLCount },
            success: function (response) {
                var s = '';

                if (response.DDData != null) {
                    $.each(response.DDData, function (i, val) {
                        var ArrData1 = i.toString().split('[###]');
                        s += '<option value="' + ArrData1[1] + '">' + ArrData1[0] + '(' + val + ')' + '</option>';
                    });
                }

                $("#UserCreatedIM").empty();
                $("#UserCreatedIM").multiselect('destroy');
                $("#UserCreatedIM").multiselectfilter('destroy');

                $("#UserCreatedIM").append(s);
                $("#UserCreatedIM").multiselect
            (
                {
                    checkAllText: Check,
                    uncheckAllText: UnCheck,
                    noneSelectedText: UserCreatedBy, selectedList: 5,
                    selectedText: function (numChecked, numTotal, checkedItems) {
                        return CreatedBy + ' ' + numChecked + ' ' + selected;
                    }
                },
                {
                    checkAll: function (ui) {
                        $("#UserCreatedCollapseIM").html('');
                        for (var i = 0; i <= ui.target.length - 1; i++) {
                            if ($("#UserCreatedCollapseIM").text().indexOf(ui.target[i].text) == -1) {
                                $("#UserCreatedCollapseIM").append("<span>" + ui.target[i].text + "</span>");
                            }
                        }
                        $("#UserCreatedCollapseIM").show();
                    }
                }
                ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
            .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                if (ui.checked) {
                    UserCreatedNarroValues = ui.value;

                    if ($("#UserCreatedCollapseIM").text().indexOf(ui.text) == -1) {
                        $("#UserCreatedCollapseIM").append("<span>" + ui.text + "</span>");
                    }
                }
                else {

                    UserCreatedNarroValues = '';

                    if (ui.checked == undefined) {
                        $("#UserCreatedCollapseIM").html('');
                    }
                    else if (!ui.checked) {
                        var text = $("#UserCreatedCollapseIM").html();
                        text = text.replace("<span>" + ui.text + "</span>", '');
                        $("#UserCreatedCollapseIM").html(text);
                    }
                    else
                        $("#UserCreatedCollapseIM").html('');
                }
                UserCreatedNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                    return input.value;
                })

                if ($("#UserCreatedCollapseIM").text().trim() != '')
                    $("#UserCreatedCollapseIM").show();
                else
                    $("#UserCreatedCollapseIM").hide();


                if ($("#UserCreatedCollapseIM").find('span').length <= 2) {
                    $("#UserCreatedCollapseIM").scrollTop(0).height(50);
                }
                else {
                    $("#UserCreatedCollapseIM").scrollTop(0).height(100);
                }
                //clearGlobalIMIfNotInFocus();
                DoNarrowSearchForItemCount();
            }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
            },
            error: function (response) {
                // through errror message
            }
        });

        //alert('3');

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: tableName, TextFieldName: 'LastUpdatedBy', IsArchived: false, IsDeleted: false, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID', IsSLCount: vIsSLCount },
            success: function (response) {
                var s = '';
                if (response.DDData != null) {
                    $.each(response.DDData, function (i, val) {
                        var ArrData1 = i.toString().split('[###]');
                        s += '<option value="' + ArrData1[1] + '">' + ArrData1[0] + '(' + val + ')' + '</option>';
                    });
                }


                $("#UserUpdatedIM").empty();
                $("#UserUpdatedIM").multiselect('destroy');
                $("#UserUpdatedIM").multiselectfilter('destroy');

                $("#UserUpdatedIM").append(s);
                $("#UserUpdatedIM").multiselect
            (
                {
                    checkAllText: Check,
                    uncheckAllText: UnCheck,
                    noneSelectedText: UserUpdatedby, selectedList: 5,
                    selectedText: function (numChecked, numTotal, checkedItems) {
                        return UpdatedBy + ' ' + numChecked + ' ' + selected;
                    }
                },
                {
                    checkAll: function (ui) {
                        $("#UserUpdatedCollapseIM").html('');
                        for (var i = 0; i <= ui.target.length - 1; i++) {
                            if ($("#UserUpdatedCollapseIM").text().indexOf(ui.target[i].text) == -1) {
                                $("#UserUpdatedCollapseIM").append("<span>" + ui.target[i].text + "</span>");
                            }
                        }
                        $("#UserUpdatedCollapseIM").show();
                    }
                }
                ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
            .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                if (ui.checked) {
                    UserUpdatedNarroValues = ui.value;

                    if ($("#UserUpdatedCollapseIM").text().indexOf(ui.text) == -1) {
                        $("#UserUpdatedCollapseIM").append("<span>" + ui.text + "</span>");
                    }
                }
                else {

                    UserUpdatedNarroValues = '';

                    if (ui.checked == undefined) {
                        $("#UserUpdatedCollapseIM").html('');
                    }
                    else if (!ui.checked) {
                        var text = $("#UserUpdatedCollapseIM").html();
                        text = text.replace("<span>" + ui.text + "</span>", '');
                        $("#UserUpdatedCollapseIM").html(text);
                    }
                    else
                        $("#UserUpdatedCollapseIM").html('');
                }
                UserUpdatedNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                    return input.value;
                })

                if ($("#UserUpdatedCollapseIM").text().trim() != '')
                    $("#UserUpdatedCollapseIM").show();
                else
                    $("#UserUpdatedCollapseIM").hide();

                if ($("#UserUpdatedCollapseIM").find('span').length <= 2) {
                    $("#UserUpdatedCollapseIM").scrollTop(0).height(50);
                }
                else {
                    $("#UserUpdatedCollapseIM").scrollTop(0).height(100);
                }
                //  clearGlobalIMIfNotInFocus();
                DoNarrowSearchForItemCount();
            }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
            },
            error: function (response) {
                // through errror message
            }
        });
    }

    function GetNarroHTMLForUDFIM(tableName, companyID, roomID) {

        var ItemCallFrom = '';
        ItemCallFrom = '@Model.ControlID';
        var UDFObject;
        $("select[name='udflist_Item']").each(function (index) {
            var UDFUniqueID = this.getAttribute('UID');
            $.ajax({
                'url': '/Master/GetUDFDDData',
                data: { TableName: "ItemCountList", UDFName: this.id, UDFUniqueID: UDFUniqueID, IsArchived: false, IsDeleted: false, "ItemModelCallFrom": ItemCallFrom, ParentID: '@Model.ID', IsSLCount: vIsSLCount },
                success: function (response) {

                    var s = '';
                    if (ItemCallFrom.toLowerCase() == 'icnt') {
                        if (response.DDData != null) {
                            $.each(response.DDData, function (i, val) {
                                var ArrData1 = i.toString().split('[###]');
                                s += '<option value="' + ArrData1[1] + '">' + ArrData1[0] + '(' + val + ')' + '</option>';
                            });
                        }
                    }
                    else {
                        if (response.DDData != null) {
                            $.each(response.DDData, function (UDFVal, ValCount) {
                                s += '<option value="' + UDFVal + '">' + UDFVal + '(' + ValCouGetNarroHTMLForUDFIMnt + ')' + '</option>';
                            });
                        }
                    }
                    var UDFColumnNameTemp = response.UDFColName.toString().replace("_dd_Item", "");
                    //$('#' + response.UDFColName).append(s);
                    //$('#' + response.UDFColName).multiselect

                    //Destroy widgets before reapplying the filter
                    $('[id="' + response.UDFColName + '"]').empty();
                    $('[id="' + response.UDFColName + '"]').multiselect('destroy');
                    $('[id="' + response.UDFColName + '"]').multiselectfilter('destroy');

                    $('[id="' + response.UDFColName + '"]').append(s);
                    $('[id="' + response.UDFColName + '"]').multiselect
                (
                    {
                        checkAllText: Check,
                        uncheckAllText: UnCheck,
                        noneSelectedText: UDFColumnNameTemp, selectedList: 5,
                        selectedText: function (numChecked, numTotal, checkedItems) {
                            return UDFColumnNameTemp + ' ' + numChecked + ' ' + selected;
                        }
                    },
                    {
                        checkAll: function (ui) {
                            var CollapseObject = $('#' + UDFUniqueID + 'Collapse_Item')
                            $(CollapseObject).html('');
                            for (var i = 0; i <= ui.target.length - 1; i++) {
                                if ($(CollapseObject).text().indexOf(ui.target[i].text) == -1) {
                                    $(CollapseObject).append("<span>" + ui.target[i].text + "</span>");
                                }
                            }
                            $(CollapseObject).show();
                        }
                    }
                    ).unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                    var CollapseObject = $('#' + UDFUniqueID + 'Collapse_Item')
                    if (ui.checked) {
                        if ($(CollapseObject).text().indexOf(ui.text) == -1) {
                            $(CollapseObject).append("<span>" + ui.text + "</span>");
                            if (UDFUniqueID == "UDF1")
                                UserUDF1NarrowValues = ui.value;
                            else if (UDFUniqueID == "UDF2")
                                UserUDF2NarrowValues = ui.value;
                            else if (UDFUniqueID == "UDF3")
                                UserUDF3NarrowValues = ui.value;
                            else if (UDFUniqueID == "UDF4")
                                UserUDF4NarrowValues = ui.value;
                            else if (UDFUniqueID == "UDF5")
                                UserUDF5NarrowValues = ui.value;
                            else if (UDFUniqueID == "UDF6")
                                UserUDF6NarrowValues = ui.value;
                            else if (UDFUniqueID == "UDF7")
                                UserUDF7NarrowValues = ui.value;
                            else if (UDFUniqueID == "UDF8")
                                UserUDF8NarrowValues = ui.value;
                            else if (UDFUniqueID == "UDF9")
                                UserUDF9NarrowValues = ui.value;
                            else if (UDFUniqueID == "UDF10")
                                UserUDF10NarrowValues = ui.value;
                        }
                    }
                    else {

                        if (UDFUniqueID == "UDF1")
                            UserUDF1NarrowValues = '';
                        else if (UDFUniqueID == "UDF2")
                            UserUDF2NarrowValues = '';
                        else if (UDFUniqueID == "UDF3")
                            UserUDF3NarrowValues = '';
                        else if (UDFUniqueID == "UDF4")
                            UserUDF4NarrowValues = '';
                        else if (UDFUniqueID == "UDF5")
                            UserUDF5NarrowValues = '';
                        else if (UDFUniqueID == "UDF6")
                            UserUDF6NarrowValues = '';
                        else if (UDFUniqueID == "UDF7")
                            UserUDF7NarrowValues = '';
                        else if (UDFUniqueID == "UDF8")
                            UserUDF8NarrowValues = '';
                        else if (UDFUniqueID == "UDF9")
                            UserUDF9NarrowValues = '';
                        else if (UDFUniqueID == "UDF10")
                            UserUDF10NarrowValues = '';

                        if (ui.checked == undefined) {
                            $(CollapseObject).html('');
                        }
                        else if (!ui.checked) {
                            var text = $(CollapseObject).html();
                            text = text.replace("<span>" + ui.text + "</span>", '');
                            $(CollapseObject).html(text);
                        }
                        else
                            $(CollapseObject).html('');
                    }
                    if (UDFUniqueID == "UDF1") {
                        UserUDF1NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }
                    else if (UDFUniqueID == "UDF2") {
                        UserUDF2NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }
                    else if (UDFUniqueID == "UDF3") {
                        UserUDF3NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }
                    else if (UDFUniqueID == "UDF4") {
                        UserUDF4NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }
                    else if (UDFUniqueID == "UDF5") {
                        UserUDF5NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }
                    else if (UDFUniqueID == "UDF6") {
                        UserUDF6NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }
                    else if (UDFUniqueID == "UDF7") {
                        UserUDF7NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }
                    else if (UDFUniqueID == "UDF8") {
                        UserUDF8NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }
                    else if (UDFUniqueID == "UDF9") {
                        UserUDF9NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }
                    else if (UDFUniqueID == "UDF10") {
                        UserUDF10NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return escape(input.value);
                        })
                    }

                    if ($(CollapseObject).text().trim() != '')
                        $(CollapseObject).show();
                    else
                        $(CollapseObject).hide();


                    if ($(CollapseObject).find('span').length <= 2) {
                        $(CollapseObject).scrollTop(0).height(50);
                    }
                    else {
                        $(CollapseObject).scrollTop(0).height(100);
                    }
                    // clearGlobalIMIfNotInFocus();
                    DoNarrowSearchForItemCount();
                }).multiselectfilter({ label: Filter, placeholder: Enterkeywords });
                },
                error: function (response) {

                    // through errror message
                }
            });
        });
    }

</script>
<script>

    /* COMMON FUNCTION TO NARROW SEARCH HIDE/SHOW ALONG WITH STATE SAVED : Dec 24, 2012 : IJ */
    var actionName = '@ActionName';
    var controllerName = '@ControllerName';
    $(document).ready(function () {        
        $(".handle").each(function () {
            $(this).find("img").attr("src", "../../Content/images/Drage.png");
        });       

        if ('@Model.PageName'.toLowerCase() == 'inventory count'.toLowerCase()
            || '@Model.PageName'.toLowerCase() == 'ItemMaster'.toLowerCase()) {            
            $("#nssortableCount").sortable({
                handle: "> .handle",
                stop: function (event, ui) {
                    var linkOrderData = $("#nssortableCount").sortable("toArray", { attribute: 'attrsortOrder' });                    
                    $.ajax({
                        "type": "POST",
                        "url": '/Master/SaveGridState',
                        "data": { Data: JSON.stringify(linkOrderData), ListName: "InventoryCountModel_NarrowSearch" },
                        "dataType": "json",
                        "cache": false,
                        "async": false,
                        "success": function (json1) {
                        }
                    });
                }
            });

            //var orderArray = '3,2,4,5,6,7,8,9,10,1,12,11,103,101,102,104,';
            //var listArray = $('#nssortableCount li');
            //for (var i = 0; i < orderArray.length; i++) {
            //    $('#nssortableCount').append(listArray[orderArray[i]-1]);
            //}
            $.ajax({
                "type": "POST",
                "url": '/Master/LoadGridState',
                "data": { ListName: "InventoryCountModel_NarrowSearch" },
                "dataType": "json",
                "cache": false,
                "async": false,
                "success": function (json1) {                    
                    if (json1.jsonData != null && json1.jsonData != '') {

                        var sorted = JSON.parse(json1.jsonData);
                        sorted = sorted.reverse();

                        sorted.forEach(function (id) {
                            $("#nssortableCount [attrsortOrder=" + parseInt(id) + "]").prependTo("#nssortableCount");
                        });
                    }
                }
            });

            NSForItemModel_ExecuteOnDocReady(false);
            //CallNarrowfunctionsIM();

            //var _IsArchived = false;
            //var _IsDeleted = false;

            //if (typeof ($('#IsArchivedRecords')) != undefined)
            //    _IsArchived = $('#IsArchivedRecords').is(':checked');

            //if (typeof ($('#IsDeletedRecords')) != undefined)
            //    _IsDeleted = $('#IsDeletedRecords').is(':checked');

            //GetPullNarrowSearchData('@Model.PageName', _IsArchived, _IsDeleted);            
            RefreshInventoryClassification();
        }

    });

   

    function RefreshItemType() {
        GetNarroHTMLForItemTypeIM();
    }

    function NSForItemModel_ExecuteOnDocReady(isSCLocation) {
        //--------------------------------------------------------------------------------
        //
        //alert("This is test");

        vIsSLCount = isSCLocation;

        //alert("a: " + actionName + " c: " + controllerName);

        var _IsArchived = false;
        var _IsDeleted = false;
        //var ShowStagingLocations = false;

        

        //alert('4');
        GetNarrowDDDataIM_Common('@Model.PageName', _IsArchived, _IsDeleted);

        if ('@string.IsNullOrEmpty(Model.Text)' == '@Boolean.FalseString') {
            if ('@modelText.ToLower()' == "inventory count") {
                GetItemLocationsForCount(vIsSLCount, false);
            }
        }

        CallNarrowfunctionsIM();

        $('a.downarrow').click(function (e) {
            e.preventDefault();
            $(this).closest('.accordion').find('.dropcontent').slideToggle();
        });

        //--------------------------------------------------------------------------------
        //
        $('#ExpandNarrowSearchIM').click(function (e) {

            ExpandNarrowSearchIM();
        });
        $('#CollapseNarrowSearchIM').click(function (e) {

            CollapseNarrowSearchIM();
        });
        var NarrowSearchStateIM = getCookieIM('NarrowSearchStateIM');

        if (NarrowSearchStateIM == 'Expanded') {
            CollapseNarrowSearchIM();
        }
        else {
            ExpandNarrowSearchIM();
        }

        //alert('type 8');
        GetNarroHTMLForItemTypeIM();
        $("div#ItemModelTemp").find("div.userHead:first").find("div.BtnBlock a.clsactionSelectAll").click(function () {

            $("#myDataTable").find("tbody tr").removeClass("row_selected").addClass("row_selected");

            $("#ItemModeDataTable").find("tbody tr").removeClass("row_selected").addClass("row_selected");

            $("#ItemModeDataTable tbody tr").each(function () {
                if ($(this).find("input#btnLoad").length > 0) {
                    $(this).removeClass("row_selected");
                }
            });
            $(this).next("a.clsactionDeSelectAll").css('display', '');
            $(this).css('display', 'none');
            ShowHideCartCreateButton();
            ShowHideCartDeleteButton();
        });
        $("div#ItemModelTemp").find("div.userHead:first").find("div.BtnBlock a.clsactionDeSelectAll").click(function () {

            $("#myDataTable").find("tbody tr").removeClass("row_selected");
            $("#ItemModeDataTable").find("tbody tr").removeClass("row_selected");
            $(this).prev("a.clsactionSelectAll").css('display', '');
            $(this).css('display', 'none');
            ShowHideCartCreateButton();
            ShowHideCartDeleteButton();
        });
    }

    function ExpandNarrowSearchIM() {

        if ($('#ItemModelTemp .IteamBlock').length > 0) {

            var w = $('#ItemModelTemp .IteamBlock').css("width");
            $('#ItemModelTemp .IteamBlock').show();
            $('#ItemModelTemp .IteamBlock').stop().animate({
                width: "18%"
            }, 0, function () {
                $('#ItemModelTemp .userContent').css({ "width": "80.5%", "margin": "0" });
                $('#ItemModeDataTable_length').css({ "left": "0px" });
                $('#ItemModeDataTable_paginate').css({ "left": "145px" });
                $('#ItemModelTemp .leftopenContent').css({ "display": "none" });
                setCookieIM('NarrowSearchStateIM', 'Collapsed');
            });
        }
        else if ($('.userListBlock .IteamBlock').length > 0) {

            var w = $('.userListBlock .IteamBlock').css("width");
            $('.userListBlock .IteamBlock').show();
            $('.userListBlock .IteamBlock').stop().animate({
                width: "18%"
            }, 0, function () {
                $('.userListBlock .userContent').css({ "width": "80.5%", "margin": "0" });
                $('#ItemModeDataTable_length').css({ "left": "0px" });
                $('#ItemModeDataTable_paginate').css({ "left": "145px" });
                $('.userListBlock .leftopenContent').css({ "display": "none" });
                setCookieIM('NarrowSearchStateIM', 'Collapsed');
            });
        }
        else if ($('#CtabNew .IteamBlock').length > 0) {
            var w = $('#CtabNew .IteamBlock').css("width");
            $('#CtabNew .IteamBlock').show();
            $('#CtabNew .IteamBlock').stop().animate({
                width: "18%"
            }, 0, function () {
                $('#CtabNew .userContent').css({ "width": "80.5%", "margin": "0" });
                $('#ItemModeDataTable_length').css({ "left": "0px" });
                $('#ItemModeDataTable_paginate').css({ "left": "145px" });
                $('#CtabNew .leftopenContent').css({ "display": "none" });
                setCookieIM('NarrowSearchStateIM', 'Collapsed');
            });
        }
        else if ($('#Ctab .IteamBlock').length > 0) {

            var w = $('#Ctab .IteamBlock').css("width");
            $('#Ctab .IteamBlock').show();
            $('#Ctab .IteamBlock').stop().animate({
                width: "18%"
            }, 0, function () {
                $('#Ctab .userContent').css({ "width": "80.5%", "margin": "0" });
                $('#ItemModeDataTable_length').css({ "left": "0px" });
                $('#ItemModeDataTable_paginate').css({ "left": "145px" });
                $('#Ctab .leftopenContent').css({ "display": "none" });
                setCookieIM('NarrowSearchStateIM', 'Collapsed');
            });
        }


        else if ($('#ItemModel .IteamBlock').length > 0) {
            var w = $('#ItemModel .IteamBlock').css("width");
            $('#ItemModel .IteamBlock').show();
            $('#ItemModel .IteamBlock').stop().animate({
                width: "18%"
            }, 0, function () {
                $('#ItemModel .userContent').css({ "width": "80.5%", "margin": "0" });
                $('#ItemModeDataTable_length').css({ "left": "0px" });
                $('#ItemModeDataTable_paginate').css({ "left": "145px" });
                $('#ItemModel .leftopenContent').css({ "display": "none" });
                setCookieIM('NarrowSearchStateIM', 'Collapsed');
            });
        }

    }

    function CollapseNarrowSearchIM() {

        if ($('#ItemModelTemp .IteamBlock').length > 0) {

            $('#ItemModelTemp .IteamBlock').stop().animate({
                width: "0%"
            }, 0, function () {
                $('#ItemModelTemp .IteamBlock').hide();

                $('#ItemModelTemp .userContent').css({ "width": "98.5%", margin: "0 0.4% 1%" });
                var Left = $('.viewBlock').css("width");
                $('#ItemModeDataTable_length').css({ "left": Left });
                var LeftW = 145 + parseInt(Left);
                $('#ItemModeDataTable_paginate').css({ "left": LeftW + 'px' });
                if (typeof (oTableItemModel) != "undefined") {
                    oTableItemModel.fnAdjustColumnSizing();
                }


                $('#ItemModelTemp .leftopenContent').css({ "display": "" });

                setCookie('NarrowSearchStateIM', 'Expanded');
            });
        }
        else if ($('#CtabNew .IteamBlock').length > 0) {

            $('#CtabNew .IteamBlock').stop().animate({
                width: "0%"
            }, 0, function () {
                $('#CtabNew .IteamBlock').hide();
                $('#CtabNew .userContent').css({ "width": "98.5%", margin: "0 0.4% 1%" });
                var Left = $('.viewBlock').css("width");
                $('#ItemModeDataTable_length').css({ "left": Left });
                var LeftW = 145 + parseInt(Left);
                $('#ItemModeDataTable_paginate').css({ "left": LeftW + 'px' });
                if (typeof (oTableItemModel) != "undefined") {
                    oTableItemModel.fnAdjustColumnSizing();
                }
                $('#CtabNew .leftopenContent').css({ "display": "" });
                setCookie('NarrowSearchStateIM', 'Expanded');
            });
        }
        else if ($('.userListBlock .IteamBlock').length > 0) {

            $('.userListBlock .IteamBlock').stop().animate({
                width: "0%"
            }, 0, function () {
                $('.userListBlock .IteamBlock').hide();
                $('.userListBlock .userContent').css({ "width": "98.5%", margin: "0 0.4% 1%" });
                var Left = $('.viewBlock').css("width");
                $('#ItemModeDataTable_length').css({ "left": Left });
                var LeftW = 145 + parseInt(Left);
                $('#ItemModeDataTable_paginate').css({ "left": LeftW + 'px' });
                if (typeof (oTableItemModel) != "undefined") {
                    oTableItemModel.fnAdjustColumnSizing();
                }
                $('.userListBlock .leftopenContent').css({ "display": "" });
                setCookie('NarrowSearchStateIM', 'Expanded');
            });
        }
        else if ($('#Ctab .IteamBlock').length > 0) {

            $('#Ctab .IteamBlock').stop().animate({
                width: "0%"
            }, 0, function () {
                $('#Ctab .IteamBlock').hide();

                $('#Ctab .userContent').css({ "width": "98.5%", margin: "0 0.4% 1%" });
                var Left = $('.viewBlock').css("width");
                $('#ItemModeDataTable_length').css({ "left": Left });
                var LeftW = 145 + parseInt(Left);
                $('#ItemModeDataTable_paginate').css({ "left": LeftW + 'px' });
                if (typeof (oTableItemModel) != "undefined") {
                    oTableItemModel.fnAdjustColumnSizing();
                }


                $('#Ctab .leftopenContent').css({ "display": "" });

                setCookie('NarrowSearchStateIM', 'Expanded');
            });
        }
        else if ($('#ItemModel .IteamBlock').length > 0) {
            $('#ItemModel .IteamBlock').stop().animate({
                width: "0%"
            }, 0, function () {
                $('#ItemModel .IteamBlock').hide();
                $('#ItemModel .userContent').css({ "width": "98.5%", margin: "0 0.4% 1%" });
                var Left = $('.viewBlock').css("width");
                $('#ItemModeDataTable_length').css({ "left": Left });
                var LeftW = 145 + parseInt(Left);
                $('#ItemModeDataTable_paginate').css({ "left": LeftW + 'px' });
                if (typeof (oTableItemModel) != "undefined") {
                    oTableItemModel.fnAdjustColumnSizing();
                }
                $('#ItemModel .leftopenContent').css({ "display": "" });
                setCookie('NarrowSearchStateIM', 'Expanded');
            });
        }
    }

    function getCookieIM(name) {
        var arg = name + "=";
        var alen = arg.length;
        var clen = document.cookie.length;
        var i = 0;
        while (i < clen) {
            var j = i + alen;
            if (document.cookie.substring(i, j) == arg) {
                return getCookieValIM(j);
            }
            i = document.cookie.indexOf(" ", i) + 1;
            if (i == 0) break;
        }
        return null;
    }

    function getCookieValIM(offset) {
        var endstr = document.cookie.indexOf(";", offset);
        if (endstr == -1) { endstr = document.cookie.length; }
        return unescape(document.cookie.substring(offset, endstr));
    }

    function setCookieIM(name, value, days) {
        if (typeof days != "undefined") { //if set persistent cookie
            var expireDate = new Date();
            expireDate.setDate(expireDate.getDate() + days);
            document.cookie = name + "=" + value + "; path=/; expires=" + expireDate.toGMTString() + " ;SameSite=Strict;";
        }
        else //else if this is a session only cookie
            document.cookie = name + "=" + value + "; path=/ ;SameSite=Strict;";
    }

    /* COMMON FUNCTION TO NARROW SEARCH HIDE/SHOW ALONG WITH STATE SAVED : Dec 24, 2012 : IJ */

    /* CLEAR NARROW SEARCH - START */
    function clearNarrowSearchFilterIM() {        
        if (typeof ($("#ItemLocationsIC").multiselect("getChecked").length) != undefined && $("#ItemLocationsIC").multiselect("getChecked").length > 0) {
            $('#ItemLocationsIC').multiselect('refresh')
            $("#ItemLocationsIC").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#ItemLocationsICCollapseIM").html('');
            $("#ItemLocationsICCollapseIM").hide();
            $("#ItemLocationsIC").multiselect({ selectedText: "" });
        }

        if (typeof ($("#UserCreatedIM").multiselect("getChecked").length) != undefined && $("#UserCreatedIM").multiselect("getChecked").length > 0) {
            $('#UserCreatedIM').multiselect('refresh')
            $("#UserCreatedIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#UserCreatedCollapseIM").html('');
            $("#UserCreatedCollapseIM").hide();
            $("#UserCreatedIM").multiselect({ selectedText: "" });
        }

        if (typeof ($("#UserUpdatedIM").multiselect("getChecked").length) != undefined && $("#UserUpdatedIM").multiselect("getChecked").length > 0) {
            $('#UserUpdatedIM').multiselect('refresh')
            $("#UserUpdatedIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#UserUpdatedCollapseIM").html('');
            $("#UserUpdatedCollapseIM").hide();
            $("#UserUpdatedIM").multiselect({ selectedText: "" });
        }

        $("select[name='udflist_Item']").each(function (index) {
            if (typeof ($(this).multiselect("getChecked").length) != undefined && $(this).multiselect("getChecked").length > 0) {
                var UDFUniqueID = this.getAttribute('UID');

                $('#' + UDFUniqueID).multiselect('refresh')
                $('#' + UDFUniqueID).multiselect("widget").find(":checkbox").removeAttr("checked");
                $('#' + UDFUniqueID + 'Collapse_Item').html('');
                $('#' + UDFUniqueID + 'Collapse_Item').hide();
                $('#' + UDFUniqueID).multiselect({ selectedText: "" });
            }
        });

        if (typeof ($("#PullSupplierIM").multiselect("getChecked").length) != undefined && $("#PullSupplierIM").multiselect("getChecked").length > 0) {
            $('#PullSupplierIM').multiselect('refresh')
            $("#PullSupplierIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#PullSupplierCollapseIM").html('');
            $("#PullSupplierCollapseIM").hide();
            $("#PullSupplierIM").multiselect({ selectedText: "" });
        }

        if (typeof ($("#StageLocationHeaderIM").multiselect("getChecked").length) != undefined && $("#StageLocationHeaderIM").multiselect("getChecked").length > 0) {
            $('#StageLocationHeaderIM').multiselect('refresh')
            $("#StageLocationHeaderIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#StageLocationHeaderCollapseIM").html('');
            $("#StageLocationHeaderCollapseIM").hide();
            $("#StageLocationHeaderIM").multiselect({ selectedText: "" });
            IsStagingLocationOnly = false;
        }

        if (typeof ($("#StageLocationIM").multiselect("getChecked").length) != undefined && $("#StageLocationIM").multiselect("getChecked").length > 0) {
            $('#StageLocationIM').multiselect('refresh')
            $("#StageLocationIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#StageLocationCollapseIM").html('');
            $("#StageLocationCollapseIM").hide();
            $("#StageLocationIM").multiselect({ selectedText: "" });
            IsStagingLocationOnly = false;
        }

        if (typeof ($("#ManufacturerIM").multiselect("getChecked").length) != undefined && $("#ManufacturerIM").multiselect("getChecked").length > 0) {
            $('#ManufacturerIM').multiselect('refresh')
            $("#ManufacturerIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#ManufacturerCollapseIM").html('');
            $("#ManufacturerCollapseIM").hide();
            $("#ManufacturerIM").multiselect({ selectedText: "" });
        }

        if (typeof ($("#PullCategoryIM").multiselect("getChecked").length) != undefined && $("#PullCategoryIM").multiselect("getChecked").length > 0) {
            $('#PullCategoryIM').multiselect('refresh')
            $("#PullCategoryIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#PullCategoryCollapseIM").html('');
            $("#PullCategoryCollapseIM").hide();
            $("#PullCategoryIM").multiselect({ selectedText: "" });
        }

        if (typeof ($("#ItemTrackingType").multiselect("getChecked").length) != undefined && $("#ItemTrackingType").multiselect("getChecked").length > 0) {
            $('#ItemTrackingType').multiselect('refresh')
            $("#ItemTrackingType").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#ItemTrackingTypeCollapse").html('');
            $("#ItemTrackingTypeCollapse").hide();
            $("#ItemTrackingType").multiselect({ selectedText: "" });
        }

        if (typeof ($("#StockStatus").multiselect("getChecked").length) != undefined && $("#StockStatus").multiselect("getChecked").length > 0) {
            $('#StockStatus').multiselect('refresh')
            $("#StockStatus").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#StockStatusCollapse").html('');
            $("#StockStatusCollapse").hide();
            $("#StockStatus").multiselect({ selectedText: "" });
        }

        if (typeof ($("#ItemTypeIM").multiselect("getChecked").length) != undefined && $("#ItemTypeIM").multiselect("getChecked").length > 0) {
            $('#ItemTypeIM').multiselect('refresh')
            $("#ItemTypeIM").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#ItemTypeCollapseIM").html('');
            $("#ItemTypeCollapseIM").hide();
            $("#ItemTypeIM").multiselect({ selectedText: "" });
        }

        if (typeof ($("#InventoryClassificationDDL").multiselect("getChecked").length) != undefined && $("#InventoryClassificationDDL").multiselect("getChecked").length > 0) {
            $('#InventoryClassificationDDL').multiselect('refresh')
            $("#InventoryClassificationDDL").multiselect("widget").find(":checkbox").removeAttr("checked");
            $("#InventoryClassification").html('');
            $("#InventoryClassification").hide();
            $("#InventoryClassificationDDL").multiselect({ selectedText: "" });
        }

        if ($('#DateCFromIM').val() != '') $('#DateCFromIM').val('');
        if ($('#DateCToIM').val() != '') $('#DateCToIM').val('');
        if ($('#DateUFromIM').val() != '') $('#DateUFromIM').val('');
        if ($('#DateUToIM').val() != '') $('#DateUToIM').val('');

        if ($('#PullCost') != undefined) {
            $('#PullCost').val('0_-1');
        }

        if ($('#IsActive') != undefined) {
            $('#IsActive').val('-1');
        }

        if ($('#AverageUsage') != undefined) {
            $('#AverageUsage').val('0');
        }

        if ($('#Turns') != undefined) {
            $('#Turns').val('0');
        }

        ItemLocationNarroValues = '';
        ManufacturerNarroValues = '';
        ItemTrackingTypeNarroValues = '';
        ItemTypeNarroSearchValue = '';
        PullSupplierNarroValues = '';
        PullCategoryNarroValues = '';
        StockStatusTypeNarroValues = '';
        ItemActive = '';
        CostNarroSearchValue = '';
        AverageCostNarroSearchValue = '';
        TurnsNarroSearchValue = '';
        InventoryClassificationNarroSearchValue = '';
        UserCreatedNarroValues = '';
        UserUpdatedNarroValues = '';

        UserUDF1NarrowValues = '';
        UserUDF2NarrowValues = '';
        UserUDF3NarrowValues = '';
        UserUDF4NarrowValues = '';
        UserUDF5NarrowValues = '';
        UserUDF6NarrowValues = '';
        UserUDF7NarrowValues = '';
        UserUDF8NarrowValues = '';
        UserUDF9NarrowValues = '';
        UserUDF10NarrowValues = '';

        DoNarrowSearchForItemCount();

        //if (typeof ($("#StockStatus").multiselect("getChecked").length) != undefined && $("#StockStatus").multiselect("getChecked").length > 0) {
        //    $("#StockStatus").multiselect("uncheckAll");
        //    $("#StockStatusCollapse").html('');
        //}

        //if (typeof ($("#ItemTypeIM").multiselect("getChecked").length) != undefined && $("#ItemTypeIM").multiselect("getChecked").length > 0) {
        //    $("#ItemTypeIM").multiselect("uncheckAll");
        //    $("#ItemTypeCollapseIM").html('');
        //}

    }
    /* CLEAR NARROW SEARCH - END */

    /* CLEAR GLOBAL FILTER IF NOT IN FOCUS - START */
    function clearGlobalIMIfNotInFocus() {
        if ($(document.activeElement).attr('id') != 'ItemModel_filter')
            $("#ItemModel_filter").val('');
    }
    /* CLEAR GLOBAL FILTER IF NOT IN FOCUS - END */

   
        
        
    

</script>