@model eTurns.DTO.OrderMasterDTO
<label for="label" style="width: 100px; float: left; padding: 1.3% 0;">
    @if (Model.OrderType == (int)OrderType.Order)
    {
        @Html.LabelFor(model => model.OrderNumber) <em style="color: Red">*</em>
    }
    else
    {
        @Html.Label(ResOrder.ReturnOrderNumber) <em style="color: Red">*</em>
    }   
</label>
@if ((Model.AutoOrderNumber != null && Model.AutoOrderNumber.IsBlanketPO))
{
    @Html.DropDownListFor(model => model.BlanketOrderNumberID, new SelectList(Model.AutoOrderNumber.BlanketPOs, "ID", "BlanketPO", Model.BlanketOrderNumberID), new { @id = "ddlBlanketPO", @class = "selectBox", @style = "width:120px" })
    if (Model.OrderStatus == (int)OrderStatus.UnSubmitted)
    { 
    @Html.TextBoxFor(model => model.OrderNumber, new { id = "txtOrderNumber", @class = "text-box", @style = "background:white;display:none", maxlength = 22 })
    }
    else
    {
    @Html.TextBoxFor(model => model.OrderNumber, new { id = "txtOrderNumber", @class = "text-box", @style = "background:white;display:none", maxlength = 22, @readonly = "readonly" })}
    <br />
    @Html.ValidationMessageFor(model => model.OrderNumber, "The field 'OrderNumber' is required.", new { @id = "spnErrOrderNumber", @style = "display:none;color: #FF0000;" })
}
else
{
    if (Model.OrderStatus == (int)OrderStatus.UnSubmitted)
    { 
    @Html.TextBoxFor(model => model.OrderNumber, new { id = "txtOrderNumber", @class = "text-box", @style = "background:white", maxlength = 22 })
    }
    else
    {
    @Html.TextBoxFor(model => model.OrderNumber, new { id = "txtOrderNumber", @class = "text-box", @style = "background:white", maxlength = 22, @readonly = "readonly" })
    }
    @Html.HiddenFor(model => model.BlanketOrderNumberID)
    <br />
    @Html.ValidationMessageFor(model => model.OrderNumber)
}
@Html.HiddenFor(model => model.OrderNumber_ForSorting)
<br />
<script type="text/javascript">
    $('#txtReleaseNumber').val('@Model.ReleaseNumber');
    IsBlanket = '@Model.IsBlanketOrder';

    $('#ddlBlanketPO').change(function () {
        if (!isNaN(parseInt($(this).val())) && parseInt($(this).val()) > 0) {
            $('#DivLoading').show();
            $('#txtOrderNumber').val($('#ddlBlanketPO :selected').text());
            $('#spnErrOrderNumber').css('display', 'none');
            $.get("GetReleaseNumber", { 'OrderNumber': $('#txtOrderNumber').val() }, function (data) {
                if (data.Success = "True") {
                    $('#txtReleaseNumber').val(data.ReleaseNumber);
                }
                $('#DivLoading').hide();
            });
        }
        else {
            $('#txtReleaseNumber').val('');
            $('#txtOrderNumber').val('');
            $('#spnErrOrderNumber').css('display', 'inline');
            $('#DivLoading').hide();
            return false;
        }
    });

    //if (OrderID <= 0 && $('#txtOrderNumber').val().length <= 0) {
    if (OrderID <= 0) {
        $('#txtOrderNumber').removeAttr('readonly');
    }
</script>
