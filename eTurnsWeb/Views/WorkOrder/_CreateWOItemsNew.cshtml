@*@model IEnumerable<eTurns.DTO.PullMasterViewDTO>*@
@{
    GridHeaderSettings settings = new GridHeaderSettings() { dataViewType = DataViewType.None, DisplaySaveButton = false, DisplayUDFButton = false, UDFSetupFor = "", DisplaySettings = true, DisplayColumnSetupButton = false, DisplayContextMenu = false, DisplayPrintBlock = false, DisplayDeleteButton = true, DataTableName = "WOItemsTable" + ViewBag.WorkOrderGUID };
    bool isCost = eTurnsWeb.Helper.SessionHelper.GetAdminPermission(eTurnsWeb.Helper.SessionHelper.ModuleList.HideCostMarkUpSellPrice);
    bool IsUpdate;
    bool isInsert;
    bool isPullInsert;
    bool IsPullUpdate;
    Guid mntsGUID = Guid.Empty;
    ToolsMaintenanceDTO objToolsMaintenanceDTO = new ToolsMaintenanceDTO();
    //if (Guid.TryParse(Convert.ToString(ViewBag.mntsGUID), out mntsGUID))
    //{
    //    objToolsMaintenanceDTO = new eTurns.DAL.ToolsMaintenanceDAL(eTurnsWeb.Helper.SessionHelper.EnterPriseDBName).GetRecord(mntsGUID, eTurnsWeb.Helper.SessionHelper.RoomID, eTurnsWeb.Helper.SessionHelper.CompanyID, false, false);
    //}
    Guid.TryParse(Convert.ToString(ViewBag.mntsGUID), out mntsGUID);
    WorkOrderDTO WOHEader = ViewBag.WorkOrderDTO;
    if (ViewBag.ViewOnly == true)
    {
        IsUpdate = false;
        isInsert = false;
        isPullInsert = false;
        IsPullUpdate = false;
    }
    else
    {
        IsUpdate = eTurnsWeb.Helper.SessionHelper.GetModulePermission(eTurnsWeb.Helper.SessionHelper.ModuleList.WorkOrders, eTurnsWeb.Helper.SessionHelper.PermissionType.Update);
        isInsert = eTurnsWeb.Helper.SessionHelper.GetModulePermission(eTurnsWeb.Helper.SessionHelper.ModuleList.WorkOrders, eTurnsWeb.Helper.SessionHelper.PermissionType.Insert);

        isPullInsert = eTurnsWeb.Helper.SessionHelper.GetModulePermission(eTurnsWeb.Helper.SessionHelper.ModuleList.PullMaster, eTurnsWeb.Helper.SessionHelper.PermissionType.Insert);
        IsPullUpdate = eTurnsWeb.Helper.SessionHelper.GetModulePermission(eTurnsWeb.Helper.SessionHelper.ModuleList.PullMaster, eTurnsWeb.Helper.SessionHelper.PermissionType.Update);
    }

    Int64 EnterpriseId = eTurnsWeb.Helper.SessionHelper.EnterPriceID;
    Int64 CompanyID = eTurnsWeb.Helper.SessionHelper.CompanyID;
    Int64 RoomID = eTurnsWeb.Helper.SessionHelper.RoomID;

    string UNCPathRootImage = eTurns.DTO.SiteSettingHelper.InventoryPhoto;
    UNCPathRootImage = UNCPathRootImage.Replace("~", string.Empty);
    string LogoPathItemImage = (UNCPathRootImage + EnterpriseId + "/" + CompanyID + "/" + RoomID);
}
<div class="userListingWrapper">
    <input type="hidden" id="hdnListName" value="WorkOrderDetails" />
    <div class="userListBlock">
        <div id="tab7" class="tabContener" style="width: 99.5%; height: 800px;">
            <div class="searchWrapper">
                <div class="searchBlock">
                    <span class="label">@eTurns.DTO.Resources.ResCommon.Search</span>
                    <div class="searchinputB">
                        <input type="text" class="searchinput" id="InnerItem_filter" />
                        <a href="javascript:void(0);" class="xclose">
                            <img src="~/Content/images/x.png" alt="X" id="clear_QLItem_filter" />
                        </a>
                    </div>
                </div>
                <input type="button" id="btnDiv" value="Div" style="visibility: hidden" />
            </div>
            @Html.QuickListItemsGridTopHeader(settings, eTurnsWeb.Helper.SessionHelper.ModuleList.WorkOrders)
            <div class="userContentInnerGrid" style="width: 99% !important; margin-left: 5px !important;
                float: left;">
                <table id="WOItemsTable@(ViewBag.WorkOrderGUID)" class="display">
                    <thead>
                        <tr>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.RowNo
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.Action
                            </th>
                            <th>
                                @eTurns.DTO.ResPullMaster.PullCredit
                            </th>
                            <th>
                                @eTurns.DTO.ResPullMaster.PulledQuantity
                            </th>
                            
                            <th>
                                @eTurns.DTO.ResPullMaster.PullOrderNumber
                            </th>

                            <th>
                                @eTurns.DTO.ResPullMaster.PulledCost
                            </th>

                            <th>
                                @eTurns.DTO.ResLocation.Location
                            </th>
                            <th>
                                @eTurns.DTO.ResProjectMaster.ProjectSpendName
                            </th>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.ID
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.ItemNumber
                            </th>
                            <th>
                                @eTurns.DTO.ResToolMaster.ToolName
                            </th>
                            <th>
                                @eTurns.DTO.ResPullMaster.Created
                            </th>
                            <th>
                                @eTurns.DTO.ResPullMaster.Updated
                            </th>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.RoomName
                            </th>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.UpdatedBy
                            </th>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.CreatedBy
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.ItemType
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.Description
                            </th>
                            <th>
                                @eTurns.DTO.ResCategoryMaster.Category
                            </th>
                            <th>
                                @eTurns.DTO.ResUnitMaster.Unit
                            </th>

                            <th>
                                @eTurns.DTO.ResItemMaster.Cost
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.Markup
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.SellPrice
                            </th>
                            <th>
                                Item @eTurns.DTO.ResItemMaster.ExtendedCost
                            </th>

                            <th>
                                @eTurns.DTO.ResItemMaster.DefaultPullQuantity
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.ManufacturerNumber
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.ManufacturerName
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.SupplierPartNo
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.Supplier
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.LongDescription
                            </th>
                            <th>
                                @eTurns.DTO.ResGLAccount.GLAccount
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.Taxable
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.InTransitquantity
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.OnOrderQuantity
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.OnTransferQuantity
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.AverageUsage
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.Turns
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.OnHandQuantity
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.CriticalQuantity
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.MinimumQuantity
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.MaximumQuantity
                            </th>
                            <th>
                                @eTurns.DTO.ResItemMaster.CostUOMName
                            </th>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.AddedFrom
                            </th>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.EditedFrom
                            </th>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.ReceivedOnDate
                            </th>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.ReceivedOnWebDate
                            </th>
                            <th>
                                @eTurns.DTO.ResWorkOrder.WorkOrderIsEDISent
                            </th>
                            <th>
                                @eTurns.DTO.ResPullMaster.PullItemCost
                            </th>
                            <th>
                                @eTurns.DTO.ResPullMaster.PullItemSellPrice
                            </th>
                            <th>
                                @eTurns.DTO.ResPullMaster.PullMarkup
                            </th>
                            <th>
                                @eTurns.DTO.ResPullMaster.ItemCostOnPullDate
                            </th>
                            <th>
                                @eTurns.DTO.Resources.ResCommon.Image
                            </th>
                            @Html.RenderColumnsHeader("ItemMaster", typeof(eTurns.DTO.ResItemMaster), "Item")
                            @Html.RenderColumnsHeader("PullMaster", typeof(eTurns.DTO.ResPullMaster))
                        </tr>
                    </thead>
                    <tbody>
                        @*@if (Model != null)
                        {
                            string edisent = string.Empty;
                            int trid = 0;
                            foreach (var item in Model)
                            {
                                edisent = (item.IsEDISent ?? false) ? "yes" : "no";

                                <tr>
                                    <td></td>
                                    <td>
                                        <img src="~/Content/images/drildown_open.jpg" name="pullDrillDown" alt="Show/Hide Pull" />
                                        <input type="hidden" id="hdnID" value='@item.GUID' />
                                        <input type="hidden" id="hdnPullID" value='@item.ID' />
                                        <input type="hidden" id="hdnReqDetailGUID" value='@item.RequisitionDetailGUID' />
                                        <input type="hidden" id="hdnWorkOrderGUID" value='@item.WorkOrderDetailGUID' />
                                        <input type="hidden" id="hdnToolGuid" value='@item.ToolGUID' />
                                    </td>
                                    <td>
                                        @item.ActionType
                                    </td>
                                    <td class="numericalign">
                                        <label id="qtyTempPoolQuantity_@trid">@item.PoolQuantity</label>
                                    </td>
                                    <td>
                                        @item.PullOrderNumber
                                    </td>
                                    <td class="numericalign">
                                        <label id="CostTempCost_@trid">@item.PullCost.GetValueOrDefault(0)</label>
                                    </td>

                                    <td>
                                        @item.BinNumber
                                    </td>
                                    <td>
                                        @item.ProjectName
                                    </td>
                                    <td>
                                        @item.ID
                                    </td>
                                    <td>
                                        @item.ItemNumber
                                    </td>
                                    <td>
                                        @item.ToolName
                                    </td>
                                    <td>
                                        @item.CreatedDate
                                    </td>
                                    <td>
                                        @item.UpdatedDate
                                    </td>
                                    <td>
                                        @item.RoomName
                                    </td>
                                    <td>
                                        @item.UpdatedByName
                                    </td>
                                    <td>
                                        @item.CreatedByName
                                    </td>
                                    <td>
                                        @if (item.ItemType == 1)
                                        {
                                            <text>Item</text>
                                        }
                                        else if (item.ItemType == 2)
                                        {
                                            <text>Kit</text>
                                        }
                                        else if (item.ItemType == 3)
                                        {
                                            <text>Quick List</text>
                                        }
                                        else if (item.ItemType == 4)
                                        {
                                            <text>Labor</text>
                                        }
                                    </td>
                                    <td>
                                        @item.Description
                                    </td>
                                    <td>
                                        @item.CategoryName
                                    </td>
                                    <td>
                                        @item.Unit
                                    </td>

                                    <td class="numericalign">
                                        <label id="CostTempPullCost_@trid">@item.ItemCost</label>
                                    </td>
                                    <td class="numericalign">
                                        @item.Markup
                                    </td>
                                    <td class="numericalign">
                                        <label id="CostTempSellPrice_@trid">@item.SellPrice</label>
                                    </td>
                                    <td class="numericalign">
                                        <label id="CostExtended_@trid">@item.ExtendedCost</label>
                                    </td>

                                    <td class="numericalign">
                                        @item.DefaultPullQuantity
                                    </td>
                                    <td>
                                        @item.ManufacturerNumber
                                    </td>
                                    <td>
                                        @item.Manufacturer
                                    </td>
                                    <td>
                                        @item.SupplierPartNo
                                    </td>
                                    <td>
                                        @item.SupplierName
                                    </td>
                                    <td>
                                        @item.LongDescription
                                    </td>
                                    <td>
                                        @item.GLAccount
                                    </td>
                                    <td>
                                        @item.Taxable
                                    </td>
                                    <td class="numericalign">
                                        @item.InTransitquantity
                                    </td>
                                    <td class="numericalign">
                                        @item.OnOrderQuantity
                                    </td>
                                    <td class="numericalign">
                                        @item.OnTransferQuantity
                                    </td>
                                    <td class="numericalign">
                                        @item.AverageUsage
                                    </td>
                                    <td class="numericalign">
                                        @item.Turns
                                    </td>
                                    <td class="numericalign">
                                        @item.OnHandQuantity
                                    </td>
                                    <td class="numericalign">
                                        @item.CriticalQuantity
                                    </td>
                                    <td class="numericalign">
                                        @item.MinimumQuantity
                                    </td>
                                    <td class="numericalign">
                                        @item.MaximumQuantity
                                    </td>
                                    <td class="numericalign">
                                        @item.CostUOMName
                                    </td>
                                    <td>
                                        @item.AddedFrom
                                    </td>
                                    <td>
                                        @item.EditedFrom
                                    </td>
                                    <td>
                                        @item.ReceivedOnWebDate
                                    </td>
                                    <td>
                                        @item.ReceivedOnDate
                                    </td>
                                    <td>
                                        @edisent
                                    </td>
                                    <td>
                                        @item.PullItemCost
                                    </td>
                                    <td>
                                        @item.PullItemSellPrice
                                    </td>
                                    <td>
                                        @item.PullMarkup
                                    </td>
                                    <td>
                                        @item.ItemCostOnPullDate
                                    </td>
                                    @(Html.RenderColumnsArrayForDOM("ItemMaster", item, "Item"))
                                    @(Html.RenderColumnsArrayForDOM("PullMaster", item))
                                </tr>
                                trid += 1;
                            }
                        }*@
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="dialog" id="mdlQLYesNo" style="display: none;">
    <div class="inner">
        <p class="text">
            @eTurns.DTO.Resources.ResMessage.DeleteConfirm
        </p>
        <a href="JavaScript:void{}" id="btnQLModelYesSP" class="yes">
            <img src="~/Content/images/yes.png" alt="@eTurns.DTO.Resources.ResCommon.Yes" />
            @eTurns.DTO.Resources.ResMessage.ConfirmYes
        </a><a href="javascript:void(0)" class="no" onclick="QLcloseModal()">
            <img src="~/Content/images/no.png" alt="@eTurns.DTO.Resources.ResCommon.No" />@eTurns.DTO.Resources.ResMessage.ConfirmNo
        </a>
    </div>
</div>
<div class="dialog" id="project-spend-limit-basic-modal-content" style="display: none;">
    <div class="inner">
        <p class="text" id="PSPlimit">
        </p>
        <a href="JavaScript:void{}" id="btnModelYesPSLimit" class="yes">
            <img src="~/Content/images/yes.png" alt="@eTurns.DTO.Resources.ResCommon.Yes" />
            @eTurns.DTO.Resources.ResMessage.ConfirmYes
        </a><a href="#" class="no" onclick="closeModalPSLimit()">
            <img src="~/Content/images/no.png" alt="@eTurns.DTO.Resources.ResCommon.No" />@eTurns.DTO.Resources.ResMessage.ConfirmNo
        </a>
    </div>
</div>
@*<input type="hidden" id="hdnWOIGUID" value="@ViewBag.WorkOrderGUID" />*@
<script type="text/javascript">
    var mntsGUID = '@mntsGUID',
        GuidEmpty = '@Guid.Empty',
        WOHEaderGUID = '@WOHEader.GUID',
        isCostWOI = '@isCost',
        ViewBagViewOnly = '@ViewBag.ViewOnly',
        arrItemMasterWOI = [@Html.RenderColumnsArray("ItemMaster",false, "Item")],
        logoPathItemImage = '@LogoPathItemImage',
        arrPullMasterWOI = [@Html.RenderColumnsArray("PullMaster",false, "Pull")],
        PullType = '@Convert.ToInt64(PullInsertTypeEnum.WebWo)';
    var MsgRecordDeletedSuccessfully = '@ResCommon.RecordDeletedSuccessfully';
    var MsgRecordPartialPullNotDelete = '@ResPullMaster.MsgRecordPartialPullNotDelete';
    var MsgRecordNotDeletedPartialPull = '@ResPullMaster.MsgRecordNotDeletedPartialPull';
    var MsgMaxAvailableQuantity = '@ResPullMaster.MsgMaxAvailableQuantity';
    var MsgInvalidPullValue = '@ResPullMaster.MsgInvalidPullValue';
    var MsgreqQtyToPull = '@ResPullMaster.reqQtyToPull';
    var MsgInventoryLocationMandatory = '@ResPullMaster.InventoryLocationMandatory';
    var MsgLabourItemRequiredHours = '@ResPullMaster.MsgLabourItemRequiredHours';

    var oLanguageWOItem = {
        "sLengthMenu": '@eTurns.DTO.Resources.ResGridHeader.Show' + ' _MENU_ ' + '@eTurns.DTO.Resources.ResGridHeader.Records',
        "sEmptyTable": '@eTurns.DTO.Resources.ResMessage.NoDataAvailableInTable',
        "sInfo": '@eTurns.DTO.Resources.ResMessage.ShowingNoOfEntries',
        "sInfoEmpty": '@eTurns.DTO.Resources.ResMessage.ShowingZeroEntries'
    };

    _CreateWOItem.initUrls('@Url.Content("~/Pull/UpdatePullData")', '@Url.Content("~/Master/SaveGridState")'
        , '@Url.Content("~/Master/LoadGridState")', '@Url.Content("~/Assets/CreateRequisitionForMaintenance")'
        , '@Url.Action("LoadWOItems", new { WorkOrderGUID = ViewBag.WorkOrderGUID })'
        , '@Url.Action("RequisitionList", "Consume")'
        , '@Url.Content("~/WorkOrder/WOToolCheckouts")'
        , '@Url.Content("~/Pull/PullDetails")'
        , '@Url.Content("~/WorkOrder/CreateWOItemsAjax")'
    );

    _CreateWOItem.init('@ViewBag.WorkOrderGUID');
</script>

<script type="text/javascript">
        
    $(document).ready(function () {
       
       
    });
   
</script>
