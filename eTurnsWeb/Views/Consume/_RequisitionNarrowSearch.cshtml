@model CommonDTO
@{
    if (Model == null)
    {
        //Model = new CommonDTO();
    }
    //Model.PageName = "OrderList";
    string LoadDataCount = eTurns.DTO.SiteSettingHelper.LoadNarrowDataCount != string.Empty ? Convert.ToString(eTurns.DTO.SiteSettingHelper.LoadNarrowDataCount) : "0";
}
<div class="leftopenContent" style="display: none;">
    <a class="openBtn" id="ExpandReqNarrowSearch">
        <img alt="" src="~/Content/images/open.png" />
    </a>
</div>
<div class="IteamBlock">
    <a class="closedBtn" id="CollapseReqNarrowSearch">
        <img alt="" src="~/Content/images/closed.png" />
    </a>
    <h2>
        @eTurns.DTO.Resources.ResNarrowSearch.NarrowSearchHeader2
    </h2>
    <ul id="NarrowUL">
        <li attrsortOrder="1">
            <p class="handle"><img /></p>
            <select id="OrderRequiredDate" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="OrderRequiredDateCollapse">
                </div>
            </div>
        </li>
        <li attrsortOrder="2">
            <p class="handle"><img /></p>
            <select id="RequisitionSupplier" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="RequisitionSupplierCollapse">
                </div>
            </div>
        </li>
        <li attrsortOrder="3">
            <p class="handle"><img /></p>
            <select id="ReqCustomer" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion2">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="ReqCustomerCollapse">
                </div>
            </div>
        </li>
        <li attrsortOrder="4">
            <p class="handle"><img /></p>
            <select id="ReqWorkOrder" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion3">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="ReqWorkOrderCollapse">
                </div>
            </div>
        </li>
        <li attrsortOrder="5">
            <p class="handle"><img /></p>
            <select id="ddlRequisitionStatus" multiple="multiple" name="example-basic" size="5">
                <option value="Unsubmitted">Unsubmitted</option>
                <option value="Submitted">Submitted</option>
                <option value="Approved">Approved</option>
                <option value="Closed">Closed</option>
            </select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24" />
                </a>
                <div class='dropcontent' id="ddlRequisitionStatusCollapse">
                </div>
            </div>
        </li>
        <li attrsortOrder="101">
            <p class="handle"><img /></p>
            <select id="UserCreated" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="UserCreatedCollapse">
                </div>
            </div>
        </li>
        <li attrsortOrder="102">
            <p class="handle"><img /></p>
            <select id="UserUpdated" multiple="multiple" name="example-basic" size="5"></select>
            <div class="accordion" id="accordion">
                <a href='#' class='downarrow'>
                    <img src="~/Content/images/down-arrow.gif" alt="" height="24">
                </a>
                <div class='dropcontent' id="UserUpdatedCollapse">
                </div>
            </div>
        </li>
        <li style="float: left;" attrsortOrder="103">
            <p class="handle"><img /></p>
            <div class="dateForm">
                <span class="dateText">@eTurns.DTO.Resources.ResNarrowSearch.DateCreated</span>
                <div style="float: right; margin-top: -24px; cursor: pointer;">
                    <img id="DateCreatedClear" src="~/Content/images/XClear.png" alt="@ResNarrowSearch.Clear" />
                </div>
                <div class="divLabel" style="padding-bottom: 4px;">
                    <label for="From" class="labelText">
                        @eTurns.DTO.Resources.ResNarrowSearch.From
                    </label>
                    <input id="DateCFrom" type="text" value="" name="From" data-val-length-max="20" data-val="true"
                           class="text-box" />
                    <a href="javascript:;" title="" class="datePicker" id="ancDateCFrom">
                        <img src="~/Content/images/date-picker-icon.png" alt="" title="" />
                    </a>
                </div>
                <div class="divLabel">
                    <label for="To" class="labelText">
                        @eTurns.DTO.Resources.ResNarrowSearch.To
                    </label>
                    <input id="DateCTo" type="text" value="" name="To" data-val-length-max="20" data-val="true"
                           class="text-box" />
                    <a href="javascript:;" title="" class="datePicker" id="ancDateCTo">
                        <img src="~/Content/images/date-picker-icon.png" alt="" title="" />
                    </a>
                </div>
            </div>
        </li>
        <li style="float: left;" attrsortOrder="104">
            <p class="handle"><img /></p>
            <div class="dateForm">
                <span class="dateText">@eTurns.DTO.Resources.ResNarrowSearch.DateUpdated</span>
                <div style="float: right; margin-top: -24px; cursor: pointer;">
                    <img id="DateUpdatedClear" src="~/Content/images/XClear.png" alt="@ResNarrowSearch.Clear" />
                </div>
                <div class="divLabel" style="padding-bottom: 4px;">
                    <label for="From" class="labelText">
                        @eTurns.DTO.Resources.ResNarrowSearch.From
                    </label>
                    <input id="DateUFrom" type="text" value="" name="From" data-val-length-max="20" data-val="true"
                           class="text-box" />
                    <a href="javascript:;" title="" class="datePicker" id="ancDateUFrom">
                        <img src="~/Content/images/date-picker-icon.png" alt="" title="" />
                    </a>
                </div>
                <div class="divLabel">
                    <label for="To" class="labelText">
                        @eTurns.DTO.Resources.ResNarrowSearch.To
                    </label>
                    <input id="DateUTo" type="text" value="" name="To" data-val-length-max="20" data-val="true"
                           class="text-box" />
                    <a href="javascript:;" title="" class="datePicker" id="ancDateUTo">
                        <img src="~/Content/images/date-picker-icon.png" alt="" title="" />
                    </a>
                </div>
            </div>
        </li>
        @Html.RenderUDFForNarrowSearch(Model.PageName)
    </ul>
    <input id="ReqNarroSearchClear" type="button" value="@ResNarrowSearch.Clear" class="ClearBtn" />
    @if (!Model.IsDeleted.GetValueOrDefault(false) && !Model.IsArchived.GetValueOrDefault(false))
    {
        { Html.RenderPartial("NarrowSearchSave", Model); }
    }
</div>
<style>
    .IteamBlock li {
        width: 90% !important;
    }

    .handle {
        height: 20px;
        width: 5%;
        vertical-align: middle;
        /*background-image: url("../../Content/images/Drage.png");*/
        cursor: move;
        float: right;
    }

        .handle img {
            height: 20px;
            width: 6%;
            display: block;
            position: absolute;
            background-repeat: no-repeat;
            margin: 0;
            padding: 0;
        }
</style>
<script type="text/javascript">

    var ReqRequiredDateNarroValues = '';
    var RequistionSupplierValues = '';
    var ReqWorkOrderNarroValues = '';
    var ReqCustomerNarroValues = '';
    var ddlRequisitionStatusNarroValues = '';

    var _GridStateUrl = 'RequisitionMaster_NarrowSearch';
    var _RequisitionCurrentTab = "";
    $(document).ready(function () {
        if (_RequisitionCurrentTab == '') {
            if (window.location.hash.toLowerCase() == "#unsubmitted") {
                _RequisitionCurrentTab = 'Unsubmitted';
                ddlRequisitionStatusNarroValues = "Unsubmitted";
            }
            else if (window.location.hash.toLowerCase() == "#submitted") {
                _RequisitionCurrentTab = 'Submitted';
                ddlRequisitionStatusNarroValues = "Submitted";
            }
            else if (window.location.hash.toLowerCase() == "#approved") {
                _RequisitionCurrentTab = 'Approved';
                ddlRequisitionStatusNarroValues = "Approved";
            }
            else if (window.location.hash.toLowerCase() == "#closed") {
                _RequisitionCurrentTab = 'Closed';
                ddlRequisitionStatusNarroValues = "Closed";
            }
            //else {
            //    _RequisitionCurrentTab = "All";
            //}
        }
        $(".handle").each(function () {
            $(this).find("img").attr("src", "../../Content/images/Drage.png");
        });

        $("#NarrowUL").sortable({
            handle: "> .handle",
            stop: function (event, ui) {
                var linkOrderData = $("#NarrowUL").sortable("toArray", { attribute: 'attrsortOrder' });

                $.ajax({
                    "type": "POST",
                    "url": '/Master/SaveGridState',
                    "data": { Data: JSON.stringify(linkOrderData), ListName: _GridStateUrl },
                    "dataType": "json",
                    "cache": false,
                    "async": false,
                    "success": function (json1) {
                    }
                });
            }
        });

        $.ajax({
            "type": "POST",
            "url": '/Master/LoadGridState',
            "data": { ListName: _GridStateUrl },
            "dataType": "json",
            "cache": false,
            "async": false,
            "success": function (json1) {

                if (json1.jsonData != null && json1.jsonData != '') {

                    var sorted = JSON.parse(json1.jsonData);
                    sorted = sorted.reverse();

                    sorted.forEach(function (id) {
                        $("#NarrowUL [attrsortOrder=" + parseInt(id) + "]").prependTo("#NarrowUL");
                    });
                }
            }
        });

        $('#DateCFrom').blur(function () {
        }).datepicker({
            changeMonth: true,
            changeYear: true, dateFormat: RoomDateJSFormat, date: true
        });
        $('#DateCTo').blur(function () {
        }).datepicker({
            changeMonth: true,
            changeYear: true, dateFormat: RoomDateJSFormat, date: true
        });
        $('#DateUFrom').blur(function () {
        }).datepicker({
            changeMonth: true,
            changeYear: true, dateFormat: RoomDateJSFormat, date: true
        });
        $('#DateUTo').blur(function () {
        }).datepicker({
            changeMonth: true,
            changeYear: true, dateFormat: RoomDateJSFormat, date: true
        });

        $('a.downarrow').click(function (e) {
            e.preventDefault();
            $(this).closest('.accordion').find('.dropcontent').slideToggle();
        });

        var NarrowSearchState = getCookie('NarrowSearchState');
        if (NarrowSearchState == 'Expanded') {
            CollapseReqNarrowSearch();
        }
        else {
            ExpandReqNarrowSearch();
        }

        $('.IteamBlock').css('width', '99.5%');

        FillNarrowSearchData();
        if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
            _NarrowSearchSave.isPageLoading = true;
            _NarrowSearchSave.setStaticControlValues();
        }
    });


    $('#DateCFrom,#DateCTo').change(function () {
        var DateCFromValid = true;
        var DateCToValid = true;

        try {
            $.datepicker.parseDate(RoomDateJSFormat, $('#DateCFrom').val());
            DateCFromValid = true;
        } catch (e) {
            DateCFromValid = false;
        }

        try {
            $.datepicker.parseDate(RoomDateJSFormat, $('#DateCTo').val());
            DateCToValid = true;
        } catch (e) {
            DateCToValid = false;
        }
        if (DateCFromValid && DateCToValid) {
            DoReqNarrowSearch();
        }
        else {
            if (!DateCFromValid)
                $('#DateCFrom').val('');
            if (!DateCToValid)
                $('#DateCTo').val('');
        }
    });

    $('#DateUFrom,#DateUTo').change(function () {
        var DateUFromValid = true;
        var DateUToValid = true;

        try {
            $.datepicker.parseDate(RoomDateJSFormat, $('#DateUFrom').val());
            DateUFromValid = true;
        } catch (e) {
            DateCFromValid = false;
        }

        try {
            $.datepicker.parseDate(RoomDateJSFormat, $('#DateUTo').val());
            DateUToValid = true;
        } catch (e) {
            DateUToValid = false;
        }
        if (DateUFromValid && DateUToValid) {
            DoReqNarrowSearch();
        }
        else {
            if (!DateUFromValid)
                $('#DateUFrom').val('');
            if (!DateUToValid)
                $('#DateUTo').val('');
        }
    });

    $('#ancDateCFrom').click(function () {
        $('#DateCFrom').focus();
    });
    $('#ancDateCTo').click(function () {
        $('#DateCTo').focus();
    });
    $('#ancDateUFrom').click(function () {
        $('#OrdDateUFrom').focus();
    });
    $('#ancDateUTo').click(function () {
        $('#DateUTo').focus();
    });

    $('#DateCreatedClear').click(function () {
        if ($('#DateCFrom').val() != '' || $('#DateCTo').val() != '') {
            $('#DateCFrom').val('');
            $('#DateCTo').val('');
            //NarrowSearchInGrid('');
            DoReqNarrowSearch();
        }
    });
    $('#DateUpdatedClear').click(function () {
        if ($('#DateUFrom').val() != '' || $('#DateUTo').val() != '') {
            $('#DateUFrom').val('');
            $('#DateUTo').val('');
            //NarrowSearchInGrid('');
            DoReqNarrowSearch();
        }
    });

    $('#ExpandReqNarrowSearch').click(function (e) {
        ExpandReqNarrowSearch();
    });
    $('#CollapseReqNarrowSearch').click(function (e) {
        CollapseReqNarrowSearch();
    });


    $('#ReqNarroSearchClear').click(function () {

        if ('@Session["MainFilter"]' === "True") {
            ClickFromMenu(false);
            window.location = "/Consume/RequisitionList";
            return;
        }
        if ($('#DateCFrom').val() != '') $('#DateCFrom').val('');
        if ($('#DateCTo').val() != '') $('#DateCTo').val('');
        if ($('#DateUFrom').val() != '') $('#DateUFrom').val('');
        if ($('#DateUTo').val() != '') $('#DateUTo').val('');

        if (typeof ($("#UserCreated").multiselect("getChecked").length) != undefined && $("#UserCreated").multiselect("getChecked").length > 0) {
            $("#UserCreated").multiselect("uncheckAll");
            $("#UserCreatedCollapse").html('');
        }

        if (typeof ($("#UserUpdated").multiselect("getChecked").length) != undefined && $("#UserUpdated").multiselect("getChecked").length > 0) {
            $("#UserUpdated").multiselect("uncheckAll");
            $("#UserUpdatedCollapse").html('');
        }

        if (typeof ($("#OrderRequiredDate").multiselect("getChecked").length) != undefined && $("#OrderRequiredDate").multiselect("getChecked").length > 0) {
            $("#OrderRequiredDate").multiselect("uncheckAll");
            $("#OrderRequiredDateCollapse").html('');
        }

        if (typeof ($("#ReqCustomer").multiselect("getChecked").length) != undefined && $("#ReqCustomer").multiselect("getChecked").length > 0) {
            $("#ReqCustomer").multiselect("uncheckAll");
            $("#ReqCustomerCollapse").html('');
        }

        if (typeof ($("#ddlRequisitionStatus").multiselect("getChecked").length) != undefined && $("#ddlRequisitionStatus").multiselect("getChecked").length > 0) {
            $("#ddlRequisitionStatus").multiselect("uncheckAll");
            $("#ddlRequisitionStatusCollapse").html('');
        }

        if (typeof ($("#RequisitionSupplier").multiselect("getChecked").length) != undefined && $("#RequisitionSupplier").multiselect("getChecked").length > 0) {
            $("#RequisitionSupplier").multiselect("uncheckAll");
            $("#RequisitionSupplierCollapse").html('');
        }
        if (typeof ($("#ReqWorkOrder").multiselect("getChecked").length) != undefined && $("#ReqWorkOrder").multiselect("getChecked").length > 0) {
            $("#ReqWorkOrder").multiselect("uncheckAll");
            $("#ReqWorkOrderCollapse").html('');
        }

        //UDFs
        $("select[name='udflist']").each(function (index) {
            if (typeof ($(this).multiselect("getChecked").length) != undefined && $(this).multiselect("getChecked").length > 0) {
                var UDFUniqueID = this.getAttribute('UID');
                $(this).multiselect("uncheckAll");
            }
        });

        if ($('#txtReqfilter').val() != '') $('#txtReqfilter').val('');
        $('input[type="search"]').val('').trigger('keyup');
        TempNarrow = '';
        IsRetainNarrow = false;

        ReqRequiredDateNarroValues = '';
        RequistionSupplierValues = '';
        ReqWorkOrderNarroValues = '';
        ReqSupplierNarroValues = '';
        ddlRequisitionStatusNarroValues = '';
        $('#myDataTable tbody tr').removeClass('row_selected');
        ShowHideChangeLog();
        DoReqNarrowSearch();
    });

    function clearSearchFilterIfNotInFocus() {
        if ($(document.activeElement).attr('id') != 'txtReqfilter')
            $("#txtReqfilter").val('');
    }

    function ExpandReqNarrowSearch() {
        var w = $('.IteamBlock').css("width");
        $('.IteamBlock').show();
        $('.IteamBlock').stop().animate({
            width: "99.5%"
        }, 0, function () {
            $('.userContent').css({ "width": "80.5%", "margin": "0" });
            $('#myDataTable_length').css({ "left": "0px" });
            $('#myDataTable_paginate').css({ "left": "145px" });
            $('.leftopenContent').css({ "display": "none" });
            setCookie('NarrowSearchState', 'Collapsed');
        });
        $('#divNarrowSearch').css('width', '18%');
    }

    function CollapseReqNarrowSearch() {
        $('.IteamBlock').stop().animate({
            width: "0%"
        }, 0, function () {
            $('.IteamBlock').hide();
            $('.userContent').css({ "width": "98.5%", margin: "0 0.4% 1%" });
            var Left = $('.viewBlock').css("width");
            $('#myDataTable_length').css({ "left": Left });
            var LeftW = 145 + parseInt(Left);
            $('#myDataTable_paginate').css({ "left": LeftW + 'px' });
            oTable.fnAdjustColumnSizing();
            $('.leftopenContent').css({ "display": "" });
            setCookie('NarrowSearchState', 'Expanded');
        });
        $('#divNarrowSearch').css('width', '0%');
    }

    function FillNarrowSearchData() {
        var _IsArchived = false;
        var _IsDeleted = false;

        if (typeof ($('#IsArchivedRecords')) != "undefined")
            _IsArchived = $('#IsArchivedRecords').is(':checked');

        if (typeof ($('#IsDeletedRecords')) != "undefined")
            _IsDeleted = $('#IsDeletedRecords').is(':checked');

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: '@Model.PageName', TextFieldName: 'CreatedBy', IsArchived: _IsArchived, IsDeleted: _IsDeleted, RequisitionCurrentTab: _RequisitionCurrentTab },
            dataType: 'json',
            async: true,
            success: function (response) {
                var s = '';
                if (response.DDData != null) {
                    $.each(response.DDData, function (i, val) {
                        var ArrData = i.toString().split('[###]');
                        s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + val + ')' + '</option>';
                    });
                }

                //Destroy widgets before reapplying the filter
                $("#UserCreated").empty();
                $("#UserCreated").multiselect('destroy');
                $("#UserCreated").multiselectfilter('destroy');

                $("#UserCreated").append(s);
                $("#UserCreated").multiselect
                    (
                        {
                            noneSelectedText: '@eTurns.DTO.Resources.ResNarrowSearch.UserCreatedby',
                            selectedList: 5,
                            selectedText: function (numChecked, numTotal, checkedItems) {
                                return '@eTurns.DTO.Resources.ResNarrowSearch.UserCreatedby' + ' ' + numChecked + ' ' + '@eTurns.DTO.Resources.ResNarrowSearch.selected';
                            },
                            open: function (event, ui) {

                            }
                        },
                        {
                            checkAll: function (ui) {
                                $("#UserCreatedCollapse").html('');
                                for (var i = 0; i <= ui.target.length - 1; i++) {
                                    if ($("#UserCreatedCollapse").text().indexOf(ui.target[i].text) == -1) {
                                        $("#UserCreatedCollapse").append("<span>" + ui.target[i].text + "</span>");
                                    }
                                }
                                $("#UserCreatedCollapse").show();
                            }
                        }
                    )
                    .unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                    .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                        if (ui.checked) {
                            if ($("#UserCreatedCollapse").text().indexOf(ui.text) == -1) {
                                $("#UserCreatedCollapse").append("<span>" + ui.text + "</span>");
                            }
                        }
                        else {
                            if (ui.checked == undefined) {
                                $("#UserCreatedCollapse").html('');
                            }
                            else if (!ui.checked) {
                                var text = $("#UserCreatedCollapse").html();
                                text = text.replace("<span>" + ui.text + "</span>", '');
                                $("#UserCreatedCollapse").html(text);
                            }
                            else
                                $("#UserCreatedCollapse").html('');
                        }
                        UserCreatedNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return input.value;
                        });
                        if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                            _NarrowSearchSave.objSearch.UserCreated = UserCreatedNarroValues;
                        }
                        if ($("#UserCreatedCollapse").text().trim() != '')
                            $("#UserCreatedCollapse").show();
                        else
                            $("#UserCreatedCollapse").hide();


                        if ($("#UserCreatedCollapse").find('span').length <= 2) {
                            $("#UserCreatedCollapse").scrollTop(0).height(50);
                        }
                        else {
                            $("#UserCreatedCollapse").scrollTop(0).height(100);
                        }
                        DoReqNarrowSearch();
                    }).multiselectfilter();
                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                    _NarrowSearchSave.setControlValue("UserCreated");
                }
            },
            error: function (response) {
                // through errror message
            }
        });

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: '@Model.PageName', TextFieldName: 'LastUpdatedBy', IsArchived: _IsArchived, IsDeleted: _IsDeleted, RequisitionCurrentTab: _RequisitionCurrentTab },
            dataType: 'json',
            async: true,
            success: function (response) {
                var s = '';
                if (response.DDData != null) {
                    $.each(response.DDData, function (i, val) {
                        var ArrData = i.toString().split('[###]');
                        s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + val + ')' + '</option>';
                    });
                }

                //Destroy widgets before reapplying the filter
                $("#UserUpdated").empty();
                $("#UserUpdated").multiselect('destroy');
                $("#UserUpdated").multiselectfilter('destroy');

                $("#UserUpdated").append(s);
                $("#UserUpdated").multiselect
                    (
                        {
                            noneSelectedText: '@eTurns.DTO.Resources.ResNarrowSearch.UserUpdatedby', selectedList: 5,
                            selectedText: function (numChecked, numTotal, checkedItems) {
                                return '@eTurns.DTO.Resources.ResNarrowSearch.UserUpdatedby' + ' ' + numChecked + ' ' + '@eTurns.DTO.Resources.ResNarrowSearch.selected';
                            }
                        },
                        {
                            checkAll: function (ui) {
                                $("#UserUpdatedCollapse").html('');
                                for (var i = 0; i <= ui.target.length - 1; i++) {
                                    if ($("#UserUpdatedCollapse").text().indexOf(ui.target[i].text) == -1) {
                                        $("#UserUpdatedCollapse").append("<span>" + ui.target[i].text + "</span>");
                                    }
                                }
                                $("#UserUpdatedCollapse").show();
                            }
                        }
                    )
                    .unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                    .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                        if (ui.checked) {
                            if ($("#UserUpdatedCollapse").text().indexOf(ui.text) == -1) {
                                $("#UserUpdatedCollapse").append("<span>" + ui.text + "</span>");
                            }
                        }
                        else {
                            if (ui.checked == undefined) {
                                $("#UserUpdatedCollapse").html('');
                            }
                            else if (!ui.checked) {
                                var text = $("#UserUpdatedCollapse").html();
                                text = text.replace("<span>" + ui.text + "</span>", '');
                                $("#UserUpdatedCollapse").html(text);
                            }
                            else
                                $("#UserUpdatedCollapse").html('');
                        }
                        UserUpdatedNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return input.value;
                        })
                        if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                            _NarrowSearchSave.objSearch.UserUpdated = UserUpdatedNarroValues;
                        }
                        if ($("#UserUpdatedCollapse").text().trim() != '')
                            $("#UserUpdatedCollapse").show();
                        else
                            $("#UserUpdatedCollapse").hide();

                        if ($("#UserUpdatedCollapse").find('span').length <= 2) {
                            $("#UserUpdatedCollapse").scrollTop(0).height(50);
                        }
                        else {
                            $("#UserUpdatedCollapse").scrollTop(0).height(100);
                        }
                        if (!isFromNarrowSearchClear) {
                            clearGlobalIfNotInFocus();
                            DoReqNarrowSearch();
                        }

                    }).multiselectfilter();
                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                    _NarrowSearchSave.setControlValue("UserUpdated");
                }
            },
            error: function (response) {
                // through errror message
            }
        });
        var UDFObject;
        $("select[name='udflist']").each(function (index) {

            var UDFUniqueID = this.getAttribute('UID');

            $.ajax({
                'url': '/Master/GetUDFDDData',
                data: { TableName: '@Model.PageName', UDFName: this.id, UDFUniqueID: UDFUniqueID, IsArchived: _IsArchived, IsDeleted: _IsDeleted, RequisitionCurrentTab: _RequisitionCurrentTab},
                success: function (response) {
                    var s = '';
                    if (response.DDData != null) {
                        $.each(response.DDData, function (UDFVal, ValCount) {
                            s += '<option value="' + UDFVal + '">' + UDFVal + ' (' + ValCount + ')' + '</option>';
                        });
                    }

                    var UDFColumnNameTemp = response.UDFColName.toString().replace("_dd", "");

                    //Destroy widgets before reapplying the filter

                    $('[id="' + response.UDFColName + '"]').empty();
                    $('[id="' + response.UDFColName + '"]').multiselect('destroy');
                    $('[id="' + response.UDFColName + '"]').multiselectfilter('destroy');
                    $('[id="' + response.UDFColName + '"]').append(s);

                    var currentDataCount = $('select#' + response.UDFColName + ' option').length;
                    if (parseInt(currentDataCount) < parseInt('@LoadDataCount')) {
                        $(".allpullns" + UDFUniqueID + "").hide();
                        $(".morepullns" + UDFUniqueID + "").hide();

                        $(".alltoolns" + UDFUniqueID + "").hide();
                        $(".moretoolns" + UDFUniqueID + "").hide();
                    }

                    $('[id="' + response.UDFColName + '"]').multiselect
                        (
                            {
                                noneSelectedText: UDFColumnNameTemp, selectedList: 5,
                                selectedText: function (numChecked, numTotal, checkedItems) {
                                    return UDFColumnNameTemp + ' ' + numChecked + ' ' + '@eTurns.DTO.Resources.ResNarrowSearch.selected';
                                }
                            },
                            {
                                checkAll: function (ui) {
                                    var CollapseObject = $('#' + UDFUniqueID + 'Collapse')
                                    $(CollapseObject).html('');
                                    for (var i = 0; i <= ui.target.length - 1; i++) {
                                        if ($(CollapseObject).text().indexOf(ui.target[i].text) == -1) {
                                            $(CollapseObject).append("<span>" + ui.target[i].text + "</span>");
                                        }
                                    }
                                    $(CollapseObject).show();
                                }
                            }
                        )
                        .unbind("multiselectclick multiselectcheckall multiselectuncheckall multiselectloadmore multiselectloadall")
                        .bind("multiselectclick multiselectcheckall multiselectuncheckall multiselectloadmore multiselectloadall", function (event, ui) {

                            @*if (event.type == 'multiselectloadmore' || event.type == 'multiselectloadall') {

                                var currentDataCount = $("select[id='" + this.id + "'] option").length; //$('select#' + this.id + ' option').length;
                                var _selectedPUDF = $.map($(this).multiselect("getChecked"), function (input) {
                                    return input.value;
                                });
                                var _loaddataCount = parseInt(currentDataCount) + parseInt('@LoadDataCount');
                                if (event.type == 'multiselectloadall') {
                                    _loaddataCount = -1;
                                    $(".allpullns" + UDFUniqueID + "").hide();
                                    $(".morepullns" + UDFUniqueID + "").hide();

                                    $(".alltoolns" + UDFUniqueID + "").hide();
                                    $(".moretoolns" + UDFUniqueID + "").hide();
                                }
                                $.ajax({
                                    'url': '/Master/GetUDFDDData',
                                    data: { TableName: '@Model.PageName', UDFName: this.id, UDFUniqueID: UDFUniqueID, IsArchived: _IsArchived, IsDeleted: _IsDeleted, RequisitionCurrentTab: _RequisitionCurrentTab, LoadDataCount: _loaddataCount },
                                    success: function (responseNew) {

                                        var s = '';
                                        if (responseNew.DDData != null) {
                                            $.each(responseNew.DDData, function (UDFVal, ValCount) {
                                                if ($.inArray(UDFVal, _selectedPUDF) > -1) {
                                                    s += '<option selected="selected" value="' + UDFVal + '">' + UDFVal + ' (' + ValCount + ')' + '</option>';
                                                }
                                                else {
                                                    s += '<option value="' + UDFVal + '">' + UDFVal + ' (' + ValCount + ')' + '</option>';
                                                }
                                            });

                                        }

                                        //Destroy widgets before reapplying the filter
                                        $('[id="' + responseNew.UDFColName + '"]').empty();
                                        $('[id="' + responseNew.UDFColName + '"]').append(s);
                                        $('[id="' + responseNew.UDFColName + '"]').multiselect("refresh");
                                        $('[id="' + responseNew.UDFColName + '"]').multiselectfilter("refresh");

                                        var currentNewDataCount = $("select[id='" + responseNew.UDFColName + "'] option").length; //$('select#' + responseNew.UDFColName + ' option').length;
                                        if (parseInt(currentDataCount) >= parseInt(currentNewDataCount)) {
                                            $(".allpullns" + UDFUniqueID + "").hide();
                                            $(".morepullns" + UDFUniqueID + "").hide();

                                            $(".alltoolns" + UDFUniqueID + "").hide();
                                            $(".moretoolns" + UDFUniqueID + "").hide();
                                        }

                                    },
                                    error: function (responseNew) {
                                        // through errror message
                                    }
                                });

                            }
                            else {*@
                                var CollapseObject = $('#' + UDFUniqueID + 'Collapse')
                                if (ui.checked) {
                                    if ($(CollapseObject).text().indexOf(ui.text) == -1) {
                                        $(CollapseObject).append("<span>" + ui.text + "</span>");
                                    }
                                }
                                else {
                                    if (ui.checked == undefined) {
                                        $(CollapseObject).html('');
                                    }
                                    else if (!ui.checked) {
                                        var text = $(CollapseObject).html();
                                        text = text.replace("<span>" + ui.text + "</span>", '');
                                        $(CollapseObject).html(text);
                                    }
                                    else
                                        $(CollapseObject).html('');
                                }
                            /*}*/
                            if (UDFUniqueID == "UDF1") {
                                UserUDF1NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                                    return escape(input.value);
                                })
                                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                                    _NarrowSearchSave.objSearch.UDF1 = UserUDF1NarrowValues;
                                }
                            }
                            else if (UDFUniqueID == "UDF2") {
                                UserUDF2NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                                    return escape(input.value);
                                })
                                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                                    _NarrowSearchSave.objSearch.UDF2 = UserUDF2NarrowValues;
                                }
                            }
                            else if (UDFUniqueID == "UDF3") {
                                UserUDF3NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                                    return escape(input.value);

                                })
                                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                                    _NarrowSearchSave.objSearch.UDF3 = UserUDF3NarrowValues;
                                }
                            }
                            else if (UDFUniqueID == "UDF4") {
                                UserUDF4NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                                    return escape(input.value);
                                })
                                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                                    _NarrowSearchSave.objSearch.UDF4 = UserUDF4NarrowValues;
                                }
                            }
                            else if (UDFUniqueID == "UDF5") {
                                UserUDF5NarrowValues = $.map($(this).multiselect("getChecked"), function (input) {
                                    return escape(input.value);
                                })
                                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                                    _NarrowSearchSave.objSearch.UDF5 = UserUDF5NarrowValues;
                                }
                            }
                            if ($(CollapseObject).text().trim() != '')
                                $(CollapseObject).show();
                            else
                                $(CollapseObject).hide();

                            if ($(CollapseObject).find('span').length <= 2) {
                                $(CollapseObject).scrollTop(0).height(50);
                            }
                            else {
                                $(CollapseObject).scrollTop(0).height(100);
                            }

                            if (event.type != 'multiselectloadmore' && event.type != 'multiselectloadall' && !isFromNarrowSearchClear) {
                                clearGlobalIfNotInFocus();
                                DoReqNarrowSearch();
                            }
                        }).multiselectfilter();

                    $('[id="' + response.UDFColName + '"]').multiselect("refresh");
                    $('[id="' + response.UDFColName + '"]').multiselectfilter("refresh");
                    var UDFUniqueIDVal = _Common.getQueryStringVal(this.url, "UDFUniqueID");
                    if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                        _NarrowSearchSave.setControlValue(UDFUniqueIDVal);
                    }

                },
                error: function (response) {
                }
            });
        });

        $.ajax({
            'url': '/Master/GetRequisitionRequiredDate',
            data: { TableName: 'OrderRequiredDate', TextFieldName: 'OrderRequiredDateText' },
            dataType: 'json',
            async: true,
            success: function (response) {
                var s = '';
                var gridsearch = oTable.dataTableSettings[0].oLoadedState.oSearch.sSearch;
                var arrofvalues = GetValuefromsstring(gridsearch);
                $.each(response.DDData, function (i, val) {
                    s += '<option value="' + val.ID + '">' + val.Text + '</option>';
                });

                //Destroy widgets before reapplying the filter
                $("#OrderRequiredDate").empty();
                $("#OrderRequiredDate").multiselect('destroy');
                $("#OrderRequiredDate").multiselectfilter('destroy');

                $("#OrderRequiredDate").append(s);

                $("#OrderRequiredDate").multiselect
                    (
                        {
                            noneSelectedText: '@eTurns.DTO.ResRequisitionDetails.RequiredDate', selectedList: 5,
                            selectedText: function (numChecked, numTotal, checkedItems) {
                                return '@eTurns.DTO.ResRequisitionDetails.RequiredDate' + ' ' + numChecked + ' ' + '@eTurns.DTO.Resources.ResNarrowSearch.selected';
                            }
                        },
                        {
                            checkAll: function (ui) {
                                $("#OrderRequiredDateCollapse").html('');
                                for (var i = 0; i <= ui.target.length - 1; i++) {
                                    if ($("#OrderRequiredDateCollapse").text().indexOf(ui.target[i].text) == -1) {
                                        $("#OrderRequiredDateCollapse").append("<span>" + ui.target[i].text + "</span>");
                                    }
                                }
                                $("#OrderRequiredDateCollapse").show();
                            }
                        }
                    )
                    .unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                    .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                        if (ui.checked) {
                            if ($("#OrderRequiredDateCollapse").text().indexOf(ui.text) == -1) {
                                $("#OrderRequiredDateCollapse").append("<span>" + ui.text + "</span>");
                            }
                        }
                        else {
                            if (ui.checked == undefined) {
                                $("#OrderRequiredDateCollapse").html('');
                            }
                            else if (!ui.checked) {
                                var text = $("#OrderRequiredDateCollapse").html();
                                if (text != null && text != '') {
                                    text = text.trim().replace("&gt;", '>').replace("&lt;", '<');
                                }
                                text = text.replace("<span>" + ui.text + "</span>", '');
                                $("#OrderRequiredDateCollapse").html(text);
                            }
                            else
                                $("#OrderRequiredDateCollapse").html('');
                        }
                        ReqRequiredDateNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return input.value;
                        })
                        if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                            _NarrowSearchSave.objSearch.OrderRequiredDate = ReqRequiredDateNarroValues;
                        }

                        if ($("#OrderRequiredDateCollapse").text().trim() != '')
                            $("#OrderRequiredDateCollapse").show();
                        else
                            $("#OrderRequiredDateCollapse").hide();


                        if ($("#OrderRequiredDateCollapse").find('span').length <= 2) {
                            $("#OrderRequiredDateCollapse").scrollTop(0).height(50);
                        }
                        else {
                            $("#OrderRequiredDateCollapse").scrollTop(0).height(100);
                        }
                        DoReqNarrowSearch();


                    }).multiselectfilter();
                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                    _NarrowSearchSave.setControlValue("OrderRequiredDate");
                }
            },
            error: function (response) {
                // through errror message
            }
        });
        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: '@Model.PageName', TextFieldName: 'Supplier', IsArchived: _IsArchived, IsDeleted: _IsDeleted, RequisitionCurrentTab: _RequisitionCurrentTab },
            dataType: 'json',
            async: true,
            success: function (response) {
                var s = '';
                $.each(response.DDData, function (ValData, ValCount) {
                    var ArrData = ValData.toString().split('[###]');
                    s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                });
                //Destroy widgets before reapplying the filter
                $("#RequisitionSupplier").empty();
                $("#RequisitionSupplier").multiselect('destroy');
                $("#RequisitionSupplier").multiselectfilter('destroy');

                $("#RequisitionSupplier").append(s);
                $("#RequisitionSupplier").multiselect
                    (
                        {
                            noneSelectedText: '@eTurns.DTO.Resources.ResNarrowSearch.Supplier', selectedList: 5,
                            selectedText: function (numChecked, numTotal, checkedItems) {
                                return '@eTurns.DTO.Resources.ResNarrowSearch.Supplier' + ' ' + numChecked + ' ' + '@eTurns.DTO.Resources.ResNarrowSearch.selected';
                            }
                        },
                        {
                            checkAll: function (ui) {
                                $("#RequisitionSupplierCollapse").html('');
                                for (var i = 0; i <= ui.target.length - 1; i++) {
                                    if ($("#RequisitionSupplierCollapse").text().indexOf(ui.target[i].text) == -1) {
                                        $("#RequisitionSupplierCollapse").append("<span>" + ui.target[i].text + "</span>");
                                    }
                                }
                                $("#RequisitionSupplierCollapse").show();
                            }
                        }
                    )
                    .unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                    .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                        if (ui.checked) {
                            if ($("#RequisitionSupplierCollapse").text().indexOf(ui.text) == -1) {
                                $("#RequisitionSupplierCollapse").append("<span>" + ui.text + "</span>");
                            }
                        }
                        else {
                            if (ui.checked == undefined) {
                                $("#RequisitionSupplierCollapse").html('');
                            }
                            else if (!ui.checked) {
                                var text = $("#RequisitionSupplierCollapse").html();
                                text = text.replace("<span>" + ui.text + "</span>", '');
                                $("#RequisitionSupplierCollapse").html(text);
                            }
                            else
                                $("#RequisitionSupplierCollapse").html('');
                        }
                        RequistionSupplierValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return input.value;
                        })                        
                        if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                            _NarrowSearchSave.objSearch.RequisitionSupplier = RequistionSupplierValues;
                        }
                        if ($("#RequisitionSupplierCollapse").text().trim() != '')
                            $("#RequisitionSupplierCollapse").show();
                        else
                            $("#RequisitionSupplierCollapse").hide();


                        if ($("#RequisitionSupplierCollapse").find('span').length <= 2) {
                            $("#RequisitionSupplierCollapse").scrollTop(0).height(50);
                        }
                        else {
                            $("#RequisitionSupplierCollapse").scrollTop(0).height(100);
                        }
                        DoReqNarrowSearch();

                    }).multiselectfilter();
                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                    _NarrowSearchSave.setControlValue("RequisitionSupplier");
                }
            },
            error: function (response) {
                // through errror message
            }
        });

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: '@Model.PageName', TextFieldName: 'WorkOrder', IsArchived: _IsArchived, IsDeleted: _IsDeleted, RequisitionCurrentTab: _RequisitionCurrentTab },
            dataType: 'json',
            async: true,
            success: function (response) {
                var s = '';
                $.each(response.DDData, function (ValData, ValCount) {
                    var ArrData = ValData.toString().split('[###]');
                    s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                });

                //Destroy widgets before reapplying the filter
                $("#ReqWorkOrder").empty();
                $("#ReqWorkOrder").multiselect('destroy');
                $("#ReqWorkOrder").multiselectfilter('destroy');

                $("#ReqWorkOrder").append(s);
                $("#ReqWorkOrder").multiselect
                    (
                        {
                            noneSelectedText: '@eTurns.DTO.Resources.ResNarrowSearch.WorkOrder' , selectedList: 5,
                            selectedText: function (numChecked, numTotal, checkedItems) {
                                return '@eTurns.DTO.Resources.ResNarrowSearch.WorkOrder' + ' ' + numChecked + ' ' + '@eTurns.DTO.Resources.ResNarrowSearch.selected';
                            }
                        },
                        {
                            checkAll: function (ui) {
                                $("#ReqWorkOrderCollapse").html('');
                                for (var i = 0; i <= ui.target.length - 1; i++) {
                                    if ($("#ReqWorkOrderCollapse").text().indexOf(ui.target[i].text) == -1) {
                                        $("#ReqWorkOrderCollapse").append("<span>" + ui.target[i].text + "</span>");
                                    }
                                }
                                $("#ReqWorkOrderCollapse").show();
                            }
                        }
                    )
                    .unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                    .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                        if (ui.checked) {
                            if ($("#ReqWorkOrderCollapse").text().indexOf(ui.text) == -1) {
                                $("#ReqWorkOrderCollapse").append("<span>" + ui.text + "</span>");
                            }
                        }
                        else {
                            if (ui.checked == undefined) {
                                $("#ReqWorkOrderCollapse").html('');
                            }
                            else if (!ui.checked) {
                                var text = $("#ReqWorkOrderCollapse").html();
                                text = text.replace("<span>" + ui.text + "</span>", '');
                                $("#ReqWorkOrderCollapse").html(text);
                            }
                            else
                                $("#ReqWorkOrderCollapse").html('');
                        }
                        ReqWorkOrderNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return input.value;
                        })
                        if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                            _NarrowSearchSave.objSearch.ReqWorkOrder = ReqWorkOrderNarroValues;
                        }
                        if ($("#ReqWorkOrderCollapse").text().trim() != '')
                            $("#ReqWorkOrderCollapse").show();
                        else
                            $("#ReqWorkOrderCollapse").hide();


                        if ($("#ReqWorkOrderCollapse").find('span').length <= 2) {
                            $("#ReqWorkOrderCollapse").scrollTop(0).height(50);
                        }
                        else {
                            $("#ReqWorkOrderCollapse").scrollTop(0).height(100);
                        }
                        DoReqNarrowSearch();

                    }).multiselectfilter();
                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                    _NarrowSearchSave.setControlValue("ReqWorkOrder");
                }
            },
            error: function (response) {
                // through errror message
            }
        });

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: '@Model.PageName', TextFieldName: 'Customer', IsArchived: _IsArchived, IsDeleted: _IsDeleted, RequisitionCurrentTab: _RequisitionCurrentTab },
            dataType: 'json',
            async: true,
            success: function (response) {
                var s = '';
                $.each(response.DDData, function (ValData, ValCount) {
                    var ArrData = ValData.toString().split('[###]');
                    s += '<option value="' + ArrData[1] + '">' + ArrData[0] + ' (' + ValCount + ')' + '</option>';
                });

                //Destroy widgets before reapplying the filter
                $("#ReqCustomer").empty();
                $("#ReqCustomer").multiselect('destroy');
                $("#ReqCustomer").multiselectfilter('destroy');

                $("#ReqCustomer").append(s);
                $("#ReqCustomer").multiselect
                    (
                        {
                            noneSelectedText: '@eTurns.DTO.ResCustomer.Customer', selectedList: 5,
                            selectedText: function (numChecked, numTotal, checkedItems) {
                                return '@eTurns.DTO.ResCustomer.Customer' + numChecked + ' ' + '@eTurns.DTO.Resources.ResNarrowSearch.selected';
                            }
                        },
                        {
                            checkAll: function (ui) {
                                $("#ReqCustomerCollapse").html('');
                                for (var i = 0; i <= ui.target.length - 1; i++) {
                                    if ($("#ReqCustomerCollapse").text().indexOf(ui.target[i].text) == -1) {
                                        $("#ReqCustomerCollapse").append("<span>" + ui.target[i].text + "</span>");
                                    }
                                }
                                $("#ReqCustomerCollapse").show();
                            }
                        }
                    )
                    .unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                    .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {
                        if (ui.checked) {
                            if ($("#ReqCustomerCollapse").text().indexOf(ui.text) == -1) {
                                $("#ReqCustomerCollapse").append("<span>" + ui.text + "</span>");
                            }
                        }
                        else {
                            if (ui.checked == undefined) {
                                $("#ReqCustomerCollapse").html('');
                            }
                            else if (!ui.checked) {
                                var text = $("#ReqCustomerCollapse").html();
                                text = text.replace("<span>" + ui.text + "</span>", '');
                                $("#ReqCustomerCollapse").html(text);
                            }
                            else
                                $("#ReqCustomerCollapse").html('');
                        }
                        ReqCustomerNarroValues = $.map($(this).multiselect("getChecked"), function (input) {
                            return input.value;
                        })
                        if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                            _NarrowSearchSave.objSearch.ReqCustomer = ReqCustomerNarroValues;
                        }
                        if ($("#ReqCustomerCollapse").text().trim() != '')
                            $("#ReqCustomerCollapse").show();
                        else
                            $("#ReqCustomerCollapse").hide();


                        if ($("#ReqCustomerCollapse").find('span').length <= 2) {
                            $("#ReqCustomerCollapse").scrollTop(0).height(50);
                        }
                        else {
                            $("#ReqCustomerCollapse").scrollTop(0).height(100);
                        }
                        DoReqNarrowSearch();

                    }).multiselectfilter();
                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                    _NarrowSearchSave.setControlValue("ReqCustomer");
                }
            },
            error: function (response) {
                // through errror message
            }
        });

        $.ajax({
            'url': '/Master/GetNarrowDDData',
            data: { TableName: '@Model.PageName', TextFieldName: 'RequisitionStatus', IsArchived: _IsArchived, IsDeleted: _IsDeleted, RequisitionCurrentTab: _RequisitionCurrentTab },
            dataType: 'json',
            async: true,
            success: function (response) {
                var s = '';
                $.each(response.DDData, function (ValData, val) {
                    var str = ValData.toString().split('[###]');
                    if (str[1] == "Unsubmitted")
                        s += '<option value="Unsubmitted">Unsubmitted (' + val + ')</option>';
                    if (str[1] == "Submitted")
                        s += '<option value="Submitted">Submitted (' + val + ')</option>';
                    if (str[1] == "Approved")
                        s += '<option value="Approved">Approved (' + val + ')</option>';
                    if (str[1] == "Closed")
                        s += '<option value="Closed">Closed (' + val + ')</option>';
                });

                //Destroy widgets before reapplying the filter
                $("#ddlRequisitionStatus").empty();
                $("#ddlRequisitionStatus").multiselect('destroy');
                $("#ddlRequisitionStatus").multiselectfilter('destroy');

                $("#ddlRequisitionStatus").append(s);
                $("#ddlRequisitionStatus")[0].selectedIndex = -1;
                $("#ddlRequisitionStatus").multiselect("refresh");
                $("#ddlRequisitionStatus").multiselectfilter("refresh");
                $("#ddlRequisitionStatus").multiselect
                    (
                        {
                            noneSelectedText: '@eTurns.DTO.ResRequisitionMaster.RequisitionStatus', selectedList: 5,
                            selectedText: function (numChecked, numTotal, checkedItems) {
                                return '@eTurns.DTO.ResRequisitionMaster.RequisitionStatus' + ' ' + numChecked + ' ' + '@eTurns.DTO.Resources.ResNarrowSearch.selected';
                            }
                        },
                        {
                            checkAll: function (ui) {
                                $("#ddlRequisitionStatusCollapse").html('');
                                for (var i = 0; i <= ui.target.length - 1; i++) {
                                    if ($("#ddlRequisitionStatusCollapse").text().indexOf(ui.target[i].text) == -1) {
                                        $("#ddlRequisitionStatusCollapse").append("<span>" + ui.target[i].text + "</span>");
                                    }
                                }
                                $("#ddlRequisitionStatusCollapse").show();
                            }
                        }
                    )
                    .unbind("multiselectclick multiselectcheckall multiselectuncheckall")
                    .bind("multiselectclick multiselectcheckall multiselectuncheckall", function (event, ui) {


                        if (ui.checked) {
                            if ($("#ddlRequisitionStatusCollapse").text().indexOf(ui.text) == -1) {
                                $("#ddlRequisitionStatusCollapse").append("<span>" + ui.text + "</span>");
                            }
                        }
                        else {
                            if (ui.checked == undefined) {
                                $("#ddlRequisitionStatusCollapse").html('');
                            }
                            else if (!ui.checked) {
                                var text = $("#ddlRequisitionStatusCollapse").html();
                                text = text.replace("<span>" + ui.text + "</span>", '');
                                $("#ddlRequisitionStatusCollapse").html(text);
                            }
                            else
                                $("#ddlRequisitionStatusCollapse").html('');
                        }
                        ddlRequisitionStatusNarroValues = $.map($(this).multiselect("getChecked"), function (input) {

                            return input.value;
                        })
                        if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                            _NarrowSearchSave.objSearch.ddlRequisitionStatus = ddlRequisitionStatusNarroValues;
                        }
                        if ($("#ddlRequisitionStatusCollapse").text().trim() != '')
                            $("#ddlRequisitionStatusCollapse").show();
                        else
                            $("#ddlRequisitionStatusCollapse").hide();


                        if ($("#ddlRequisitionStatusCollapse").find('span').length <= 2) {
                            $("#ddlRequisitionStatusCollapse").scrollTop(0).height(50);
                        }
                        else {
                            $("#ddlRequisitionStatusCollapse").scrollTop(0).height(100);
                        }
                        DoReqNarrowSearch();
                    }).multiselectfilter();
                if ('@Model.IsDeleted.GetValueOrDefault(false)' == 'False' && '@Model.IsArchived.GetValueOrDefault(false)' == 'False') {
                    _NarrowSearchSave.setControlValue("ddlRequisitionStatus");
                }
            },
            error: function (response) {
                // through errror message
            }
            });

    }
    function DoReqNarrowSearch() {
        var narrowSearchFields = '';
        var narrowSearchValues = '';
        var narrowSearchItem = '';

        eraseCookieforshift("selectstartindex");
        eraseCookieforshift("selectendindex");
        eraseCookieforshift("finalselectedarray");


        if (UserCreatedNarroValues != undefined && UserCreatedNarroValues.length > 0) {
            //narrowSearchItem += "[###]CreatedBy#" + UserCreatedNarroValues;
            narrowSearchFields += "CreatedBy" + ",";
            narrowSearchValues += UserCreatedNarroValues + "@@";
        }
        else if (ScheduleCreatedByNarroValues != undefined && ScheduleCreatedByNarroValues.length > 0) {
            narrowSearchFields += "CreatedBy" + ",";
            narrowSearchValues += ScheduleCreatedByNarroValues + "@@";
        }
        else {
            narrowSearchFields += "CreatedBy" + ",";
            narrowSearchValues += "@@";
        }
        ////////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUpdatedNarroValues != undefined && UserUpdatedNarroValues.length > 0) {
            //narrowSearchItem += "[###]UpdatedBy#" + UserUpdatedNarroValues;
            narrowSearchFields += "UpdatedBy" + ",";
            narrowSearchValues += UserUpdatedNarroValues + "@@";
        }
        else if (ScheduleUpdatedByNarroValues != undefined && ScheduleUpdatedByNarroValues.length > 0) {
            narrowSearchFields += "UpdatedBy" + ",";
            narrowSearchValues += ScheduleUpdatedByNarroValues + "@@";
        }
        else {
            narrowSearchFields += "UpdatedBy" + ",";
            narrowSearchValues += "@@";
        }
        ///////////////////////////////////////////////////////////////////////////////////////////////
        if (($('#DateCFrom').val() != '' && $('#DateCTo').val() != '') || ($('#ReceiveDateCFrom').val() != '' && $('#ReceiveDateCTo').val() != '')) {
            //narrowSearchItem += "[###]DateCreatedFrom#" + GetDateInYYYYMMDDFormat($('#DateCFrom').val()) + "#DateCreatedTo#" + GetDateInYYYYMMDDFormat($('#DateCTo').val());
            narrowSearchFields += "DateCreatedFrom" + ",";

            if (typeof $('#DateCTo').val() != "undefined" && typeof $('#DateCFrom').val() != "undefined" && $('#DateCFrom').val() != '' && $('#DateCTo').val() != '')
                narrowSearchValues += ($('#DateCFrom').val()) + "," + ($('#DateCTo').val()) + "@@";
            else if (typeof $('#ReceiveDateCFrom').val() != "undefined" && typeof $('#ReceiveDateCTo').val() != "undefined" && $('#ReceiveDateCFrom').val() != '' && $('#ReceiveDateCTo').val() != '')
                narrowSearchValues += ($('#ReceiveDateCFrom').val()) + "," + ($('#ReceiveDateCTo').val()) + "@@";
            else if (typeof $('#ScheduleDateCFrom').val() != "undefined" && typeof $('#ScheduleDateCTo').val() != "undefined" && $('#ScheduleDateCFrom').val() != '' && $('#ScheduleDateCTo').val() != '')
                narrowSearchValues += ($('#ScheduleDateCFrom').val()) + "," + ($('#ScheduleDateCTo').val()) + "@@";
            else
                narrowSearchValues += "@@";
        }
        else {
            narrowSearchFields += "DateCreatedFrom" + ",";
            narrowSearchValues += "@@";
        }
        ////////////////////////////////////////////////////////////////////////////////////////////////
        if (($('#DateUFrom').val() != '' && $('#DateUTo').val() != '') || ($('#ReceiveDateUFrom').val() != '' && $('#ReceiveDateUTo').val() != '')) {
            //narrowSearchItem += "[###]DateUpdatedFrom#" + GetDateInYYYYMMDDFormat($('#DateUFrom').val()) + "#DateUpdatedTo#" + GetDateInYYYYMMDDFormat($('#DateUTo').val());
            narrowSearchFields += "DateUpdatedFrom" + ",";
            if (typeof $('#DateUFrom').val() != "undefined" && typeof $('#DateUTo').val() != "undefined" && $('#DateUTo').val() != '' && $('#DateUFrom').val() != '')
                narrowSearchValues += ($('#DateUFrom').val()) + "," + ($('#DateUTo').val()) + "@@";
            else if (typeof $('#ReceiveDateUFrom').val() != "undefined" && typeof $('#ReceiveDateUTo').val() != "undefined" && $('#ReceiveDateUTo').val() != '' && $('#ReceiveDateUFrom').val() != '')
                narrowSearchValues += ($('#ReceiveDateUFrom').val()) + "," + ($('#ReceiveDateUTo').val()) + "@@";
            else if (typeof $('#ScheduleDateUFrom').val() != "undefined" && typeof $('#ScheduleDateUTo').val() != "undefined" && $('#ScheduleDateUTo').val() != '' && $('#ScheduleDateUFrom').val() != '')
                narrowSearchValues += ($('#ScheduleDateUFrom').val()) + "," + ($('#ScheduleDateUTo').val()) + "@@";
            else
                narrowSearchValues += "@@";
        }
        else {
            narrowSearchFields += "DateUpdatedFrom" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUDF1NarrowValues != undefined && UserUDF1NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "UDF1" + ",";
            narrowSearchValues += UserUDF1NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF1" + ",";
            narrowSearchValues += "@@";
        }
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUDF2NarrowValues != undefined && UserUDF2NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF2#" + UserUDF2NarrowValues;
            narrowSearchFields += "UDF2" + ",";
            narrowSearchValues += UserUDF2NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF2" + ",";
            narrowSearchValues += "@@";
        }
        ///////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUDF3NarrowValues != undefined && UserUDF3NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF3#" + UserUDF3NarrowValues;
            narrowSearchFields += "UDF3" + ",";
            narrowSearchValues += UserUDF3NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF3" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUDF4NarrowValues != undefined && UserUDF4NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF4#" + UserUDF4NarrowValues;
            narrowSearchFields += "UDF4" + ",";
            narrowSearchValues += UserUDF4NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF4" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUDF5NarrowValues != undefined && UserUDF5NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF5#" + UserUDF5NarrowValues;
            narrowSearchFields += "UDF5" + ",";
            narrowSearchValues += UserUDF5NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF5" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (PullSupplierNarroValues != undefined && PullSupplierNarroValues.length > 0) {
            narrowSearchFields += "SupplierID" + ",";
            narrowSearchValues += PullSupplierNarroValues + "@@";
        }
        else {
            narrowSearchFields += "SupplierID" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////////////////////////////////////////////////////////////
        if (ManufacturerNarroValues != undefined && ManufacturerNarroValues.length > 0) {
            narrowSearchFields += "ManufacturerID" + ",";
            narrowSearchValues += ManufacturerNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ManufacturerID" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////////////////////////////////////////////////////////////
        if (PullCategoryNarroValues != undefined && PullCategoryNarroValues.length > 0) {
            narrowSearchFields += "CategoryID" + ",";
            narrowSearchValues += PullCategoryNarroValues + "@@";
        }
        else {
            narrowSearchFields += "CategoryID" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (ReqCustomerNarroValues != undefined && ReqCustomerNarroValues.length > 0) {
            narrowSearchFields += "CustomerID" + ",";
            narrowSearchValues += ReqCustomerNarroValues + "@@";
        }
        else {
            narrowSearchFields += "CustomerID" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////////////////////////////////////////////////////////
        if (OrderStatusNarroValues != undefined && OrderStatusNarroValues.length > 0) {
            narrowSearchFields += "OrderStatus" + ",";
            narrowSearchValues += OrderStatusNarroValues + "@@";
        }
        else {
            narrowSearchFields += "OrderStatus" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////////////////////////////////////////////////////////
        if (ReqRequiredDateNarroValues != undefined && ReqRequiredDateNarroValues.length > 0) {
            narrowSearchFields += "OrderRequiredDate" + ",";
            narrowSearchValues += ReqRequiredDateNarroValues + "@@";
        }
        else {
            narrowSearchFields += "OrderRequiredDate" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////15//////////////////////////////////////////////////////////

        if (CostNarroSearchValue != undefined && CostNarroSearchValue.length > 0) {
            narrowSearchFields += "Cost" + ",";
            narrowSearchValues += CostNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "Cost" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////16//////////////////////////////////////////////////////////

        if (spendPerSpendLimit != undefined && spendPerSpendLimit.length > 0) {
            narrowSearchFields += "spendPerSpendLimit" + ",";
            narrowSearchValues += spendPerSpendLimit + "@@";
        }
        else {
            narrowSearchFields += "spendPerSpendLimit" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////17//////////////////////////////////////////////////////////

        if (TotalSpendLimit != undefined && TotalSpendLimit.length > 0) {
            narrowSearchFields += "TotalSpendLimit" + ",";
            narrowSearchValues += TotalSpendLimit + "@@";
        }
        else {
            narrowSearchFields += "TotalSpendLimit" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////18//////////////////////////////////////////////////////////

        if (TotalSpendRemaining != undefined && TotalSpendRemaining.length > 0) {
            narrowSearchFields += "TotalSpendRemaining" + ",";
            narrowSearchValues += TotalSpendRemaining + "@@";
        }
        else {
            narrowSearchFields += "TotalSpendRemaining" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////19//////////////////////////////////////////////////////////

        if (TotalItemSpendLimit != undefined && TotalItemSpendLimit.length > 0) {
            narrowSearchFields += "TotalItemSpendLimit" + ",";
            narrowSearchValues += TotalItemSpendLimit + "@@";
        }
        else {
            narrowSearchFields += "TotalItemSpendLimit" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////20//////////////////////////////////////////////////////////

        if (MatStagLocationsNarroValues != undefined && MatStagLocationsNarroValues.length > 0) {
            narrowSearchFields += "BinName" + ",";
            narrowSearchValues += MatStagLocationsNarroValues + "@@";
        }
        else {
            narrowSearchFields += "BinName" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////21//////////////////////////////////////////////////////////

        if (SSNarroSearchValue != undefined && SSNarroSearchValue.length > 0) {
            narrowSearchFields += "SS" + ",";
            narrowSearchValues += SSNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "SS" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////22//////////////////////////////////////////////////////////

        if (ItemTypeNarroSearchValue != undefined && ItemTypeNarroSearchValue.length > 0) {
            narrowSearchFields += "ItemType" + ",";
            narrowSearchValues += ItemTypeNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "ItemType" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////23//////////////////////////////////////////////////////////

        if (CartSupplierNarroValues != undefined && CartSupplierNarroValues.length > 0) {
            narrowSearchFields += "SupplierName" + ",";
            narrowSearchValues += CartSupplierNarroValues + "@@";
        }
        else {
            narrowSearchFields += "SupplierName" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////24//////////////////////////////////////////////////////////

        if (CartRTNarroValues != undefined && CartRTNarroValues.length > 0) {
            narrowSearchFields += "ReplenishType" + ",";
            narrowSearchValues += CartRTNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ReplenishType" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////25//////////////////////////////////////////////////////////
        if (_RequisitionCurrentTab != undefined && _RequisitionCurrentTab.length > 0) {

            narrowSearchFields += "RequisitionStatus" + ",";
            narrowSearchValues += _RequisitionCurrentTab + "@@";
        }
        else {

            narrowSearchFields += "RequisitionStatus" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////26//////////////////////////////////////////////////////////
        if (OrderNumberNarroValues != undefined && OrderNumberNarroValues.length > 0) {
            narrowSearchFields += "OrderNumber" + ",";
            narrowSearchValues += OrderNumberNarroValues + "@@";
        }
        else {
            narrowSearchFields += "OrderNumber" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////27//////////////////////////////////////////////////////////
        if (LocationValue != undefined && LocationValue.length > 0) {
            narrowSearchFields += "LocationID" + ",";
            narrowSearchValues += LocationValue + "@@";
        }
        else {
            narrowSearchFields += "LocationID" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////28//////////////////////////////////////////////////////////
        if (WorkOrderValue != undefined && WorkOrderValue.length > 0) {
            narrowSearchFields += "WorkOrderID" + ",";
            narrowSearchValues += WorkOrderValue + "@@";
        }
        else {
            narrowSearchFields += "WorkOrderID" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////29//////////////////////////////////////////////////////////
        if (ToolCategoryValue != undefined && ToolCategoryValue.length > 0) {
            narrowSearchFields += "ToolCategoryID" + ",";
            narrowSearchValues += ToolCategoryValue + "@@";
        }
        else {
            narrowSearchFields += "ToolCategoryID" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////30//////////////////////////////////////////////////////////
        if (ToolMaintanceValue != undefined && ToolMaintanceValue.length > 0) {
            narrowSearchFields += "ToolMaintanenceID" + ",";
            narrowSearchValues += ToolMaintanceValue + "@@";
        }
        else {
            narrowSearchFields += "ToolMaintanenceID" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////31//////////////////////////////////////////////////////////
        if (ToolCostValue != undefined && ToolCostValue.length > 0) {
            narrowSearchFields += "Cost" + ",";
            narrowSearchValues += ToolCostValue + "@@";
        }
        else {
            narrowSearchFields += "Cost" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////32//////////////////////////////////////////////////////////
        if (WOAssetValues != undefined && WOAssetValues.length > 0) {
            narrowSearchFields += "AssetID" + ",";
            narrowSearchValues += WOAssetValues + "@@";
        }
        else {
            narrowSearchFields += "AssetID" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////33//////////////////////////////////////////////////////////
        if (WOCustomerValues != undefined && WOCustomerValues.length > 0) {
            narrowSearchFields += "CustomerID" + ",";
            narrowSearchValues += WOCustomerValues + "@@";
        }
        else {
            narrowSearchFields += "CustomerID" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////34//////////////////////////////////////////////////////////
        if (WOTechnicianValues != undefined && WOTechnicianValues.length > 0) {
            narrowSearchFields += "TechnicianID" + ",";
            narrowSearchValues += WOTechnicianValues + "@@";
        }
        else {
            narrowSearchFields += "TechnicianID" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////35//////////////////////////////////////////////////////////
        if (WOToolValues != undefined && WOToolValues.length > 0) {
            narrowSearchFields += "ToolID" + ",";
            narrowSearchValues += WOToolValues + "@@";
        }
        else {
            narrowSearchFields += "ToolID" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////36//////////////////////////////////////////////////////////
        if (RoleUserTypeNarroValues != undefined && RoleUserTypeNarroValues.length > 0) {
            narrowSearchFields += "UserType" + ",";
            narrowSearchValues += RoleUserTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "UserType" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////37//////////////////////////////////////////////////////////
        if (ICountTypeNarroValues != undefined && ICountTypeNarroValues.length > 0) {
            narrowSearchFields += "CountType" + ",";
            narrowSearchValues += ICountTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "CountType" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////38//////////////////////////////////////////////////////////
        if (ICountStatusNarroValues != undefined && ICountStatusNarroValues.length > 0) {
            narrowSearchFields += "CountStatus" + ",";
            narrowSearchValues += ICountStatusNarroValues + "@@";
        }
        else {
            narrowSearchFields += "CountStatus" + ",";
            narrowSearchValues += "@@";
        }
        //narrowSearch = 'STARTWITH#' + narrowSearchItem;


        //////////////////////////////////////39//////////////////////////////////////////////////////////
        if (UserTypeNarroValues != undefined && UserTypeNarroValues.length > 0) {
            narrowSearchFields += "UserType" + ",";
            narrowSearchValues += UserTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "UserType" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////40//////////////////////////////////////////////////////////
        if (UserRoomNarroValues != undefined && UserRoomNarroValues.length > 0) {
            narrowSearchFields += "UserRoom" + ",";
            narrowSearchValues += UserRoomNarroValues + "@@";
        }
        else {
            narrowSearchFields += "UserRoom" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////41//////////////////////////////////////////////////////////
        if (UserRoleNarroValues != undefined && UserRoleNarroValues.length > 0) {
            narrowSearchFields += "UserRole" + ",";
            narrowSearchValues += UserRoleNarroValues + "@@";
        }
        else {
            narrowSearchFields += "UserRole" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////42//////////////////////////////////////////////////////////
        if (UserCompanyNarroValues != undefined && UserCompanyNarroValues.length > 0) {
            narrowSearchFields += "UserCompany" + ",";
            narrowSearchValues += UserCompanyNarroValues + "@@";
        }
        else {
            narrowSearchFields += "UserCompany" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////43//////////////////////////////////////////////////////////
        if (RoleRoomNarroValues != undefined && RoleRoomNarroValues.length > 0) {
            narrowSearchFields += "RoleRoom" + ",";
            narrowSearchValues += RoleRoomNarroValues + "@@";
        }
        else {
            narrowSearchFields += "RoleRoom" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////44//////////////////////////////////////////////////////////

        if (RoleCompanyNarroValues != undefined && RoleCompanyNarroValues.length > 0) {
            narrowSearchFields += "RoleCompany" + ",";
            narrowSearchValues += RoleCompanyNarroValues + "@@";
        }
        else {
            narrowSearchFields += "RoleCompany" + ",";
            narrowSearchValues += "@@";
        }

        ///////////////////////////////////45/////////////////////////////////////////////////////////////
        if (SchedulerItemSearchValue != undefined && SchedulerItemSearchValue.length > 0) {
            narrowSearchFields += "SchedulerItem" + ",";
            narrowSearchValues += SchedulerItemSearchValue + "@@";
        }
        else {
            narrowSearchFields += "SchedulerItem" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////46//////////////////////////////////////////////////////////////
        if (SchedulerTypeSearchValue != undefined && SchedulerTypeSearchValue.length > 0) {
            narrowSearchFields += "SchedulerType" + ",";
            narrowSearchValues += SchedulerTypeSearchValue + "@@";
        }
        else {
            narrowSearchFields += "SchedulerType" + ",";
            narrowSearchValues += "@@";
        }
        if (ReqWorkOrderNarroValues != undefined && ReqWorkOrderNarroValues.length > 0) {

            narrowSearchFields += "WorkOrderName" + ",";
            narrowSearchValues += ReqWorkOrderNarroValues + "@@";
        }
        else {
            narrowSearchFields += "WorkOrderName" + ",";
            narrowSearchValues += "@@";
        }
        if (AverageCostNarroSearchValue != undefined && AverageCostNarroSearchValue.length > 0) {

            narrowSearchFields += "AverageCost" + ",";
            narrowSearchValues += AverageCostNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "AverageCost" + ",";
            narrowSearchValues += "@@";
        }
        if (TurnsNarroSearchValue != undefined && TurnsNarroSearchValue.length > 0) {

            narrowSearchFields += "Turns" + ",";
            narrowSearchValues += TurnsNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "Turns" + ",";
            narrowSearchValues += "@@";
        }

        if (PullActionTypeNarroSearchValue != undefined && PullActionTypeNarroSearchValue.length > 0) {

            narrowSearchFields += "ActionType" + ",";
            narrowSearchValues += PullActionTypeNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "ActionType" + ",";
            narrowSearchValues += "@@";
        }


        //////////////////////////////////////38//////////////////////////////////////////////////////////
        if (ntfcEmailTemlateNarroValues != undefined && ntfcEmailTemlateNarroValues.length > 0) {
            narrowSearchFields += "EmailTemplate" + ",";
            narrowSearchValues += ntfcEmailTemlateNarroValues + "@@";
        }
        else {
            narrowSearchFields += "EmailTemplate" + ",";
            narrowSearchValues += "@@";
        }


        //////////////////////////////////////38//////////////////////////////////////////////////////////
        if (ntfcReportsNarroValues != undefined && ntfcReportsNarroValues.length > 0) {
            narrowSearchFields += "Reports" + ",";
            narrowSearchValues += ntfcReportsNarroValues + "@@";
        }
        else {
            narrowSearchFields += "Reports" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////38//////////////////////////////////////////////////////////
        if (ntfcScheduleNarroValues != undefined && ntfcScheduleNarroValues.length > 0) {
            narrowSearchFields += "Schedules" + ",";
            narrowSearchValues += ntfcScheduleNarroValues + "@@";
        }
        else {
            narrowSearchFields += "Schedules" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////38//////////////////////////////////////////////////////////
        if (ntfcNotificationTypeNarroValues != undefined && ntfcNotificationTypeNarroValues.length > 0) {
            narrowSearchFields += "NotificationTypes" + ",";
            narrowSearchValues += ntfcNotificationTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "NotificationTypes" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////////////////////////////////////////////////////////////
        if (ItemLocationNarroValues != undefined && ItemLocationNarroValues.length > 0) {
            narrowSearchFields += "ItemLocations" + ",";
            narrowSearchValues += ItemLocationNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ItemLocations" + ",";
            narrowSearchValues += "@@";
        }

        if (EnterpriseNarroValues != undefined && EnterpriseNarroValues.length > 0) {
            narrowSearchFields += "EnterpriseName" + ",";
            narrowSearchValues += EnterpriseNarroValues + "@@";
        }
        else {
            narrowSearchFields += "EnterpriseName" + ",";
            narrowSearchValues += "@@";
        }

        if (RoleCompanyNarroValues != undefined && RoleCompanyNarroValues.length > 0) {
            narrowSearchFields += "CompanyName" + ",";
            narrowSearchValues += RoleCompanyNarroValues + "@@";
        }
        else {
            narrowSearchFields += "EnterpriseName" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (PullProjectSpendNarroValues != undefined && PullProjectSpendNarroValues.length > 0) {
            narrowSearchFields += "ProjectSpendID" + ",";
            narrowSearchValues += PullProjectSpendNarroValues + "@@";
        }
        else {

            narrowSearchFields += "ProjectSpendID" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (PullWorkOrderValues != undefined && PullWorkOrderValues.length > 0) {
            narrowSearchFields += "WorkOrderID" + ",";
            narrowSearchValues += PullWorkOrderValues + "@@";
        }
        else {
            narrowSearchFields += "WorkOrderID" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (PullRequistionarroValues != undefined && PullRequistionarroValues.length > 0) {
            narrowSearchFields += "RequistionID" + ",";
            narrowSearchValues += PullRequistionarroValues + "@@";
        }
        else {
            narrowSearchFields += "RequistionID" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////////////////////////////////////////////////////////
        if (IsBillingNarroSearchValue != undefined && IsBillingNarroSearchValue.length > 0) {
            narrowSearchFields += "Billing" + ",";
            narrowSearchValues += IsBillingNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "Billing" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////////////////////////////////////////////////////////
        if (IsEDISentNarroSearchValue != undefined && IsEDISentNarroSearchValue.length > 0) {
            narrowSearchFields += "IsEDISent" + ",";
            narrowSearchValues += IsEDISentNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "IsEDISent" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (AvgUsageNarroSearchValue != undefined && AvgUsageNarroSearchValue.length > 0) {
            narrowSearchFields += "AverageUsage" + ",";
            narrowSearchValues += AvgUsageNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "AverageUsage" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (TurnsNarroSearchValue != undefined && TurnsNarroSearchValue.length > 0) {
            narrowSearchFields += "Turns" + ",";
            narrowSearchValues += TurnsNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "Turns" + ",";
            narrowSearchValues += "@@";
        }
        if (ItemUDF1 != undefined && ItemUDF1.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ItemUDF1" + ",";
            narrowSearchValues += ItemUDF1 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF1" + ",";
            narrowSearchValues += "@@";
        }
        if (ItemUDF2 != undefined && ItemUDF2.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ItemUDF2" + ",";
            narrowSearchValues += ItemUDF2 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF2" + ",";
            narrowSearchValues += "@@";
        }
        if (ItemUDF3 != undefined && ItemUDF3.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ItemUDF3" + ",";
            narrowSearchValues += ItemUDF3 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF3" + ",";
            narrowSearchValues += "@@";
        }
        if (ItemUDF4 != undefined && ItemUDF4.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ItemUDF4" + ",";
            narrowSearchValues += ItemUDF4 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF4" + ",";
            narrowSearchValues += "@@";
        }
        if (ItemUDF5 != undefined && ItemUDF5.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ItemUDF5" + ",";
            narrowSearchValues += ItemUDF5 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF5" + ",";
            narrowSearchValues += "@@";
        }
        if (RoomStatusValue != undefined && RoomStatusValue.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "RoomStatusValue" + ",";
            narrowSearchValues += RoomStatusValue + "@@";
        }
        else {
            narrowSearchFields += "RoomStatusValue" + ",";
            narrowSearchValues += "@@";
        }
        if (ToolCheckOutUDF1 != undefined && ToolCheckOutUDF1.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolCheckOutUDF1" + ",";
            narrowSearchValues += ToolCheckOutUDF1 + "@@";
        }
        else {
            narrowSearchFields += "ToolCheckOutUDF1" + ",";
            narrowSearchValues += "@@";
        }
        if (ToolCheckOutUDF2 != undefined && ToolCheckOutUDF2.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolCheckOutUDF2" + ",";
            narrowSearchValues += ToolCheckOutUDF2 + "@@";
        }
        else {
            narrowSearchFields += "ToolCheckOutUDF2" + ",";
            narrowSearchValues += "@@";
        }
        if (ToolCheckOutUDF3 != undefined && ToolCheckOutUDF3.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolCheckOutUDF3" + ",";
            narrowSearchValues += ToolCheckOutUDF3 + "@@";
        }
        else {
            narrowSearchFields += "ToolCheckOutUDF3" + ",";
            narrowSearchValues += "@@";
        }
        if (ToolCheckOutUDF4 != undefined && ToolCheckOutUDF4.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolCheckOutUDF4" + ",";
            narrowSearchValues += ToolCheckOutUDF4 + "@@";
        }
        else {
            narrowSearchFields += "ToolCheckOutUDF4" + ",";
            narrowSearchValues += "@@";
        }
        if (ToolCheckOutUDF5 != undefined && ToolCheckOutUDF5.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolCheckOutUDF5" + ",";
            narrowSearchValues += ToolCheckOutUDF5 + "@@";
        }
        else {
            narrowSearchFields += "ToolCheckOutUDF5" + ",";
            narrowSearchValues += "@@";
        }

        if (ToolCheckoutValue != undefined && ToolCheckoutValue.length > 0) {
            narrowSearchFields += "Maintense" + ",";
            narrowSearchValues += ToolCheckoutValue + "@@";
        }
        else {
            narrowSearchFields += "Maintense" + ",";
            narrowSearchValues += "@@";
        }
        if (ToolTechnicianValue != undefined && ToolTechnicianValue.length > 0) {
            narrowSearchFields += "ToolTechnician" + ",";
            narrowSearchValues += ToolTechnicianValue + "@@";
        }
        else {
            narrowSearchFields += "ToolTechnician" + ",";
            narrowSearchValues += "@@";
        }
        if (PullOrderNumbernarroValues != undefined && PullOrderNumbernarroValues.length > 0) {
            narrowSearchFields += "OrderNumber" + ",";
            narrowSearchValues += PullOrderNumbernarroValues + "@@";
        }
        else {
            narrowSearchFields += "OrderNumber" + ",";
            narrowSearchValues += "@@";
        }
        ////////////////////////////////////////////////////////////////////////////////////////////////
        if (UserEnterpriseNarroValues != undefined && UserEnterpriseNarroValues.length > 0) {
            narrowSearchFields += "UserEnterprise" + ",";
            narrowSearchValues += UserEnterpriseNarroValues + "@@";
        }
        else {
            narrowSearchFields += "UserEnterprise" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////80///////////////////////////////////////////////////////
        if (MoveTypeNarroValues != undefined && MoveTypeNarroValues.length > 0) {
            narrowSearchFields += "MoveType" + ",";
            narrowSearchValues += MoveTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "MoveType" + ",";
            narrowSearchValues += "@@";
        }
        if (MouleTypeNarroValues != undefined && MouleTypeNarroValues.length > 0) {
            narrowSearchFields += "ModuleType" + ",";
            narrowSearchValues += MouleTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ModuleType" + ",";
            narrowSearchValues += "@@";
        }
        if (ItemsNarroValues != undefined && ItemsNarroValues.length > 0) {
            narrowSearchFields += "Items" + ",";
            narrowSearchValues += ItemsNarroValues + "@@";
        }
        else {
            narrowSearchFields += "Items" + ",";
            narrowSearchValues += "@@";
        }
        if (UserSupplierNarroValues != undefined && UserSupplierNarroValues.length > 0) {
            narrowSearchFields += "Supplier" + ",";
            narrowSearchValues += UserSupplierNarroValues + "@@";
        }
        else {
            narrowSearchFields += "Supplier" + ",";
            narrowSearchValues += "@@";
        }
        if (CateogryNarroValues != undefined && CateogryNarroValues.length > 0) {
            narrowSearchFields += "Category" + ",";
            narrowSearchValues += CateogryNarroValues + "@@";
        }
        else {
            narrowSearchFields += "Category" + ",";
            narrowSearchValues += "@@";
        }
        if (PullPOStatusValue != undefined && PullPOStatusValue.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "PullPOStatusValue" + ",";
            narrowSearchValues += PullPOStatusValue + "@@";
        }
        else {
            narrowSearchFields += "PullPOStatusValue" + ",";
            narrowSearchValues += "@@";
        }

        if (CompanyStatusValue != undefined && CompanyStatusValue.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "CompanyStatusValue" + ",";
            narrowSearchValues += CompanyStatusValue + "@@";
        }
        else {
            narrowSearchFields += "CompanyStatusValue" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////////////////////////////////////////////////////////////////
        if (InventoryClassificationNarroSearchValue != undefined && InventoryClassificationNarroSearchValue.length > 0) {
            narrowSearchFields += "InventoryClassification" + ",";
            narrowSearchValues += InventoryClassificationNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "InventoryClassification" + ",";
            narrowSearchValues += "@@";
        }
        //ItemLocations
        if (ItemTrackingTypeNarroValues != undefined && ItemTrackingTypeNarroValues.length > 0) {
            narrowSearchFields += "ItemTrackingType" + ",";
            narrowSearchValues += ItemTrackingTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ItemTrackingType" + ",";
            narrowSearchValues += "@@";
        }
        if (StockStatusTypeNarroValues != undefined && StockStatusTypeNarroValues.length > 0) {
            narrowSearchFields += "StockStatus" + ",";
            narrowSearchValues += StockStatusTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "StockStatus" + ",";
            narrowSearchValues += "@@";
        }
        if (WOSupplierValues != undefined && WOSupplierValues.length > 0) {
            narrowSearchFields += "SupplierID" + ",";
            narrowSearchValues += WOSupplierValues + "@@";
        }
        else {
            narrowSearchFields += "SupplierID" + ",";
            narrowSearchValues += "@@";
        }
        if (RequistionSupplierValues != undefined && RequistionSupplierValues.length > 0) {
            narrowSearchFields += "SupplierID" + ",";
            narrowSearchValues += RequistionSupplierValues + "@@";
        }
        else {
            narrowSearchFields += "SupplierID" + ",";
            narrowSearchValues += "@@";
        }
       


        if (UserUDF6NarrowValues != undefined && UserUDF6NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "UDF6" + ",";
            narrowSearchValues += UserUDF6NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF6" + ",";
            narrowSearchValues += "@@";
        }
        ///////////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUDF7NarrowValues != undefined && UserUDF7NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF2#" + UserUDF2NarrowValues;
            narrowSearchFields += "UDF7" + ",";
            narrowSearchValues += UserUDF7NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF7" + ",";
            narrowSearchValues += "@@";
        }
        ///////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUDF8NarrowValues != undefined && UserUDF8NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF3#" + UserUDF3NarrowValues;
            narrowSearchFields += "UDF8" + ",";
            narrowSearchValues += UserUDF8NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF8" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUDF9NarrowValues != undefined && UserUDF9NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF4#" + UserUDF4NarrowValues;
            narrowSearchFields += "UDF9" + ",";
            narrowSearchValues += UserUDF9NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF9" + ",";
            narrowSearchValues += "@@";
        }
        /////////////////////////////////////////////////////////////////////////////////////////////
        if (UserUDF10NarrowValues != undefined && UserUDF10NarrowValues.length > 0) {
            //narrowSearchItem += "[###]UDF5#" + UserUDF5NarrowValues;
            narrowSearchFields += "UDF10" + ",";
            narrowSearchValues += UserUDF10NarrowValues + "@@";
        }
        else {
            narrowSearchFields += "UDF10" + ",";
            narrowSearchValues += "@@";
        }
        if (ItemActive != undefined && ItemActive.length > 0) {
            narrowSearchFields += "IsActive" + ",";
            narrowSearchValues += ItemActive + "@@";
        }
        else {
            narrowSearchFields += "IsActive" + ",";
            narrowSearchValues += "@@";
        }
        if (RoleEnterpriseNarroValues != undefined && RoleEnterpriseNarroValues.length > 0) {
            narrowSearchFields += "RoleEnterprise" + ",";
            narrowSearchValues += RoleEnterpriseNarroValues + "@@";
        }
        else {
            narrowSearchFields += "RoleEnterprise" + ",";
            narrowSearchValues += "@@";
        }
        if (ItemNumberItemBinNarroValues != undefined && ItemNumberItemBinNarroValues.length > 0) {
            narrowSearchFields += "ItemNumber" + ",";
            narrowSearchValues += ItemNumberItemBinNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ItemNumber" + ",";
            narrowSearchValues += "@@";
        }
        if (BinListItemBinNarroValues != undefined && BinListItemBinNarroValues.length > 0) {
            narrowSearchFields += "BinNumber" + ",";
            narrowSearchValues += BinListItemBinNarroValues + "@@";
        }
        else {
            narrowSearchFields += "BinNumber" + ",";
            narrowSearchValues += "@@";
        }
        //////////////////////////////////////27//////////////////////////////////////////////////////////
        if (MaintenanceValue != undefined && MaintenanceValue.length > 0) {
            narrowSearchFields += "MaintenanceValue" + ",";
            narrowSearchValues += MaintenanceValue + "@@";
        }
        else {
            narrowSearchFields += "MaintenanceValue" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////////////////////////////////////////////////////////////
        if (BillingRoomTypeTypeNarroValues != undefined && BillingRoomTypeTypeNarroValues.length > 0) {
            narrowSearchFields += "BillingRoomType" + ",";
            narrowSearchValues += BillingRoomTypeTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "BillingRoomType" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////////////////////////////////////////////////////////////
        if (InvoiceBranchNarroValues != undefined && InvoiceBranchNarroValues.length > 0) {
            narrowSearchFields += "InvoiceBranch" + ",";
            narrowSearchValues += InvoiceBranchNarroValues + "@@";
        }
        else {
            narrowSearchFields += "InvoiceBranch" + ",";
            narrowSearchValues += "@@";
        }

        ////////////////////////////////////////104 [Requisition Status Narrow Search]////////////////////////////////////////////////
        if (ddlRequisitionStatusNarroValues != undefined && ddlRequisitionStatusNarroValues.length > 0) {

            narrowSearchFields += "RequisitionStatusNS" + ",";
            narrowSearchValues += ddlRequisitionStatusNarroValues + "@@";
        }
        else {

            narrowSearchFields += "RequisitionStatusNS" + ",";
            narrowSearchValues += "@@";
        }

        ////////////////////////////////////////105 [Pull Consignment Narrow Search]////////////////////////////////////////////////
        if (PullConsignmentNarroSearchValue != undefined && PullConsignmentNarroSearchValue.length > 0) {

            narrowSearchFields += "Consignment" + ",";
            narrowSearchValues += PullConsignmentNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "Consignment" + ",";
            narrowSearchValues += "@@";
        }

        ////////////////////////////////////////106 [Asset Category Narrow Search]////////////////////////////////////////////////
        if (AssetCategoryValue != undefined && AssetCategoryValue.length > 0) {
            narrowSearchFields += "AssetCategoryID" + ",";
            narrowSearchValues += AssetCategoryValue + "@@";
        }
        else {
            narrowSearchFields += "AssetCategoryID" + ",";
            narrowSearchValues += "@@";
        }

        ////////////////////////////////////////107 [work order WOType Option in Narrowsearch]////////////////////////////////////////////////
        if (WOTypeValues != undefined && WOTypeValues.length > 0) {
            narrowSearchFields += "WOType" + ",";
            narrowSearchValues += WOTypeValues + "@@";
        }
        else {
            narrowSearchFields += "WOType" + ",";
            narrowSearchValues += "@@";
        }

        //////////////////////////////////////108 [Report Type option in Narrowsearch]///////////////////////////////////////////////////////
        if (ReportTypeNarroSearchValue != undefined && ReportTypeNarroSearchValue.length > 0) {
            narrowSearchFields += "ReportType" + ",";
            narrowSearchValues += ReportTypeNarroSearchValue + "@@";
        }
        else {
            narrowSearchFields += "ReportType" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////109////////////////////////////////////////////////////

        if (ItemUDF6 != undefined && ItemUDF6.length > 0) {
            narrowSearchFields += "ItemUDF6" + ",";
            narrowSearchValues += ItemUDF6 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF6" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////110////////////////////////////////////////////////////

        if (ItemUDF7 != undefined && ItemUDF7.length > 0) {
            narrowSearchFields += "ItemUDF7" + ",";
            narrowSearchValues += ItemUDF7 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF7" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////111////////////////////////////////////////////////////

        if (ItemUDF8 != undefined && ItemUDF8.length > 0) {
            narrowSearchFields += "ItemUDF8" + ",";
            narrowSearchValues += ItemUDF8 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF8" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////112////////////////////////////////////////////////////

        if (ItemUDF9 != undefined && ItemUDF9.length > 0) {
            narrowSearchFields += "ItemUDF9" + ",";
            narrowSearchValues += ItemUDF9 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF9" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////113////////////////////////////////////////////////////

        if (ItemUDF10 != undefined && ItemUDF10.length > 0) {
            narrowSearchFields += "ItemUDF10" + ",";
            narrowSearchValues += ItemUDF10 + "@@";
        }
        else {
            narrowSearchFields += "ItemUDF10" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////114////////////////////////////////////////////////////

        if (ToolTechUDF1 != undefined && ToolTechUDF1.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolTechUDF1" + ",";
            narrowSearchValues += ToolTechUDF1 + "@@";
        }
        else {
            narrowSearchFields += "ToolTechUDF1" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////115////////////////////////////////////////////////////

        if (ToolTechUDF2 != undefined && ToolTechUDF2.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolTechUDF2" + ",";
            narrowSearchValues += ToolTechUDF2 + "@@";
        }
        else {
            narrowSearchFields += "ToolTechUDF2" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////116////////////////////////////////////////////////////

        if (ToolTechUDF3 != undefined && ToolTechUDF3.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolTechUDF3" + ",";
            narrowSearchValues += ToolTechUDF3 + "@@";
        }
        else {
            narrowSearchFields += "ToolTechUDF3" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////117////////////////////////////////////////////////////

        if (ToolTechUDF4 != undefined && ToolTechUDF4.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolTechUDF4" + ",";
            narrowSearchValues += ToolTechUDF4 + "@@";
        }
        else {
            narrowSearchFields += "ToolTechUDF4" + ",";
            narrowSearchValues += "@@";
        }

        /////////////////////////////////////////118////////////////////////////////////////////////////

        if (ToolTechUDF5 != undefined && ToolTechUDF5.length > 0) {
            //narrowSearchItem += "[###]UDF1#" + UserUDF1NarrowValues;
            narrowSearchFields += "ToolTechUDF5" + ",";
            narrowSearchValues += ToolTechUDF5 + "@@";
        }
        else {
            narrowSearchFields += "ToolTechUDF5" + ",";
            narrowSearchValues += "@@";
        }

        if (PullSupplierAccountNumberValues != undefined && PullSupplierAccountNumberValues.length > 0) {
            narrowSearchFields += "SupplierAccountNumber" + ",";
            narrowSearchValues += PullSupplierAccountNumberValues + "@@";
        }
        else {
            narrowSearchFields += "SupplierAccountNumber" + ",";
            narrowSearchValues += "@@";
        }

        // Schedule Mapping Start
        if (ScheduleForNarroValues != undefined && ScheduleForNarroValues.length > 0) {
            narrowSearchFields += "ScheduleFor" + ",";
            narrowSearchValues += ScheduleForNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ScheduleFor" + ",";
            narrowSearchValues += "@@";
        }

        if (ScheduleItemNarroValues != undefined && ScheduleItemNarroValues.length > 0) {
            narrowSearchFields += "ScheduleItem" + ",";
            narrowSearchValues += ScheduleItemNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ScheduleItem" + ",";
            narrowSearchValues += "@@";
        }

        if (ScheduleTypeNarroValues != undefined && ScheduleTypeNarroValues.length > 0) {
            narrowSearchFields += "ScheduleType" + ",";
            narrowSearchValues += ScheduleTypeNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ScheduleType" + ",";
            narrowSearchValues += "@@";
        }

        if (SchedulerNameNarroValues != undefined && SchedulerNameNarroValues.length > 0) {
            narrowSearchFields += "SchedulerName" + ",";
            narrowSearchValues += SchedulerNameNarroValues + "@@";
        }
        else {
            narrowSearchFields += "SchedulerName" + ",";
            narrowSearchValues += "@@";
        }

        if (ToolAssetNameNarroValues != undefined && ToolAssetNameNarroValues.length > 0) {
            narrowSearchFields += "ToolAssetName" + ",";
            narrowSearchValues += ToolAssetNameNarroValues + "@@";
        }
        else {
            narrowSearchFields += "ToolAssetName" + ",";
            narrowSearchValues += "@@";
        }

        ////////////////////////////////////////[Quote Status Narrow Search]////////////////////////////////////////////////
        if (QuoteStatusNarroValues != undefined && QuoteStatusNarroValues.length > 0) {

            narrowSearchFields += "QuoteStatus" + ",";
            narrowSearchValues += QuoteStatusNarroValues + "@@";
        }
        else {

            narrowSearchFields += "QuoteStatus" + ",";
            narrowSearchValues += "@@";
        }

        if (QuoteSupplierNarrowValues != undefined && QuoteSupplierNarrowValues.length > 0) {

            narrowSearchFields += "QuoteSupplier" + ",";
            narrowSearchValues += QuoteSupplierNarrowValues + "@@";
        }
        else {

            narrowSearchFields += "QuoteSupplier" + ",";
            narrowSearchValues += "@@";
        }

        // Schedule Mapping End

        var searchtext = '';
        var tmpGlobalFilter = $("#txtReqfilter");
        if (tmpGlobalFilter !== undefined && tmpGlobalFilter != null && tmpGlobalFilter.val() != undefined && tmpGlobalFilter.val() != null && tmpGlobalFilter.val() != '')
            searchtext = $("#txtReqfilter").val().replace(/'/g, "''").replace(/&/g, "&amp;").replace(/>/g, "&gt;").replace(/</g, "&lt;").replace(/"/g, "&quot;");
        narrowSearch = narrowSearchFields + "[###]" + narrowSearchValues + "[###]" + searchtext;
        if (narrowSearch.length > 10)
            ReqNarrowSearchInGrid(narrowSearch);
        else if (UserCreatedNarroValues == undefined || UserCreatedNarroValues.length == 0 ||
            UserUpdatedNarroValues == undefined || UserUpdatedNarroValues.length == 0)
            ReqNarrowSearchInGrid(narrowSearch);
    }
    function DoReqNarrowSearch_OnEnter(KeyCode)
    {

        if (typeof $("#txtReqfilter") != 'undefined' && (KeyCode == 13 || $("#txtReqfilter").val().length == 0)) {
            DoReqNarrowSearch();
        }
    }
</script>
