@model eTurns.DTO.UserSettingDTO
@{
    string Message = string.Empty;
    ViewBag.Title = "Redirect";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>
    Redirect</h2>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Login</title>
    <style type="text/css">
        html
        {
            display: none;
            visibility: hidden;
        }
    </style>
</head>
<body>
    @using (Ajax.BeginForm("UserSettingSave", "Master", new AjaxOptions { HttpMethod = "Post", OnSuccess = "onSuccess", InsertionMode = InsertionMode.Replace, OnFailure = "onFailure" }, new { @id = "frmRedirectToPage" }))
    {
        @Html.AntiForgeryToken()
        <div class="userListingWrapper">
            <div id="dvCreteRedirect" style="display: none;">
                <div class="main-area">
                    <div class="header">
                        <div class="logo">
                            <img src="@Url.Content("~/Content/images/logo.png")" alt="" /></div>
                        <div class="close-event">
                            @* <img src="../../Content/images/min.jpg" alt="" />
                    <img src="../../Content/images/max.jpg" alt="" />*@ <a id="anchrclose">
                        <img id="imgclose1" style="cursor: pointer;" src="@Url.Content("~/Content/images/close.jpg")" alt="" /></a>
                        </div>
                        <div class="title">
                            <span><span class="red">e</span>Turns</span> 4 Setup</div>
                        @Html.DropDownListFor(model => model.RedirectURL, new List<SelectListItem>() { new SelectListItem() { Text = "select", Value = "0" } }, new { @class = "selectBox" })
                        @Html.CheckBoxFor(model => model.IsRemember, new { @id = "chkRemember" })
                    </div>
                    <div class="inner">
                        <div class="top-area">
                            <div class="left">
                                <h1>
                                </h1>
                                <p>
                                </p>
                            </div>
                            <div class="right large-logo">
                                <img src="@Url.Content("~/Content/images/large-logo.jpg")" alt="" /></div>
                        </div>
                        <div class="bottom-area">
                            <div class="middle">
                            </div>
                            <div class="unicode">
                                <span class="code-text">&nbsp;</span>
                            </div>
                            <div class="right">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
    <script type="text/javascript">
        var ddlPageName;
        $(function () {


            $("#dvCreteRedirect").dialog({
                autoOpen: true,
                modal: true,
                width: 525,
                title: '@eTurns.DTO.ResCartItem.PageTitle',
                draggable: false,
                resizable: false,
                open: function () {
                    $("#dvCreteRedirect").removeClass("ui-dialog-content").removeClass("ui-widget-content");
                    $(".ui-dialog-titlebar").hide();
                    $("#dvCreteRedirect").parent("div.ui-dialog").css("border", "0px").css("padding", "0px");
                },
                close: function () {
                    $('#HeatNameDiv').dialog('close');
                }
            });

            ddlPageName = $("#RedirectURL");

            $('.RightBlock').find('div.Rnav').find("ul[id='rightNav']").find("li:first").each(function (i) {
                var mnuBtnText = $.trim($(this).find('a').first().text());
                var mnuBtnVal = $.trim($(this).find('a').first().attr("href"));
                if (mnuBtnText.length > 0) {
                    ddlPageName.append('<optgroup  value="' + mnuBtnVal + '"> ' + mnuBtnText);
                    $(this).find('a').first().parent().find('ul').find('li').each(function (j) {
                        if ($(this).parent().hasClass('sub_subMenu') === false) {
                            var subMnuText = $.trim($(this).find('a').first().text());
                            var subMnuVal = $.trim($(this).find('a').attr("href"));
                            ddlPageName.append('<option  value="' + subMnuVal + '"> ' + ' &nbsp;     ' + subMnuText + '</option>');
                        }
                    });
                    ddlPageName.append('</optgroup>');
                }
            });

            // change event of dropdown
            $('#RedirectURL').change(function () {
                $("#frmRedirectToPage").submit();
            });

            function onSuccess(response) {
                if (response.Status == "ok") {
                    var pageURL = $("#PageName option:selected").val();
                    window.location.href = pageURL;
                }
            }

            function onFailure(message) {
                $("#spanGlobalMessage").html(message.statusText);
                $("#PageName").focus();
            }
        });
    </script>
</body>
</html>
